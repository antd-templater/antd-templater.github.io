var e,t,r,s,n=Object.defineProperty,o=(e,t,r)=>(((e,t,r)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),i=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},a=(e,t,r)=>(i(e,t,"read from private field"),r?r.call(e):t.get(e)),l=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},u=(e,t,r)=>(i(e,t,"access private method"),r);import{q as c,t as h,v as d,y as p,D as f,G as g,H as m,I as v}from"./vendors-all-4ZE5R_n7.js";const y="[MSW]";const w={formatMessage:function(e,...t){const r=c(e,...t);return`${y} ${r}`},warn:function(e,...t){},error:function(e,...t){}},b=/[\/\\]msw[\/\\]src[\/\\](.+)/,q=/(node_modules)?[\/\\]lib[\/\\](core|browser|node|native|iife)[\/\\]|^[^\/\\]*$/;const R=class e{constructor(e){o(this,"info"),o(this,"isUsed"),o(this,"resolver"),o(this,"resolverGenerator"),o(this,"resolverGeneratorResult"),o(this,"options"),this.resolver=e.resolver,this.options=e.options;const t=function(e){const t=e.stack;if(!t)return;const r=t.split("\n").slice(1).find((e=>!(b.test(e)||q.test(e))));if(!r)return;return r.replace(/\s*at [^()]*\(([^)]+)\)/,"$1").replace(/^@/,"")}(new Error);this.info={...e.info,callFrame:t},this.isUsed=!1}async parse(e){return{}}async test(e){const t=await this.parse({request:e.request,resolutionContext:e.resolutionContext});return this.predicate({request:e.request,parsedResult:t,resolutionContext:e.resolutionContext})}extendResolverArgs(e){return{}}cloneRequestOrGetFromCache(t){const r=e.cache.get(t);if(void 0!==r)return r;const s=t.clone();return e.cache.set(t,s),s}async run(e){var t,r;if(this.isUsed&&(null==(t=this.options)?void 0:t.once))return null;const s=this.cloneRequestOrGetFromCache(e.request),n=await this.parse({request:e.request,resolutionContext:e.resolutionContext});if(!this.predicate({request:e.request,parsedResult:n,resolutionContext:e.resolutionContext}))return null;if(this.isUsed&&(null==(r=this.options)?void 0:r.once))return null;this.isUsed=!0;const o=this.wrapResolver(this.resolver)({...this.extendResolverArgs({request:e.request,parsedResult:n}),requestId:e.requestId,request:e.request}).catch((e=>{if(e instanceof Response)return e;throw e})),i=await o;return this.createExecutionResult({request:s,requestId:e.requestId,response:i,parsedResult:n})}wrapResolver(e){return async t=>{const r=this.resolverGenerator||await e(t);if((s=r)&&"function"==typeof s[Symbol.iterator]){this.isUsed=!1;const{value:e,done:t}=r[Symbol.iterator]().next(),s=await e;return t&&(this.isUsed=!0),!s&&t?(h(this.resolverGeneratorResult,"Failed to returned a previously stored generator response: the value is not a valid Response."),this.resolverGeneratorResult.clone()):(this.resolverGenerator||(this.resolverGenerator=r),s&&(this.resolverGeneratorResult=null==s?void 0:s.clone()),s)}var s;return r}}createExecutionResult(e){return{handler:this,request:e.request,requestId:e.requestId,response:e.response,parsedResult:e.parsedResult}}};o(R,"cache",new WeakMap);let k=R;const E=async({request:e,requestId:t,handlers:r,resolutionContext:s})=>{let n=null,o=null;for(const i of r)if(o=await i.run({request:e,requestId:t,resolutionContext:s}),null!==o&&(n=i),null==o?void 0:o.response)break;return n?{handler:n,parsedResult:null==o?void 0:o.parsedResult,response:null==o?void 0:o.response}:null};function x(e){if("undefined"==typeof location)return e.toString();const t=e instanceof URL?e:new URL(e);return t.origin===location.origin?t.pathname:t.origin+t.pathname}var L,T,S=Object.create,P=Object.defineProperty,I=Object.getOwnPropertyDescriptor,C=Object.getOwnPropertyNames,O=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,M=((e,t,r)=>(r=null!=e?S(O(e)):{},((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of C(t))A.call(e,n)||n===r||P(e,n,{get:()=>t[n],enumerable:!(s=I(t,n))||s.enumerable});return e})(!t&&e&&e.__esModule?r:P(r,"default",{value:e,enumerable:!0}),e)))((L={"node_modules/set-cookie-parser/lib/set-cookie.js"(e,t){var r={decodeValues:!0,map:!1,silent:!1};function s(e){return"string"==typeof e&&!!e.trim()}function n(e,t){var n=e.split(";").filter(s),o=function(e){var t="",r="",s=e.split("=");return s.length>1?(t=s.shift(),r=s.join("=")):r=e,{name:t,value:r}}(n.shift()),i=o.name,a=o.value;t=t?Object.assign({},r,t):r;try{a=t.decodeValues?decodeURIComponent(a):a}catch(u){}var l={name:i,value:a};return n.forEach((function(e){var t=e.split("="),r=t.shift().trimLeft().toLowerCase(),s=t.join("=");"expires"===r?l.expires=new Date(s):"max-age"===r?l.maxAge=parseInt(s,10):"secure"===r?l.secure=!0:"httponly"===r?l.httpOnly=!0:"samesite"===r?l.sameSite=s:l[r]=s})),l}function o(e,t){if(t=t?Object.assign({},r,t):r,!e)return t.map?{}:[];if(e.headers)if("function"==typeof e.headers.getSetCookie)e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var o=e.headers[Object.keys(e.headers).find((function(e){return"set-cookie"===e.toLowerCase()}))];!o&&e.headers.cookie&&t.silent,e=o}return Array.isArray(e)||(e=[e]),(t=t?Object.assign({},r,t):r).map?e.filter(s).reduce((function(e,r){var s=n(r,t);return e[s.name]=s,e}),{}):e.filter(s).map((function(e){return n(e,t)}))}t.exports=o,t.exports.parse=o,t.exports.parseString=n,t.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,r,s,n,o,i=[],a=0;function l(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,o=!1;l();)if(","===(r=e.charAt(a))){for(s=a,a+=1,l(),n=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(o=!0,a=n,i.push(e.substring(t,s)),t=a):a=s+1}else a+=1;(!o||a>=e.length)&&i.push(e.substring(t,e.length))}return i}}},function(){return T||(0,L[C(L)[0]])((T={exports:{}}).exports,T),T.exports})()),j="MSW_COOKIE_STORE";function H(){try{if(null==localStorage)return!1;const e=j+"_test";return localStorage.setItem(e,"test"),localStorage.getItem(e),localStorage.removeItem(e),!0}catch(e){return!1}}function W(e,t){try{return e[t],!0}catch{return!1}}var U=new class{constructor(){this.store=new Map}add(e,t){if(W(e,"credentials")&&"omit"===e.credentials)return;const r=new URL(e.url),s=t.headers.get("set-cookie");if(!s)return;const n=Date.now(),o=(0,M.parse)(s).map((({maxAge:e,...t})=>({...t,expires:void 0===e?t.expires:new Date(n+1e3*e),maxAge:e}))),i=this.store.get(r.origin)||new Map;o.forEach((e=>{this.store.set(r.origin,i.set(e.name,e))}))}get(e){this.deleteExpiredCookies();const t=new URL(e.url),r=this.store.get(t.origin)||new Map;if(!W(e,"credentials"))return r;switch(e.credentials){case"include":if("undefined"==typeof document)return r;return(0,M.parse)(document.cookie).forEach((e=>{r.set(e.name,e)})),r;case"same-origin":return r;default:return new Map}}getAll(){return this.deleteExpiredCookies(),this.store}deleteAll(e){const t=new URL(e.url);this.store.delete(t.origin)}clear(){this.store.clear()}hydrate(){if(!H())return;const e=localStorage.getItem(j);if(e)try{JSON.parse(e).forEach((([e,t])=>{this.store.set(e,new Map(t.map((([e,{expires:t,...r}])=>[e,void 0===t?r:{...r,expires:new Date(t)}]))))}))}catch(t){localStorage.removeItem(j)}}persist(){if(!H())return;const e=Array.from(this.store.entries()).map((([e,t])=>[e,Array.from(t.entries())]));localStorage.setItem(j,JSON.stringify(e))}deleteExpiredCookies(){const e=Date.now();this.store.forEach(((t,r)=>{t.forEach((({expires:r,name:s})=>{void 0!==r&&r.getTime()<=e&&t.delete(s)})),0===t.size&&this.store.delete(r)}))}};async function D(e,t,r,s,n,o){var i,a,l,u,c,h;if(n.emit("request:start",{request:e,requestId:t}),"bypass"===e.headers.get("x-msw-intention"))return n.emit("request:end",{request:e,requestId:t}),void(null==(i=null==o?void 0:o.onPassthroughResponse)||i.call(o,e));const p=await d((()=>E({request:e,requestId:t,handlers:r,resolutionContext:null==o?void 0:o.resolutionContext})));if(p.error)throw n.emit("unhandledException",{error:p.error,request:e,requestId:t}),p.error;if(!p.data)return await async function(e,t="warn"){const r=new URL(e.url),s=x(r),n=`intercepted a request without a matching request handler:\n\n  â€¢ ${e.method} ${s}\n\nIf you still wish to intercept this unhandled request, please create a request handler for it.\nRead more: https://mswjs.io/docs/getting-started/mocks`;function o(e){switch(e){case"error":throw w.error("Error: %s",n),new Error(w.formatMessage('Cannot bypass a request when using the "error" strategy for the "onUnhandledRequest" option.'));case"warn":w.warn("Warning: %s",n);break;case"bypass":break;default:throw new Error(w.formatMessage('Failed to react to an unhandled request: unknown strategy "%s". Please provide one of the supported strategies ("bypass", "warn", "error") or a custom callback function as the value of the "onUnhandledRequest" option.',e))}}"function"!=typeof t?"file:"!==r.protocol&&o(t):t(e,{warning:o.bind(null,"warn"),error:o.bind(null,"error")})}(e,s.onUnhandledRequest),n.emit("request:unhandled",{request:e,requestId:t}),n.emit("request:end",{request:e,requestId:t}),void(null==(a=null==o?void 0:o.onPassthroughResponse)||a.call(o,e));const{response:f}=p.data;if(!f)return n.emit("request:end",{request:e,requestId:t}),void(null==(l=null==o?void 0:o.onPassthroughResponse)||l.call(o,e));if(302===f.status&&"passthrough"===f.headers.get("x-msw-intention"))return n.emit("request:end",{request:e,requestId:t}),void(null==(u=null==o?void 0:o.onPassthroughResponse)||u.call(o,e));!function(e,t){U.add({...e,url:e.url.toString()},t),U.persist()}(e,f),n.emit("request:match",{request:e,requestId:t});const g=p.data,m=(null==(c=null==o?void 0:o.transformResponse)?void 0:c.call(o,f))||f;return null==(h=null==o?void 0:o.onMockedResponse)||h.call(o,m,g),n.emit("request:end",{request:e,requestId:t}),m}function N(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}function $(e,t){return Object.entries(t).reduce(((e,[t,r])=>{const s=e[t];return Array.isArray(s)&&Array.isArray(r)?(e[t]=s.concat(r),e):N(s)&&N(r)?(e[t]=$(s,r),e):(e[t]=r,e)}),Object.assign({},e))}class _{constructor(){o(this,"subscriptions",[])}async dispose(){await Promise.all(this.subscriptions.map((e=>e())))}}class G{constructor(e){o(this,"handlers"),this.initialHandlers=e,this.handlers=[...e]}prepend(e){this.handlers.unshift(...e)}reset(e){this.handlers=e.length>0?[...e]:[...this.initialHandlers]}currentHandlers(){return this.handlers}}class B extends _{constructor(...e){super(),o(this,"handlersController"),o(this,"emitter"),o(this,"publicEmitter"),o(this,"events"),h(this.validateHandlers(e),w.formatMessage("Failed to apply given request handlers: invalid input. Did you forget to spread the request handlers Array?")),this.handlersController=new G(e),this.emitter=new p,this.publicEmitter=new p,function(e,t){const r=e.emit;if(r._isPiped)return;const s=function(e,...s){return t.emit(e,...s),r.call(this,e,...s)};s._isPiped=!0,e.emit=s}(this.emitter,this.publicEmitter),this.events=this.createLifeCycleEvents(),this.subscriptions.push((()=>{this.emitter.removeAllListeners(),this.publicEmitter.removeAllListeners()}))}validateHandlers(e){return e.every((e=>!Array.isArray(e)))}use(...e){h(this.validateHandlers(e),w.formatMessage('Failed to call "use()" with the given request handlers: invalid input. Did you forget to spread the array of request handlers?')),this.handlersController.prepend(e)}restoreHandlers(){this.handlersController.currentHandlers().forEach((e=>{e.isUsed=!1}))}resetHandlers(...e){this.handlersController.reset(e)}listHandlers(){return function(e){const t=[...e];return Object.freeze(t),t}(this.handlersController.currentHandlers())}createLifeCycleEvents(){return{on:(...e)=>this.publicEmitter.on(...e),removeListener:(...e)=>this.publicEmitter.removeListener(...e),removeAllListeners:(...e)=>this.publicEmitter.removeAllListeners(...e)}}}var F={},X=/(%?)(%([sdijo]))/g;function V(e,...t){if(0===t.length)return e;let r=0,s=e.replace(X,((e,s,n,o)=>{const i=function(e,t){switch(t){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":{if("string"==typeof e)return e;const t=JSON.stringify(e);return"{}"===t||"[]"===t||/^\[object .+?\]$/.test(t)?e:t}}}(t[r],o);return s?e:(r++,i)}));return r<t.length&&(s+=` ${t.slice(r).join(" ")}`),s=s.replace(/%{2,2}/g,"%"),s}var K=class extends Error{constructor(e,...t){super(e),this.message=e,this.name="Invariant Violation",this.message=V(e,...t),function(e){if(!e.stack)return;const t=e.stack.split("\n");t.splice(1,2),e.stack=t.join("\n")}(this)}},z=(e,t,...r)=>{if(!e)throw new K(t,...r)};function J(){if("undefined"!=typeof navigator&&"ReactNative"===navigator.product)return!0;if("undefined"!=typeof process){const e=process.type;return"renderer"!==e&&"worker"!==e&&!(!process.versions||!process.versions.node)}return!1}z.as=(e,t,r,...s)=>{if(!t){const t=0===s.length?r:V(r,s);let o;try{o=Reflect.construct(e,[t])}catch(n){o=e(t)}throw o}};var Q=async e=>{try{return{error:null,data:await e().catch((e=>{throw e}))}}catch(t){return{error:t,data:null}}};function Y(e,t,r){return[e.active,e.installing,e.waiting].filter((e=>null!=e)).find((e=>r(e.scriptURL,t)))||null}var Z=async(e,t={},r)=>{const s=new URL(e,location.href).href;const n=await navigator.serviceWorker.getRegistrations().then((e=>e.filter((e=>Y(e,s,r)))));!navigator.serviceWorker.controller&&n.length>0&&location.reload();const[o]=n;if(o)return o.update().then((()=>[Y(o,s,r),o]));const i=await Q((async()=>{const n=await navigator.serviceWorker.register(e,t);return[Y(n,s,r),n]}));if(i.error){if(i.error.message.includes("(404)")){const e=new URL((null==t?void 0:t.scope)||"/",location.href);throw new Error(w.formatMessage(`Failed to register a Service Worker for scope ('${e.href}') with script ('${s}'): Service Worker script does not exist at the given path.\n\nDid you forget to run "npx msw init <PUBLIC_DIR>"?\n\nLearn more about creating the Service Worker script: https://mswjs.io/docs/cli/init`))}throw new Error(w.formatMessage("Failed to register the Service Worker:\n\n%s",i.error.message))}return i.data};function ee(e={}){if(e.quiet)return;e.message;e.workerUrl,e.workerScope}var te=class{constructor(e){this.port=e}postMessage(e,...t){const[r,s]=t;this.port.postMessage({type:e,data:r},{transfer:s})}};function re(e){if(!["HEAD","GET"].includes(e.method))return e.body}var se=(e,t)=>async(r,s)=>{const n=new te(r.ports[0]),o=s.payload.id,i=(a=s.payload,new Request(a.url,{...a,body:re(a)}));var a;const l=i.clone(),u=i.clone();k.cache.set(i,u),e.requests.set(o,u);try{await D(i,o,e.getRequestHandlers(),t,e.emitter,{onPassthroughResponse(){n.postMessage("PASSTHROUGH")},async onMockedResponse(r,{handler:s,parsedResult:o}){const i=r.clone(),a=r.clone(),u=function(e){return{status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.headers.entries())}}(r);if(e.supports.readableStreamTransfer){const e=r.body;n.postMessage("MOCK_RESPONSE",{...u,body:e},e?[e]:void 0)}else{const e=null===r.body?null:await i.arrayBuffer();n.postMessage("MOCK_RESPONSE",{...u,body:e})}t.quiet||e.emitter.once("response:mocked",(()=>{s.log({request:l,response:a,parsedResult:o})}))}})}catch(c){c instanceof Error&&(w.error('Uncaught exception in the request handler for "%s %s":\n\n%s\n\nThis exception has been gracefully handled as a 500 response, however, it\'s strongly recommended to resolve this error, as it indicates a mistake in your code. If you wish to mock an error response, please see this guide: https://mswjs.io/docs/recipes/mocking-error-responses',i.method,i.url,c.stack??c),n.postMessage("MOCK_RESPONSE",{status:500,statusText:"Request Handler Error",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c.name,message:c.message,stack:c.stack})}))}};var ne=new TextEncoder;var oe=new Set([101,103,204,205,304]);function ie(e){return oe.has(e)}var ae=Symbol("isPatchedModule"),le=Object.defineProperty,ue={};function ce(e){return`[33m${e}[0m`}function he(e){return`[34m${e}[0m`}function de(e){return`[90m${e}[0m`}function pe(e){return`[31m${e}[0m`}function fe(e){return`[32m${e}[0m`}((e,t)=>{for(var r in t)le(e,r,{get:t[r],enumerable:!0})})(ue,{blue:()=>he,gray:()=>de,green:()=>fe,red:()=>pe,yellow:()=>ce});var ge=J(),me=class{constructor(e){o(this,"prefix"),this.name=e,this.prefix=`[${this.name}]`;const t=Re("DEBUG"),r=Re("LOG_LEVEL");"1"===t||"true"===t||void 0!==t&&this.name.startsWith(t)?(this.debug=ke(r,"debug")?ye:this.debug,this.info=ke(r,"info")?ye:this.info,this.success=ke(r,"success")?ye:this.success,this.warning=ke(r,"warning")?ye:this.warning,this.error=ke(r,"error")?ye:this.error):(this.info=ye,this.success=ye,this.warning=ye,this.error=ye,this.only=ye)}extend(e){return new me(`${this.name}:${e}`)}debug(e,...t){this.logEntry({level:"debug",message:de(e),positionals:t,prefix:this.prefix,colors:{prefix:"gray"}})}info(e,...t){this.logEntry({level:"info",message:e,positionals:t,prefix:this.prefix,colors:{prefix:"blue"}});const r=new ve;return(e,...t)=>{r.measure(),this.logEntry({level:"info",message:`${e} ${de(`${r.deltaTime}ms`)}`,positionals:t,prefix:this.prefix,colors:{prefix:"blue"}})}}success(e,...t){this.logEntry({level:"info",message:e,positionals:t,prefix:`âœ” ${this.prefix}`,colors:{timestamp:"green",prefix:"green"}})}warning(e,...t){this.logEntry({level:"warning",message:e,positionals:t,prefix:`âš  ${this.prefix}`,colors:{timestamp:"yellow",prefix:"yellow"}})}error(e,...t){this.logEntry({level:"error",message:e,positionals:t,prefix:`âœ– ${this.prefix}`,colors:{timestamp:"red",prefix:"red"}})}only(e){e()}createEntry(e,t){return{timestamp:new Date,level:e,message:t}}logEntry(e){const{level:t,message:r,prefix:s,colors:n,positionals:o=[]}=e,i=this.createEntry(t,r),a=(null==n?void 0:n.timestamp)||"gray",l=(null==n?void 0:n.prefix)||"gray",u={timestamp:ue[a],prefix:ue[l]};this.getWriter(t)([u.timestamp(this.formatTimestamp(i.timestamp))].concat(null!=s?u.prefix(s):[]).concat(Ee(r)).join(" "),...o.map(Ee))}formatTimestamp(e){return`${e.toLocaleTimeString("en-GB")}:${e.getMilliseconds()}`}getWriter(e){switch(e){case"debug":case"success":case"info":return we;case"warning":return be;case"error":return qe}}},ve=class{constructor(){o(this,"startTime"),o(this,"endTime"),o(this,"deltaTime"),this.startTime=performance.now()}measure(){this.endTime=performance.now();const e=this.endTime-this.startTime;this.deltaTime=e.toFixed(2)}},ye=()=>{};function we(e,...t){ge&&process.stdout.write(V(e,...t)+"\n")}function be(e,...t){ge&&process.stderr.write(V(e,...t)+"\n")}function qe(e,...t){ge&&process.stderr.write(V(e,...t)+"\n")}function Re(e){var t;return ge?F[e]:null==(t=globalThis[e])?void 0:t.toString()}function ke(e,t){return void 0!==e&&e!==t}function Ee(e){return void 0===e?"undefined":null===e?"null":"string"==typeof e?e:"object"==typeof e?JSON.stringify(e):e.toString()}var xe=class extends Error{constructor(e,t,r){super(`Possible EventEmitter memory leak detected. ${r} ${t.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),this.emitter=e,this.type=t,this.count=r,this.name="MaxListenersExceededWarning"}},Le=class{static listenerCount(e,t){return e.listenerCount(t)}constructor(){this.events=new Map,this.maxListeners=Le.defaultMaxListeners,this.hasWarnedAboutPotentialMemoryLeak=!1}_emitInternalEvent(e,t,r){this.emit(e,t,r)}_getListeners(e){return Array.prototype.concat.apply([],this.events.get(e))||[]}_removeListener(e,t){const r=e.indexOf(t);return r>-1&&e.splice(r,1),[]}_wrapOnceListener(e,t){const r=(...s)=>(this.removeListener(e,r),t.apply(this,s));return Object.defineProperty(r,"name",{value:t.name}),r}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}eventNames(){return Array.from(this.events.keys())}emit(e,...t){const r=this._getListeners(e);return r.forEach((e=>{e.apply(this,t)})),r.length>0}addListener(e,t){this._emitInternalEvent("newListener",e,t);const r=this._getListeners(e).concat(t);if(this.events.set(e,r),this.maxListeners>0&&this.listenerCount(e)>this.maxListeners&&!this.hasWarnedAboutPotentialMemoryLeak){this.hasWarnedAboutPotentialMemoryLeak=!0;new xe(this,e,this.listenerCount(e))}return this}on(e,t){return this.addListener(e,t)}once(e,t){return this.addListener(e,this._wrapOnceListener(e,t))}prependListener(e,t){const r=this._getListeners(e);if(r.length>0){const s=[t].concat(r);this.events.set(e,s)}else this.events.set(e,r.concat(t));return this}prependOnceListener(e,t){return this.prependListener(e,this._wrapOnceListener(e,t))}removeListener(e,t){const r=this._getListeners(e);return r.length>0&&(this._removeListener(r,t),this.events.set(e,r),this._emitInternalEvent("removeListener",e,t)),this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return e?this.events.delete(e):this.events.clear(),this}listeners(e){return Array.from(this._getListeners(e))}listenerCount(e){return this._getListeners(e).length}rawListeners(e){return this.listeners(e)}},Te=Le;Te.defaultMaxListeners=10;function Se(e){return globalThis[e]||void 0}var Pe=class{constructor(e){this.symbol=e,this.readyState="INACTIVE",this.emitter=new Te,this.subscriptions=[],this.logger=new me(e.description),this.emitter.setMaxListeners(0),this.logger.info("constructing the interceptor...")}checkEnvironment(){return!0}apply(){const e=this.logger.extend("apply");if(e.info("applying the interceptor..."),"APPLIED"===this.readyState)return void e.info("intercepted already applied!");if(!this.checkEnvironment())return void e.info("the interceptor cannot be applied in this environment!");this.readyState="APPLYING";const t=this.getInstance();if(t)return e.info("found a running instance, reusing..."),this.on=(r,s)=>(e.info('proxying the "%s" listener',r),t.emitter.addListener(r,s),this.subscriptions.push((()=>{t.emitter.removeListener(r,s),e.info('removed proxied "%s" listener!',r)})),this),void(this.readyState="APPLIED");e.info("no running instance found, setting up a new instance..."),this.setup(),this.setInstance(),this.readyState="APPLIED"}setup(){}on(e,t){const r=this.logger.extend("on");return"DISPOSING"===this.readyState||"DISPOSED"===this.readyState?(r.info("cannot listen to events, already disposed!"),this):(r.info('adding "%s" event listener:',e,t),this.emitter.on(e,t),this)}once(e,t){return this.emitter.once(e,t),this}off(e,t){return this.emitter.off(e,t),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}dispose(){const e=this.logger.extend("dispose");if("DISPOSED"!==this.readyState)if(e.info("disposing the interceptor..."),this.readyState="DISPOSING",this.getInstance()){if(this.clearInstance(),e.info("global symbol deleted:",Se(this.symbol)),this.subscriptions.length>0){e.info("disposing of %d subscriptions...",this.subscriptions.length);for(const e of this.subscriptions)e();this.subscriptions=[],e.info("disposed of all subscriptions!",this.subscriptions.length)}this.emitter.removeAllListeners(),e.info("destroyed the listener!"),this.readyState="DISPOSED"}else e.info("no interceptors running, skipping dispose...");else e.info("cannot dispose, already disposed!")}getInstance(){var e;const t=Se(this.symbol);return this.logger.info("retrieved global instance:",null==(e=null==t?void 0:t.constructor)?void 0:e.name),t}setInstance(){var e,t;e=this.symbol,t=this,globalThis[e]=t,this.logger.info("set global instance!",this.symbol.description)}clearInstance(){var e;e=this.symbol,delete globalThis[e],this.logger.info("cleared global instance!",this.symbol.description)}};function Ie(){return Math.random().toString(16).slice(2)}var Ce=class extends Pe{constructor(e){Ce.symbol=Symbol(e.name),super(Ce.symbol),this.interceptors=e.interceptors}setup(){const e=this.logger.extend("setup");e.info("applying all %d interceptors...",this.interceptors.length);for(const t of this.interceptors)e.info('applying "%s" interceptor...',t.constructor.name),t.apply(),e.info("adding interceptor dispose subscription"),this.subscriptions.push((()=>t.dispose()))}on(e,t){for(const r of this.interceptors)r.on(e,t);return this}once(e,t){for(const r of this.interceptors)r.once(e,t);return this}off(e,t){for(const r of this.interceptors)r.off(e,t);return this}removeAllListeners(e){for(const t of this.interceptors)t.removeAllListeners(e);return this}};var Oe=e=>function(t,r){const s=(async()=>{e.events.removeAllListeners(),e.workerChannel.on("REQUEST",se(e,t)),e.workerChannel.on("RESPONSE",function(e){return(t,r)=>{var s;const{payload:n}=r,{requestId:o}=n,i=e.requests.get(o);if(e.requests.delete(o),null==(s=n.type)?void 0:s.includes("opaque"))return;const a=0===n.status?Response.error():new Response(ie(n.status)?null:n.body,n);a.url||Object.defineProperty(a,"url",{value:i.url,enumerable:!0,writable:!1}),e.emitter.emit(n.isMockedResponse?"response:mocked":"response:bypass",{response:a,request:i,requestId:n.requestId})}}(e));const s=await Z(t.serviceWorker.url,t.serviceWorker.options,t.findWorker),[n,o]=s;if(!n){const e=(null==r?void 0:r.findWorker)?w.formatMessage('Failed to locate the Service Worker registration using a custom "findWorker" predicate.\n\nPlease ensure that the custom predicate properly locates the Service Worker registration at "%s".\nMore details: https://mswjs.io/docs/api/setup-worker/start#findworker\n',t.serviceWorker.url):w.formatMessage('Failed to locate the Service Worker registration.\n\nThis most likely means that the worker script URL "%s" cannot resolve against the actual public hostname (%s). This may happen if your application runs behind a proxy, or has a dynamic hostname.\n\nPlease consider using a custom "serviceWorker.url" option to point to the actual worker script location, or a custom "findWorker" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start',t.serviceWorker.url,location.host);throw new Error(e)}return e.worker=n,e.registration=o,e.events.addListener(window,"beforeunload",(()=>{"redundant"!==n.state&&e.workerChannel.send("CLIENT_CLOSED"),window.clearInterval(e.keepAliveInterval)})),await async function(e){e.workerChannel.send("INTEGRITY_CHECK_REQUEST");const{payload:t}=await e.events.once("INTEGRITY_CHECK_RESPONSE");"26357c79639bfa20d64c0efca2a87423"!==t.checksum&&w.warn(`The currently registered Service Worker has been generated by a different version of MSW (${t.packageVersion}) and may not be fully compatible with the installed version.\n\nIt's recommended you update your worker script by running this command:\n\n  â€¢ npx msw init <PUBLIC_DIR>\n\nYou can also automate this process and make the worker script update automatically upon the library installations. Read more: https://mswjs.io/docs/cli/init.`)}(e).catch((e=>{w.error("Error while checking the worker script integrity. Please report this on GitHub (https://github.com/mswjs/msw/issues), including the original error below.")})),e.keepAliveInterval=window.setInterval((()=>e.workerChannel.send("KEEPALIVE_REQUEST")),5e3),function(e,t){(null==t?void 0:t.quiet)||location.href.startsWith(e.scope)||w.warn(`Cannot intercept requests on this page because it's outside of the worker's scope ("${e.scope}"). If you wish to mock API requests on this page, you must resolve this scope issue.\n\n- (Recommended) Register the worker at the root level ("/") of your application.\n- Set the "Service-Worker-Allowed" response header to allow out-of-scope workers.`)}(o,e.startOptions),o})().then((async r=>{const s=r.installing||r.waiting;return s&&await new Promise((e=>{s.addEventListener("statechange",(()=>{if("activated"===s.state)return e()}))})),await async function(e,t){var r,s;e.workerChannel.send("MOCK_ACTIVATE"),await e.events.once("MOCKING_ENABLED"),e.isMockingEnabled?w.warn('Found a redundant "worker.start()" call. Note that starting the worker while mocking is already enabled will have no effect. Consider removing this "worker.start()" call.'):(e.isMockingEnabled=!0,ee({quiet:t.quiet,workerScope:null==(r=e.registration)?void 0:r.scope,workerUrl:null==(s=e.worker)?void 0:s.scriptURL}))}(e,t).catch((e=>{throw new Error(`Failed to enable mocking: ${null==e?void 0:e.message}`)})),r}));return s};function Ae(e={}){e.quiet}var Me={serviceWorker:{url:"/mockServiceWorker.js",options:null},quiet:!1,waitUntilReady:!0,onUnhandledRequest:"warn",findWorker:(e,t)=>e===t};var je=(s=class extends Promise{constructor(r=null){const s=function(){const e=(t,r)=>{e.state="pending",e.resolve=r=>{if("pending"===e.state)return e.result=r,t(r instanceof Promise?r:Promise.resolve(r).then((t=>(e.state="fulfilled",t))))},e.reject=t=>{if("pending"===e.state)return queueMicrotask((()=>{e.state="rejected"})),r(e.rejectionReason=t)}};return e}();var n,u,c,h;super(((e,t)=>{s(e,t),null==r||r(s.resolve,s.reject)})),l(this,t),l(this,e,void 0),o(this,"resolve"),o(this,"reject"),c=s,i(n=this,u=e,"write to private field"),h?h.call(n,c):u.set(n,c),this.resolve=a(this,e).resolve,this.reject=a(this,e).reject}get state(){return a(this,e).state}get rejectionReason(){return a(this,e).rejectionReason}then(e,s){return u(this,t,r).call(this,super.then(e,s))}catch(e){return u(this,t,r).call(this,super.catch(e))}finally(e){return u(this,t,r).call(this,super.finally(e))}},e=new WeakMap,t=new WeakSet,r=function(e){return Object.defineProperties(e,{resolve:{configurable:!0,value:this.resolve},reject:{configurable:!0,value:this.reject}})},s),He=class{constructor(e){this.request=e,this.responsePromise=new je}respondWith(e){z("pending"===this.responsePromise.state,'Failed to respond to "%s %s" request: the "request" event has already been responded to.',this.request.method,this.request.url),this.responsePromise.resolve(e)}};function We(e){const t=new He(e);return Reflect.set(e,"respondWith",t.respondWith.bind(t)),{interactiveRequest:e,requestController:t}}async function Ue(e,t,...r){const s=e.listeners(t);if(0!==s.length)for(const n of s)await n.apply(e,r)}var De=class extends Pe{constructor(){super(De.symbol)}checkEnvironment(){return"undefined"!=typeof globalThis&&void 0!==globalThis.fetch}async setup(){const e=globalThis.fetch;z(!e[ae],'Failed to patch the "fetch" module: already patched.'),globalThis.fetch=async(t,r)=>{var s;const n=Ie(),o="string"!=typeof t||"undefined"==typeof location||function(e){try{return new URL(e),!0}catch(t){return!1}}(t)?t:new URL(t,location.origin),i=new Request(o,r);this.logger.info("[%s] %s",i.method,i.url);const{interactiveRequest:a,requestController:l}=We(i);this.logger.info('emitting the "request" event for %d listener(s)...',this.emitter.listenerCount("request")),this.emitter.once("request",(({requestId:e})=>{e===n&&"pending"===l.responsePromise.state&&l.responsePromise.resolve(void 0)})),this.logger.info("awaiting for the mocked response...");const u=a.signal,c=new je;u&&u.addEventListener("abort",(()=>{c.reject(u.reason)}),{once:!0});const h=await Q((async()=>{const e=Ue(this.emitter,"request",{request:a,requestId:n});await Promise.race([c,e,l.responsePromise]),this.logger.info("all request listeners have been resolved!");const t=await l.responsePromise;return this.logger.info("event.respondWith called with:",t),t}));if("rejected"===c.state)return Promise.reject(c.rejectionReason);if(h.error)return Promise.reject($e(h.error));const d=h.data;if(d&&!(null==(s=i.signal)?void 0:s.aborted)){if(this.logger.info("received mocked response:",d),function(e,t){try{return e[t],!0}catch(r){return!1}}(d,"type")&&"error"===d.type)return this.logger.info("received a network error response, rejecting the request promise..."),Promise.reject($e(d));const e=d.clone();return this.emitter.emit("response",{response:e,isMockedResponse:!0,request:a,requestId:n}),Object.defineProperty(d,"url",{writable:!1,enumerable:!0,configurable:!1,value:i.url}),d}return this.logger.info("no mocked response received!"),e(i).then((e=>{const t=e.clone();return this.logger.info("original fetch performed",t),this.emitter.emit("response",{response:t,isMockedResponse:!1,request:a,requestId:n}),e}))},Object.defineProperty(globalThis.fetch,ae,{enumerable:!0,configurable:!0,value:!0}),this.subscriptions.push((()=>{Object.defineProperty(globalThis.fetch,ae,{value:void 0}),globalThis.fetch=e,this.logger.info('restored native "globalThis.fetch"!',globalThis.fetch.name)}))}},Ne=De;function $e(e){return Object.assign(new TypeError("Failed to fetch"),{cause:e})}Ne.symbol=Symbol("fetch");var _e=class{constructor(e,t){this.AT_TARGET=0,this.BUBBLING_PHASE=0,this.CAPTURING_PHASE=0,this.NONE=0,this.type="",this.srcElement=null,this.currentTarget=null,this.eventPhase=0,this.isTrusted=!0,this.composed=!1,this.cancelable=!0,this.defaultPrevented=!1,this.bubbles=!0,this.lengthComputable=!0,this.loaded=0,this.total=0,this.cancelBubble=!1,this.returnValue=!0,this.type=e,this.target=(null==t?void 0:t.target)||null,this.currentTarget=(null==t?void 0:t.currentTarget)||null,this.timeStamp=Date.now()}composedPath(){return[]}initEvent(e,t,r){this.type=e,this.bubbles=!!t,this.cancelable=!!r}preventDefault(){this.defaultPrevented=!0}stopPropagation(){}stopImmediatePropagation(){}},Ge=class extends _e{constructor(e,t){super(e),this.lengthComputable=(null==t?void 0:t.lengthComputable)||!1,this.composed=(null==t?void 0:t.composed)||!1,this.loaded=(null==t?void 0:t.loaded)||0,this.total=(null==t?void 0:t.total)||0}},Be="undefined"!=typeof ProgressEvent;function Fe(e,t){if(!(t in e))return null;if(Object.prototype.hasOwnProperty.call(e,t))return e;const r=Reflect.getPrototypeOf(e);return r?Fe(r,t):null}function Xe(e,t){const r=new Proxy(e,function(e){const{constructorCall:t,methodCall:r,getProperty:s,setProperty:n}=e,o={};void 0!==t&&(o.construct=function(e,r,s){const n=Reflect.construct.bind(null,e,r,s);return t.call(s,r,n)});return o.set=function(e,t,r){const s=()=>{const s=Fe(e,t)||e,n=Reflect.getOwnPropertyDescriptor(s,t);return void 0!==(null==n?void 0:n.set)?(n.set.apply(e,[r]),!0):Reflect.defineProperty(s,t,{writable:!0,enumerable:!0,configurable:!0,value:r})};return void 0!==n?n.call(e,[t,r],s):s()},o.get=function(e,t,n){const o=()=>e[t],i=void 0!==s?s.call(e,[t,n],o):o();return"function"==typeof i?(...s)=>{const n=i.bind(e,...s);return void 0!==r?r.call(e,[t,s],n):n()}:i},o}(t));return r}function Ve(e){const t=new Headers,r=e.split(/[\r\n]+/);for(const s of r){if(""===s.trim())continue;const[e,...r]=s.split(": "),n=r.join(": ");t.append(e,n)}return t}var Ke=Symbol("isMockedResponse"),ze=J(),Je=class{constructor(e,t){this.initialRequest=e,this.logger=t,this.method="GET",this.url=null,this.events=new Map,this.requestId=Ie(),this.requestHeaders=new Headers,this.responseBuffer=new Uint8Array,this.request=Xe(e,{setProperty:([e,t],r)=>{if("ontimeout"===e){const s=e.slice(2);return this.request.addEventListener(s,t),r()}return r()},methodCall:([e,t],r)=>{var s,n;switch(e){case"open":{const[e,s]=t;return void 0===s?(this.method="GET",this.url=Qe(e)):(this.method=e,this.url=Qe(s)),this.logger=this.logger.extend(`${this.method} ${this.url.href}`),this.logger.info("open",this.method,this.url.href),r()}case"addEventListener":{const[e,s]=t;return this.registerEvent(e,s),this.logger.info("addEventListener",e,s),r()}case"setRequestHeader":{const[e,s]=t;return this.requestHeaders.set(e,s),this.logger.info("setRequestHeader",e,s),r()}case"send":{const[e]=t;null!=e&&(this.requestBody="string"==typeof e?(n=e,ne.encode(n)):e),this.request.addEventListener("load",(()=>{if(void 0!==this.onResponse){const e=function(e,t){const r=ie(e.status)?null:t;return new Response(r,{status:e.status,statusText:e.statusText,headers:Ve(e.getAllResponseHeaders())})}(this.request,this.request.response);this.onResponse.call(this,{response:e,isMockedResponse:Ke in this.request,request:o,requestId:this.requestId})}}));const o=this.toFetchApiRequest();((null==(s=this.onRequest)?void 0:s.call(this,{request:o,requestId:this.requestId}))||Promise.resolve()).finally((()=>{if(this.request.readyState<this.request.LOADING)return this.logger.info("request callback settled but request has not been handled (readystate %d), performing as-is...",this.request.readyState),ze&&this.request.setRequestHeader("x-interceptors-internal-request-id",this.requestId),r()}));break}default:return r()}}})}registerEvent(e,t){const r=(this.events.get(e)||[]).concat(t);this.events.set(e,r),this.logger.info('registered event "%s"',e,t)}respondWith(e){this.logger.info("responding with a mocked response: %d %s",e.status,e.statusText),Ye(this.request,Ke,!0),Ye(this.request,"status",e.status),Ye(this.request,"statusText",e.statusText),Ye(this.request,"responseURL",this.url.href),this.request.getResponseHeader=new Proxy(this.request.getResponseHeader,{apply:(t,r,s)=>{if(this.logger.info("getResponseHeader",s[0]),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning null"),null;const n=e.headers.get(s[0]);return this.logger.info('resolved response header "%s" to',s[0],n),n}}),this.request.getAllResponseHeaders=new Proxy(this.request.getAllResponseHeaders,{apply:()=>{if(this.logger.info("getAllResponseHeaders"),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning empty string"),"";const t=Array.from(e.headers.entries()).map((([e,t])=>`${e}: ${t}`)).join("\r\n");return this.logger.info("resolved all response headers to",t),t}}),Object.defineProperties(this.request,{response:{enumerable:!0,configurable:!1,get:()=>this.response},responseText:{enumerable:!0,configurable:!1,get:()=>this.responseText},responseXML:{enumerable:!0,configurable:!1,get:()=>this.responseXML}});const t=e.headers.has("Content-Length")?Number(e.headers.get("Content-Length")):void 0;this.logger.info("calculated response body length",t),this.trigger("loadstart",{loaded:0,total:t}),this.setReadyState(this.request.HEADERS_RECEIVED),this.setReadyState(this.request.LOADING);const r=()=>{this.logger.info("finalizing the mocked response..."),this.setReadyState(this.request.DONE),this.trigger("load",{loaded:this.responseBuffer.byteLength,total:t}),this.trigger("loadend",{loaded:this.responseBuffer.byteLength,total:t})};if(e.body){this.logger.info("mocked response has body, streaming...");const s=e.body.getReader(),n=async()=>{const{value:e,done:o}=await s.read();if(o)return this.logger.info("response body stream done!"),void r();e&&(this.logger.info("read response body chunk:",e),this.responseBuffer=function(e,t){const r=new Uint8Array(e.byteLength+t.byteLength);return r.set(e,0),r.set(t,e.byteLength),r}(this.responseBuffer,e),this.trigger("progress",{loaded:this.responseBuffer.byteLength,total:t})),n()};n()}else r()}responseBufferToText(){return e=this.responseBuffer,new TextDecoder(t).decode(e);var e,t}get response(){if(this.logger.info("getResponse (responseType: %s)",this.request.responseType),this.request.readyState!==this.request.DONE)return null;switch(this.request.responseType){case"json":{const e=function(e){try{return JSON.parse(e)}catch(t){return null}}(this.responseBufferToText());return this.logger.info("resolved response JSON",e),e}case"arraybuffer":{const t=(e=this.responseBuffer).buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return this.logger.info("resolved response ArrayBuffer",t),t}case"blob":{const e=this.request.getResponseHeader("Content-Type")||"text/plain",t=new Blob([this.responseBufferToText()],{type:e});return this.logger.info("resolved response Blob (mime type: %s)",t,e),t}default:{const e=this.responseBufferToText();return this.logger.info('resolving "%s" response type as text',this.request.responseType,e),e}}var e}get responseText(){if(z(""===this.request.responseType||"text"===this.request.responseType,"InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.LOADING&&this.request.readyState!==this.request.DONE)return"";const e=this.responseBufferToText();return this.logger.info('getResponseText: "%s"',e),e}get responseXML(){if(z(""===this.request.responseType||"document"===this.request.responseType,"InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.DONE)return null;const e=this.request.getResponseHeader("Content-Type")||"";return"undefined"==typeof DOMParser?null:(t=e,["application/xhtml+xml","application/xml","image/svg+xml","text/html","text/xml"].some((e=>t.startsWith(e)))?(new DOMParser).parseFromString(this.responseBufferToText(),e):null);var t}errorWith(e){this.logger.info("responding with an error"),this.setReadyState(this.request.DONE),this.trigger("error"),this.trigger("loadend")}setReadyState(e){this.logger.info("setReadyState: %d -> %d",this.request.readyState,e),this.request.readyState!==e?(Ye(this.request,"readyState",e),this.logger.info("set readyState to: %d",e),e!==this.request.UNSENT&&(this.logger.info('triggerring "readystatechange" event...'),this.trigger("readystatechange"))):this.logger.info("ready state identical, skipping transition...")}trigger(e,t){const r=this.request[`on${e}`],s=function(e,t,r){const s=Be?ProgressEvent:Ge;return["error","progress","loadstart","loadend","load","timeout","abort"].includes(t)?new s(t,{lengthComputable:!0,loaded:(null==r?void 0:r.loaded)||0,total:(null==r?void 0:r.total)||0}):new _e(t,{target:e,currentTarget:e})}(this.request,e,t);this.logger.info('trigger "%s"',e,t||""),"function"==typeof r&&(this.logger.info('found a direct "%s" callback, calling...',e),r.call(this.request,s));for(const[n,o]of this.events)n===e&&(this.logger.info('found %d listener(s) for "%s" event, calling...',o.length,e),o.forEach((e=>e.call(this.request,s))))}toFetchApiRequest(){this.logger.info("converting request to a Fetch API Request...");const e=new Request(this.url.href,{method:this.method,headers:this.requestHeaders,credentials:this.request.withCredentials?"include":"same-origin",body:["GET","HEAD"].includes(this.method)?null:this.requestBody});return Ye(e,"headers",Xe(e.headers,{methodCall:([e,t],r)=>{switch(e){case"append":case"set":{const[e,r]=t;this.request.setRequestHeader(e,r);break}case"delete":{const[e]=t;break}}return r()}})),this.logger.info("converted request to a Fetch API Request!",e),e}};function Qe(e){return"undefined"==typeof location?new URL(e):new URL(e.toString(),location.href)}function Ye(e,t,r){Reflect.defineProperty(e,t,{writable:!0,enumerable:!0,value:r})}var Ze=class extends Pe{constructor(){super(Ze.interceptorSymbol)}checkEnvironment(){return void 0!==globalThis.XMLHttpRequest}setup(){const e=this.logger.extend("setup");e.info('patching "XMLHttpRequest" module...');const t=globalThis.XMLHttpRequest;z(!t[ae],'Failed to patch the "XMLHttpRequest" module: already patched.'),globalThis.XMLHttpRequest=function({emitter:e,logger:t}){return new Proxy(globalThis.XMLHttpRequest,{construct(r,s,n){t.info("constructed new XMLHttpRequest");const o=Reflect.construct(r,s,n),i=Object.getOwnPropertyDescriptors(r.prototype);for(const e in i)Reflect.defineProperty(o,e,i[e]);const a=new Je(o,t);return a.onRequest=async function({request:t,requestId:r}){const{interactiveRequest:s,requestController:n}=We(t);this.logger.info("awaiting mocked response..."),e.once("request",(({requestId:e})=>{e===r&&"pending"===n.responsePromise.state&&n.respondWith(void 0)}));const o=await Q((async()=>{this.logger.info('emitting the "request" event for %s listener(s)...',e.listenerCount("request")),await Ue(e,"request",{request:s,requestId:r}),this.logger.info('all "request" listeners settled!');const t=await n.responsePromise;return this.logger.info("event.respondWith called with:",t),t}));if(o.error)return this.logger.info("request listener threw an exception, aborting request...",o.error),void a.errorWith(o.error);const i=o.data;if(void 0!==i)return this.logger.info("received mocked response: %d %s",i.status,i.statusText),"error"===i.type?(this.logger.info("received a network error response, rejecting the request promise..."),void a.errorWith(new TypeError("Network error"))):a.respondWith(i);this.logger.info("no mocked response received, performing request as-is...")},a.onResponse=async function({response:t,isMockedResponse:r,request:s,requestId:n}){this.logger.info('emitting the "response" event for %s listener(s)...',e.listenerCount("response")),e.emit("response",{response:t,isMockedResponse:r,request:s,requestId:n})},a.request}})}({emitter:this.emitter,logger:this.logger}),e.info('native "XMLHttpRequest" module patched!',globalThis.XMLHttpRequest.name),Object.defineProperty(globalThis.XMLHttpRequest,ae,{enumerable:!0,configurable:!0,value:!0}),this.subscriptions.push((()=>{Object.defineProperty(globalThis.XMLHttpRequest,ae,{value:void 0}),globalThis.XMLHttpRequest=t,e.info('native "XMLHttpRequest" module restored!',globalThis.XMLHttpRequest.name)}))}},et=Ze;function tt(e){return async function(t){e.fallbackInterceptor=function(e,t){const r=new Ce({name:"fallback",interceptors:[new Ne,new et]});return r.on("request",(async({request:r,requestId:s})=>{const n=r.clone(),o=await D(r,s,e.getRequestHandlers(),t,e.emitter,{onMockedResponse(r,{handler:s,parsedResult:o}){t.quiet||e.emitter.once("response:mocked",(({response:e})=>{s.log({request:n,response:e,parsedResult:o})}))}});o&&r.respondWith(o)})),r.on("response",(({response:t,isMockedResponse:r,request:s,requestId:n})=>{e.emitter.emit(r?"response:mocked":"response:bypass",{response:t,request:s,requestId:n})})),r.apply(),r}(e,t),ee({message:"Mocking enabled (fallback mode).",quiet:t.quiet})}}function rt(){try{const e=new ReadableStream({start:e=>e.close()});return(new MessageChannel).port1.postMessage(e,[e]),!0}catch(e){return!1}}et.interceptorSymbol=Symbol("xhr");var st=class extends B{constructor(...e){super(...e),o(this,"context"),o(this,"startHandler",null),o(this,"stopHandler",null),o(this,"listeners"),z(!J(),w.formatMessage("Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead.")),this.listeners=[],this.context=this.createWorkerContext()}createWorkerContext(){const e={isMockingEnabled:!1,startOptions:null,worker:null,getRequestHandlers:()=>this.handlersController.currentHandlers(),registration:null,requests:new Map,emitter:this.emitter,workerChannel:{on:(e,t)=>{this.context.events.addListener(navigator.serviceWorker,"message",(r=>{if(r.source!==this.context.worker)return;const s=r.data;s&&s.type===e&&t(r,s)}))},send:e=>{var t;null==(t=this.context.worker)||t.postMessage(e)}},events:{addListener:(e,t,r)=>(e.addEventListener(t,r),this.listeners.push({eventType:t,target:e,callback:r}),()=>{e.removeEventListener(t,r)}),removeAllListeners:()=>{for(const{target:e,eventType:t,callback:r}of this.listeners)e.removeEventListener(t,r);this.listeners=[]},once:e=>{const t=[];return new Promise(((r,s)=>{t.push(this.context.events.addListener(navigator.serviceWorker,"message",(t=>{try{const s=t.data;s.type===e&&r(s)}catch(n){s(n)}})),this.context.events.addListener(navigator.serviceWorker,"messageerror",s))})).finally((()=>{t.forEach((e=>e()))}))}},supports:{serviceWorkerApi:!("serviceWorker"in navigator)||"file:"===location.protocol,readableStreamTransfer:rt()}};return this.startHandler=e.supports.serviceWorkerApi?tt(e):Oe(e),this.stopHandler=e.supports.serviceWorkerApi?function(e){return function(){var t,r;null==(t=e.fallbackInterceptor)||t.dispose(),Ae({quiet:null==(r=e.startOptions)?void 0:r.quiet})}}(e):(e=>function(){var t;e.isMockingEnabled?(e.workerChannel.send("MOCK_DEACTIVATE"),e.isMockingEnabled=!1,window.clearInterval(e.keepAliveInterval),Ae({quiet:null==(t=e.startOptions)?void 0:t.quiet})):w.warn('Found a redundant "worker.stop()" call. Note that stopping the worker while mocking already stopped has no effect. Consider removing this "worker.stop()" call.')})(e),e}async start(e={}){return!0===e.waitUntilReady&&w.warn('The "waitUntilReady" option has been deprecated. Please remove it from this "worker.start()" call. Follow the recommended Browser integration (https://mswjs.io/docs/integrations/browser) to eliminate any race conditions between the Service Worker registration and any requests made by your application on initial render.'),this.context.startOptions=$(Me,e),await this.startHandler(this.context.startOptions,e)}stop(){super.dispose(),this.context.events.removeAllListeners(),this.context.emitter.removeAllListeners(),this.stopHandler()}};function nt(...e){return new st(...e)}const{message:ot}=f;new TextEncoder;const it=/[\?|#].*$/g;function at(e){return e.replace(it,"")}function lt(e,t){if(e instanceof RegExp)return e;const r=function(e,t){if(/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e))return e;if(e.startsWith("*"))return e;const r=t||"undefined"!=typeof document&&document.baseURI;return r?decodeURI(new URL(encodeURI(e),r).href):e}(e,t);return at(r)}function ut(e,t,r){const s=lt(t,r),n="string"==typeof s?function(e){return e.replace(/([:a-zA-Z_-]*)(\*{1,2})+/g,((e,t,r)=>{const s="(.*)";return t?t.startsWith(":")?`${t}${r}`:`${t}${s}`:s})).replace(/([^\/])(:)(?=\d+)/,"$1\\$2").replace(/^([^\/]+)(:)(?=\/\/)/,"$1\\$2")}(s):s,o=function(e,t=!0){return[t&&e.origin,e.pathname].filter(Boolean).join("")}(e),i=g(n,{decode:decodeURIComponent})(o);return{matches:!1!==i,params:i&&i.params||{}}}function ct(){return m.parse(document.cookie)}function ht(e){var t;const r=e.headers.get("cookie"),s=r?m.parse(r):{};U.hydrate();const n=Array.from(null==(t=U.get(e))?void 0:t.entries()).reduce(((e,[t,{value:r}])=>Object.assign(e,{[t.trim()]:r})),{}),o=function(e){if("undefined"==typeof document||"undefined"==typeof location)return{};switch(e.credentials){case"same-origin":{const t=new URL(e.url);return location.origin===t.origin?ct():{}}case"include":return ct();default:return{}}}(e),i={...o,...n};for(const[a,l]of Object.entries(i))e.headers.append("cookie",m.serialize(a,l));return{...i,...s}}var dt=(e=>(e.HEAD="HEAD",e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.OPTIONS="OPTIONS",e.DELETE="DELETE",e))(dt||{});class pt extends k{constructor(e,t,r,s){super({info:{header:`${e} ${t}`,path:t,method:e},resolver:r,options:s}),this.checkRedundantQueryParameters()}checkRedundantQueryParameters(){const{method:e,path:t}=this.info;if(t instanceof RegExp)return;if(at(t)===t)return;const r=function(e){return new URL(`/${e}`,"http://localhost").searchParams}(t);r.forEach(((e,t)=>{})),w.warn(`Found a redundant usage of query parameters in the request handler URL for "${e} ${t}". Please match against a path instead and access query parameters using "new URL(request.url).searchParams" instead. Learn more: https://mswjs.io/docs/recipes/query-parameters`)}async parse(e){var t;return{match:ut(new URL(e.request.url),this.info.path,null==(t=e.resolutionContext)?void 0:t.baseUrl),cookies:ht(e.request)}}predicate(e){const t=this.matchMethod(e.request.method),r=e.parsedResult.match.matches;return t&&r}matchMethod(e){return this.info.method instanceof RegExp?this.info.method.test(e):(t=this.info.method,r=e,t.toLowerCase()===r.toLowerCase());var t,r}extendResolverArgs(e){var t;return{params:(null==(t=e.parsedResult.match)?void 0:t.params)||{},cookies:e.parsedResult.cookies}}async log(e){x(e.request.url),await async function(e){const t=e.clone(),r=await t.text();return{url:new URL(e.url),method:e.method,headers:Object.fromEntries(e.headers.entries()),body:r}}(e.request);const t=await async function(e){const t=e.clone(),r=await t.text(),s=t.status||200;return{status:s,statusText:t.statusText||ot[s]||"OK",headers:Object.fromEntries(t.headers.entries()),body:r}}(e.response);r=t.status;var r}}function ft(e){return(t,r,s={})=>new pt(e,t,r,s)}const gt={all:ft(/.+/),head:ft(dt.HEAD),get:ft(dt.GET),post:ft(dt.POST),put:ft(dt.PUT),delete:ft(dt.DELETE),patch:ft(dt.PATCH),options:ft(dt.OPTIONS)},{message:mt}=f;function vt(e={}){const t=(null==e?void 0:e.status)||200,r=(null==e?void 0:e.statusText)||mt[t]||"",s=new Headers(null==e?void 0:e.headers);return{...e,headers:s,status:t,statusText:r}}class yt extends Response{constructor(e,t){const r=vt(t);super(e,r),function(e,t){if(t.type&&Object.defineProperty(e,"type",{value:t.type,enumerable:!0,writable:!1}),"undefined"!=typeof document){const e=v.prototype.getSetCookie.call(t.headers);for(const t of e)document.cookie=t}}(this,r)}static text(e,t){const r=vt(t);return r.headers.has("Content-Type")||r.headers.set("Content-Type","text/plain"),r.headers.has("Content-Length")||r.headers.set("Content-Length",e?new Blob([e]).size.toString():"0"),new yt(e,r)}static json(e,t){const r=vt(t);r.headers.has("Content-Type")||r.headers.set("Content-Type","application/json");const s=JSON.stringify(e);return r.headers.has("Content-Length")||r.headers.set("Content-Length",s?new Blob([s]).size.toString():"0"),new yt(s,r)}static xml(e,t){const r=vt(t);return r.headers.has("Content-Type")||r.headers.set("Content-Type","text/xml"),new yt(e,r)}static arrayBuffer(e,t){const r=vt(t);return e&&r.headers.set("Content-Length",e.byteLength.toString()),new yt(e,r)}static formData(e,t){return new yt(e,vt(t))}}h("undefined"!=typeof URL,w.formatMessage('Global "URL" class is not defined. This likely means that you\'re running MSW in an environment that doesn\'t support all Node.js standard API (e.g. React Native). If that\'s the case, please use an appropriate polyfill for the "URL" class, like "react-native-url-polyfill".'));export{yt as H,gt as h,nt as s};
