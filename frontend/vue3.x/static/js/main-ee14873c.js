import{v as e,z as s,w as t,x as o,N as a}from"./antd-design-all-47354a5a.js";import{u as i,_ as r,h as n,A as m,i as c,j as u,b as l,k as d,C as p,D as _,P as h}from"./bootstrap-cead20d2.js";import{d as g,e as y,n as b,w as L,Q as v,a1 as w,O as f,u as E,f as R,P,a2 as j,a3 as x,I as O,a4 as T}from"./vue-all-a395f9b2.js";import{U as A,_ as k,a as I,b as V,c as D,d as M,e as z}from"./layout-all-24376a74.js";import"./mocks-all-ddd5f779.js";const C=g({__name:"App",setup(o){const a=i(),r=y((()=>a.componentSize)),n=y((()=>a.language===e.locale?e:s));return b((()=>{t.config({theme:a.themeColor}),a.isMobile?document.body.classList.add("is-mobile"):document.body.classList.remove("is-mobile"),a.isMixMenu?document.body.classList.add("is-mixmenu"):document.body.classList.remove("is-mixmenu"),a.isTopMenu?document.body.classList.add("is-topmenu"):document.body.classList.remove("is-topmenu"),a.isSideMenu?document.body.classList.add("is-sidemenu"):document.body.classList.remove("is-sidemenu"),a.themeWeak?document.body.classList.add("is-theme-weak"):document.body.classList.remove("is-theme-weak"),a.keepAlive?document.body.classList.add("is-keep-alive"):document.body.classList.remove("is-keep-alive"),a.multiTab?document.body.classList.add("is-multi-tab"):document.body.classList.remove("is-multi-tab")})),L((()=>a.domTitle),(e=>{document.title=e.trim()||document.title}),{immediate:!0}),(e,s)=>{const o=P("RouterView"),a=t;return v(),w(a,{locale:E(n),componentSize:E(r)},{default:f((()=>[R(o)])),_:1},8,["locale","componentSize"])}}}),U=n.constantRoutes;U.push({path:"/index",name:"index",redirect:"/system/OrganizeManage"},{path:"/login",redirect:"/login/Login",component:A,children:[{path:"Login",name:"Login",component:()=>r((()=>import("./bootstrap-cead20d2.js").then((e=>e.L))),["static/js/bootstrap-cead20d2.js","static/js/antd-design-icons-6091f288.js","static/js/antd-design-all-47354a5a.js","static/js/vendors-all-5ef5b39e.js","static/js/vue-all-a395f9b2.js","static/js/date-all-c035b96e.js","static/css/antd-design-all-b8a66e21.css","static/js/storage-all-c31aac58.js","static/js/layout-all-24376a74.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-82b5ae9a.js","static/css/bootstrap-4be7a914.css"]),meta:{title:"系统登录"}}]});const S=x({routes:U,history:j(m),scrollBehavior:(e,s,t)=>{const o=i(),a=o.multiTab,r=o.keepAlive,n=!1!==e.meta.allowCache;return a&&r&&n&&t?t:{top:0,left:0}}}),q={...c(Object.assign({"/src/layout/BasicLayout.tsx":k,"/src/layout/BlankLayout.tsx":I,"/src/layout/PageFrame.tsx":V,"/src/layout/PageView.tsx":D,"/src/layout/RouteView.tsx":M,"/src/layout/UserLayout.tsx":z})),...u(Object.assign({"/src/views/error/PageError403.vue":()=>r((()=>import("./bootstrap-cead20d2.js").then((e=>e.w))),["static/js/bootstrap-cead20d2.js","static/js/antd-design-icons-6091f288.js","static/js/antd-design-all-47354a5a.js","static/js/vendors-all-5ef5b39e.js","static/js/vue-all-a395f9b2.js","static/js/date-all-c035b96e.js","static/css/antd-design-all-b8a66e21.css","static/js/storage-all-c31aac58.js","static/js/layout-all-24376a74.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-82b5ae9a.js","static/css/bootstrap-4be7a914.css"]),"/src/views/error/PageError404.vue":()=>r((()=>import("./bootstrap-cead20d2.js").then((e=>e.x))),["static/js/bootstrap-cead20d2.js","static/js/antd-design-icons-6091f288.js","static/js/antd-design-all-47354a5a.js","static/js/vendors-all-5ef5b39e.js","static/js/vue-all-a395f9b2.js","static/js/date-all-c035b96e.js","static/css/antd-design-all-b8a66e21.css","static/js/storage-all-c31aac58.js","static/js/layout-all-24376a74.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-82b5ae9a.js","static/css/bootstrap-4be7a914.css"]),"/src/views/error/PageError500.vue":()=>r((()=>import("./bootstrap-cead20d2.js").then((e=>e.y))),["static/js/bootstrap-cead20d2.js","static/js/antd-design-icons-6091f288.js","static/js/antd-design-all-47354a5a.js","static/js/vendors-all-5ef5b39e.js","static/js/vue-all-a395f9b2.js","static/js/date-all-c035b96e.js","static/css/antd-design-all-b8a66e21.css","static/js/storage-all-c31aac58.js","static/js/layout-all-24376a74.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-82b5ae9a.js","static/css/bootstrap-4be7a914.css"]),"/src/views/login/Login.vue":()=>r((()=>import("./bootstrap-cead20d2.js").then((e=>e.L))),["static/js/bootstrap-cead20d2.js","static/js/antd-design-icons-6091f288.js","static/js/antd-design-all-47354a5a.js","static/js/vendors-all-5ef5b39e.js","static/js/vue-all-a395f9b2.js","static/js/date-all-c035b96e.js","static/css/antd-design-all-b8a66e21.css","static/js/storage-all-c31aac58.js","static/js/layout-all-24376a74.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-82b5ae9a.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/OrganizeManage.vue":()=>r((()=>import("./bootstrap-cead20d2.js").then((e=>e.O))),["static/js/bootstrap-cead20d2.js","static/js/antd-design-icons-6091f288.js","static/js/antd-design-all-47354a5a.js","static/js/vendors-all-5ef5b39e.js","static/js/vue-all-a395f9b2.js","static/js/date-all-c035b96e.js","static/css/antd-design-all-b8a66e21.css","static/js/storage-all-c31aac58.js","static/js/layout-all-24376a74.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-82b5ae9a.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/ResourceManage.vue":()=>r((()=>import("./bootstrap-cead20d2.js").then((e=>e.R))),["static/js/bootstrap-cead20d2.js","static/js/antd-design-icons-6091f288.js","static/js/antd-design-all-47354a5a.js","static/js/vendors-all-5ef5b39e.js","static/js/vue-all-a395f9b2.js","static/js/date-all-c035b96e.js","static/css/antd-design-all-b8a66e21.css","static/js/storage-all-c31aac58.js","static/js/layout-all-24376a74.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-82b5ae9a.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/RoleManage.vue":()=>r((()=>import("./bootstrap-cead20d2.js").then((e=>e.z))),["static/js/bootstrap-cead20d2.js","static/js/antd-design-icons-6091f288.js","static/js/antd-design-all-47354a5a.js","static/js/vendors-all-5ef5b39e.js","static/js/vue-all-a395f9b2.js","static/js/date-all-c035b96e.js","static/css/antd-design-all-b8a66e21.css","static/js/storage-all-c31aac58.js","static/js/layout-all-24376a74.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-82b5ae9a.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/UserManage.vue":()=>r((()=>import("./bootstrap-cead20d2.js").then((e=>e.U))),["static/js/bootstrap-cead20d2.js","static/js/antd-design-icons-6091f288.js","static/js/antd-design-all-47354a5a.js","static/js/vendors-all-5ef5b39e.js","static/js/vue-all-a395f9b2.js","static/js/date-all-c035b96e.js","static/css/antd-design-all-b8a66e21.css","static/js/storage-all-c31aac58.js","static/js/layout-all-24376a74.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-82b5ae9a.js","static/css/bootstrap-4be7a914.css"])}))};o.configure({showSpinner:!1});const B="/login/Login",F=["/login/Login"];S.beforeEach((async(e,s,t)=>{o.start();const i=l(),r=d(),n=i.token,m=i.userRole;if(n){if(e.path===B)return void t({path:"/index"});if(!m.permissions||0===m.permissions.length){try{await i.getUserInfo({}),await r.generateRouter({},q);const o=O(r.dynamicRoutes),a=s.query.redirect||e.path,n="string"==typeof a?decodeURIComponent(a):"";for(const e of o)S.addRoute(e);e.path===n?t({...e,replace:!0}):t({path:n})}catch(c){await new Promise((e=>{a.error({duration:.8,message:"系统通知",description:"获取用户信息失败，请重新登录!",onClose:()=>i.logout().then(e)})})),t({path:B,query:{redirect:e.fullPath}})}return}return t()}return e&&e.name?F.includes(e.path)?t():(await new Promise((e=>{a.error({duration:.8,message:"系统通知",description:"token 已过期, 请重新登录!",onClose:()=>i.logout().then(e)})})),void t({path:B,query:{redirect:e.fullPath}})):t({path:B})})),S.afterEach((e=>{let s="";for(const t of e.matched){const e="/"!==t.path,o="string"==typeof t.meta.title&&t.meta.title.trim();e&&o&&(s=s?s+" - "+o:o)}i().toggleDomTitle(s),o.done()})),T(C).use(p).use(_).use(h).use(S).mount("#app");export{S as R};
