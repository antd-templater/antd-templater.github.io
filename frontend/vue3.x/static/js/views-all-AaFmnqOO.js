import{d as e,_ as l,a9 as a,c as t,a0 as o,q as r,r as n,Y as s,a as i,l as d,aa as u,ab as c,ac as p,ad as v,ae as y,u as m,af as f,o as g,z as h,N as b,G as _,e as k,$ as x,ag as C,ah as w,n as S,ai as I,K as O,m as T,aj as A,F as j,ak as P}from"./vue-all-BkT7LybC.js";import{Q as N,B as z,F,o as R,I as M,j as q,C as V,U,u as D,V as Y,w as E,_ as B,c as G,n as W,p as K,N as L,G as H,S as Q,y as X,x as $}from"./antdv-all-DwqtpcNy.js";import{c as J,s as Z,t as ee,v as le,w as ae,x as te,y as oe,z as re,u as ne,B as se,C as ie,E as de,F as ue,G as ce,H as pe,I as ve,J as ye,K as me,L as fe,M as ge,N as he,O as be,Q as _e,R as ke,S as xe,T as Ce}from"./bootstrap-CvWe1fOT.js";import{K as we}from"./vendors-all-4ZE5R_n7.js";import{T as Se,V as Ie,f as Oe,X as Te,i as Ae,Y as je,v as Pe,w as Ne,H as ze,G as Fe,_ as Re,Z as Me}from"./ant-design-icons-vue-C0jt0gvd.js";import{t as qe,a as Ve,b as Ue,d as De,e as Ye,f as Ee,g as Be,h as Ge,j as We,k as Ke,l as Le,m as He,n as Qe}from"./antd-template-lib-WTYRR0PU.js";const Xe={class:"page-container"},$e=e({name:"PageError403",__name:"PageError403",setup:e=>(e,n)=>{const s=z,i=N;return l(),a("div",Xe,[t(i,{title:"403",status:"403",subTitle:"抱歉，您无权访问此页!"},{extra:o((()=>[t(s,{type:"primary",onClick:n[0]||(n[0]=l=>e.$router.push({path:"/index"}))},{default:o((()=>[r(" 返回首页 ")])),_:1})])),_:1})])}}),Je=(e,l)=>{const a=e.__vccOpts||e;for(const[t,o]of l)a[t]=o;return a},Ze=Je($e,[["__scopeId","data-v-7cfb9f6e"]]),el=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"})),ll={class:"page-container"},al=e({name:"PageError404",__name:"PageError404",setup:e=>(e,n)=>{const s=z,i=N;return l(),a("div",ll,[t(i,{title:"404",status:"404",subTitle:"抱歉，您访问的页面不存在!"},{extra:o((()=>[t(s,{type:"primary",onClick:n[0]||(n[0]=l=>e.$router.push({path:"/index"}))},{default:o((()=>[r(" 返回首页 ")])),_:1})])),_:1})])}}),tl=Je(al,[["__scopeId","data-v-95ca0d39"]]),ol=Object.freeze(Object.defineProperty({__proto__:null,default:tl},Symbol.toStringTag,{value:"Module"})),rl={class:"page-container"},nl=e({name:"PageError500",__name:"PageError500",setup:e=>(e,n)=>{const s=z,i=N;return l(),a("div",rl,[t(i,{title:"500",status:"500",subTitle:"抱歉，服务器反馈异常!"},{extra:o((()=>[t(s,{type:"primary",onClick:n[0]||(n[0]=l=>e.$router.push({path:"/index"}))},{default:o((()=>[r(" 返回首页 ")])),_:1})])),_:1})])}}),sl=Je(nl,[["__scopeId","data-v-aa383fdf"]]),il=Object.freeze(Object.defineProperty({__proto__:null,default:sl},Symbol.toStringTag,{value:"Module"})),dl=e=>(c("data-v-faa4a41a"),e=e(),p(),e),ul={class:"login-container"},cl={class:"main"},pl={class:"main-container"},vl=dl((()=>u("div",{class:"main-header"},[u("div",{class:"title"},[u("img",{src:Z,class:"logo",alt:"logo"}),u("span",null,"系统平台")]),u("div",{class:"description"},[u("span",null,"基于 Ant Design Vue v4.x 框架搭建")])],-1))),yl={class:"main-content"},ml={style:{padding:"1px",margin:"5px 0"}},fl={style:{padding:"1px"}},gl={style:{padding:"0 5px",overflow:"hidden"}},hl=dl((()=>u("div",{class:"footer"},[u("div",{class:"copyright"}," Copyright © 2024 Antd-Templater ")],-1))),bl=Je(e({name:"Login",__name:"Login",setup(e){const c=n(!1),p=J(),g=s(),h=i({username:"",password:"",rememberMe:!0}),b=i({username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}]}),_=i({username:d((()=>"error"!==k.validateInfos.username.validateStatus)),password:d((()=>"error"!==k.validateInfos.password.validateStatus))}),k=F.useForm(h,b),x=async()=>{try{await k.validate();const e=e=>{R.success({message:"系统提示",duration:.8,description:"欢迎回来",onClose:()=>{c.value=!1,g.push({path:"/"})}})},l=e=>{e.message&&R.error({message:"系统提示",duration:.8,description:e.message,onClose:()=>{c.value=!1}}),setTimeout((()=>{c.value=!1}),500)};return c.value=!0,p.login({...h,password:we(h.password)}).then(e).catch(l)}catch{}};return(e,n)=>{const s=M,i=q,d=V,p=z,g=F;return l(),a("div",ul,[u("div",cl,[u("div",pl,[vl,u("div",yl,[t(g,null,{default:o((()=>[u("div",ml,[t(i,v(y(m(k).validateInfos.username)),{default:o((()=>[t(s,{value:m(h).username,"onUpdate:value":n[0]||(n[0]=e=>m(h).username=e),placeholder:"账号: admin",size:"large",type:"text",onPressEnter:x},{prefix:o((()=>[t(m(Se),{style:f(m(_).username?{color:"#c0c0c0"}:{})},null,8,["style"])])),_:1},8,["value"])])),_:1},16)]),u("div",fl,[t(i,v(y(m(k).validateInfos.password)),{default:o((()=>[t(s,{value:m(h).password,"onUpdate:value":n[1]||(n[1]=e=>m(h).password=e),placeholder:"密码: 12345678",size:"large",type:"password",onPressEnter:x},{prefix:o((()=>[t(m(Ie),{style:f(m(_).password?{color:"#c0c0c0"}:{})},null,8,["style"])])),_:1},8,["value"])])),_:1},16)]),u("div",gl,[t(d,{checked:m(h).rememberMe,"onUpdate:checked":n[2]||(n[2]=e=>m(h).rememberMe=e)},{default:o((()=>[r(" 自动登录 ")])),_:1},8,["checked"])]),t(i,{style:{margin:"30px 0 0"}},{default:o((()=>[t(p,{size:"large",type:"primary",class:"login-button",loading:m(c),disabled:m(c),onClick:x},{default:o((()=>[r(" 登录 ")])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])])]),hl])}}}),[["__scopeId","data-v-faa4a41a"]]),_l=Object.freeze(Object.defineProperty({__proto__:null,default:bl},Symbol.toStringTag,{value:"Module"})),kl={class:"organize-tree-container"},xl=Je(e({name:"OrganizeTree",inheritAttrs:!1,__name:"OrganizeTree",emits:["queryTable","selectedNode","addRecord"],setup(e,{expose:r,emit:s}){const i={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},d={display:"flex",padding:"15px 10px",flexFlow:"column nowrap",flex:"1 1 auto",position:"relative",overflow:"auto"},u={flex:"0 0 auto",overflow:"hidden"},c=s,p=n(null),v=n([]),y=n(!1),f=n([]),_=n([]),k=n([]),x=n({children:"children",title:"title",key:"key"}),C=e=>{if(!y.value){y.value=!0;const e=[],l=[...k.value],a=[..._.value],t=new Set(["0",...f.value]);f.value=[],k.value=[],_.value=[];for(const o of t)e.push(I({key:o}).then((e=>({parent:"0"!==o?{key:o}:null,children:e||[]}))).catch((()=>{})));return Promise.all(e).then((e=>{var o,r,n,s;for(const l of e)l&&(null==(r=p.value)||r.reloadTreeNodes(l.children,null==(o=l.parent)?void 0:o.key));null==(n=p.value)||n.doTreeOnlyExpanded(l),null==(s=p.value)||s.doTreeSelected(a),f.value=[...t],y.value=!1}))}},w=Ve((e=>{var l,a;c("selectedNode",e.selectedNode),c("queryTable",{orgId:"Y"===(null==(l=e.selectedNode)?void 0:l.isOrg)?e.selectedNode.key:"",deptId:"N"===(null==(a=e.selectedNode)?void 0:a.isOrg)?e.selectedNode.key:""})})),S=Ue((e=>{f.value=[...e.loadedKeys]})),I=qe((e=>{const l=ee("",{orgId:e.key},null,null);return le(l).then((e=>"0000"!==e.code?Promise.reject():e.result))}));return g((()=>{C()})),r({doRefresh:C}),(e,r)=>{const n=Oe,s=z,f=Te,g=h("STree"),O=U;return l(),a("section",kl,[t(O,{title:"组织列表",style:i,bodyStyle:d,headStyle:u,bordered:!1},{extra:o((()=>[t(s,{ghost:"",type:"primary",style:{margin:"0 5px"},onClick:r[0]||(r[0]=e=>{c("addRecord")})},{icon:o((()=>[t(n)])),_:1}),t(s,{ghost:"",type:"primary",style:{margin:"0 5px"},onClick:r[1]||(r[1]=e=>C())},{icon:o((()=>[t(f)])),_:1})])),default:o((()=>[t(g,{ref_key:"tree",ref:p,treeData:m(v),"onUpdate:treeData":r[2]||(r[2]=e=>b(v)?v.value=e:null),expandedKeys:m(k),"onUpdate:expandedKeys":r[3]||(r[3]=e=>b(k)?k.value=e:null),selectedKeys:m(_),"onUpdate:selectedKeys":r[4]||(r[4]=e=>b(_)?_.value=e:null),replaceFields:m(x),allowAutoExpandLoad:!0,allowAutoExpanded:!0,allowSelectedLevel:1,allowCheckedLevel:1,selectable:!0,checkable:!1,showIcon:!1,showLine:!1,tooltip:!0,blockNode:!0,loading:m(y),loadData:m(I),onChange:m(S),onSelect:m(w)},null,8,["treeData","expandedKeys","selectedKeys","replaceFields","loading","loadData","onChange","onSelect"])])),_:1})])}}}),[["__scopeId","data-v-02ee1541"]]),Cl=Object.freeze(Object.defineProperty({__proto__:null,default:xl},Symbol.toStringTag,{value:"Module"})),wl={class:"organize-query-container"},Sl={class:"flex-row-auto"},Il={class:"flex-row-none"},Ol={class:"flex-row-auto"},Tl={style:{flex:"1 1 auto"}},Al={style:{flex:"0 0 auto"}},jl=(e=>(c("data-v-056091ec"),e=e(),p(),e))((()=>u("span",null,"新增",-1))),Pl={key:0,class:"form-inline-more"},Nl={class:"flex-row-none",style:{width:"210px"}},zl={class:"flex-row-auto"},Fl=Je(e({name:"OrganizeQuery",inheritAttrs:!1,__name:"OrganizeQuery",emits:["addRecord","queryTable"],setup(e,{emit:s}){const i=n(!1),c=s,p=D(),v=n({title:"",activity:""}),y=d((()=>{var e;return(null==(e=p.componentSize)?void 0:e.value)??"middle"})),g=()=>{c("addRecord")},h=()=>{c("queryTable",v.value)},b=()=>{i.value=!i.value};return(e,n)=>{const s=Ae,d=z,c=Y,p=q,w=je,S=Oe,I=E,O=B,T=F,A=_("action");return l(),a("section",wl,[t(T,{layout:"inline"},{default:o((()=>[u("div",Sl,[u("div",Il,[t(p,{label:"组织/部门",style:f({width:"large"===m(y)?"385px":"middle"===m(y)?"345px":"310px"})},{default:o((()=>[t(c,{value:m(v).title,"onUpdate:value":n[0]||(n[0]=e=>m(v).title=e),placeholder:"请输入组织/部门名称",allowClear:"",onSearch:h},{enterButton:o((()=>[t(d,null,{icon:o((()=>[t(s,{style:{color:"var(--ant-primary-color)"}})])),_:1})])),_:1},8,["value"])])),_:1},8,["style"])]),u("div",Ol,[u("div",Tl,[t(d,{onClick:b},{icon:o((()=>[t(w,{style:{color:"var(--ant-primary-color)"}})])),_:1})]),u("div",Al,[k((l(),x(d,{type:"primary",onClick:g},{icon:o((()=>[t(S)])),default:o((()=>[jl])),_:1})),[[A,void 0,"add"]])])])]),m(i)?(l(),a("div",Pl,[u("div",Nl,[t(p,{label:"组织状态",style:{"margin-bottom":"0"}},{default:o((()=>[t(O,{value:m(v).activity,"onUpdate:value":n[1]||(n[1]=e=>m(v).activity=e),placeholder:"请选择组织状态",onChange:h},{default:o((()=>[t(I,{value:""},{default:o((()=>[r(" 全部 ")])),_:1}),t(I,{value:"Y"},{default:o((()=>[r(" 启用 ")])),_:1}),t(I,{value:"N"},{default:o((()=>[r(" 禁用 ")])),_:1})])),_:1},8,["value"])])),_:1})]),u("div",zl,[t(d,{type:"primary",style:{margin:"0 8px"},onClick:h},{default:o((()=>[r(" 查询 ")])),_:1}),t(d,{style:{margin:"0 8px"},onClick:n[2]||(n[2]=e=>{return l=!0,v.value.title="",v.value.activity="",void(!0===l&&h());var l})},{default:o((()=>[r(" 重置 ")])),_:1})])])):C("",!0)])),_:1})])}}}),[["__scopeId","data-v-056091ec"]]),Rl=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"})),Ml={class:"organize-table-container"},ql={key:0},Vl={key:1},Ul={key:2},Dl=["onClick"],Yl=Je(e({name:"OrganizeTable",inheritAttrs:!1,__name:"OrganizeTable",props:{dictionary:{}},emits:["editRecord"],setup(e,{expose:r,emit:s}){const i=e,d=s,u=n(null),c=n({title:"",orgId:"",deptId:"",activity:""}),p=De({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),v=Ye({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),y=Ee([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"名称",dataIndex:"title",tooltip:!0,fixed:"left"},{title:"简称",dataIndex:"orgShortName"},{title:"编码",dataIndex:"key"},{title:"上级单位",dataIndex:"parentOrgName",tooltip:!0},{title:"形态",dataIndex:"isOrg",width:100},{title:"可用状态",dataIndex:"activity",align:"center",width:90},{title:"操作",dataIndex:"action",align:"center",fixed:"right",width:80}]),f=Be({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),g=Ge((e=>{const l=ee("",c.value,e.paginate,e.sorter);return oe(l).then((e=>"0000"!==e.code?(R.error({message:"系统消息",description:e.message||"组织机构查询失败!"}),Promise.reject(e)):e))})),_=e=>{var l;null==(l=u.value)||l.refresh(e)};return r({doTableRefresh:_,queryParams:c}),(e,r)=>{const n=G,s=h("STable");return l(),a("section",Ml,[t(s,{ref_key:"table",ref:u,columns:m(y),"onUpdate:columns":r[0]||(r[0]=e=>b(y)?y.value=e:null),paginate:m(f),"onUpdate:paginate":r[1]||(r[1]=e=>b(f)?f.value=e:null),columnPresetResizable:!0,loadData:m(g),bodyMinRows:!0,immediate:!1,border:!1,scroll:m(v),sticky:m(p),rowKey:"key"},{bodyerCell:o((({column:e,record:t,value:o,groupIndex:r})=>["serial"===e.key?(l(),a("span",ql,w(r+1),1)):C("",!0),"parentOrgName"===e.key?(l(),a("span",Vl,w(m(ae)(i.dictionary.orgTree,o)),1)):C("",!0),"isOrg"===e.key?(l(),a("span",Ul,w(m(ae)(i.dictionary.isOrg,o)),1)):C("",!0),"activity"===e.key?(l(),x(n,{key:3,checked:o,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{var t;return e[l]=a,null==(t=u.value)||t.update(),te(ee("update",e)).then((e=>{if("0000"!==e.code)return R.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);R.success({message:"系统消息",description:"修改成功"}),_()}))})(t,"activity",e)},null,8,["checked","onChange"])):C("",!0),"action"===e.key?(l(),a("a",{key:4,href:"javascript: void(0)",style:{"font-weight":"500",display:"inline-block",margin:"0 7px"},onClick:e=>(e=>{d("editRecord",e)})(t)}," 修改 ",8,Dl)):C("",!0)])),_:1},8,["columns","paginate","loadData","scroll","sticky"])])}}}),[["__scopeId","data-v-a1cff469"]]),El=Object.freeze(Object.defineProperty({__proto__:null,default:Yl},Symbol.toStringTag,{value:"Module"})),Bl={class:"organize-form-container"},Gl=Je(e({name:"OrganizeForm",inheritAttrs:!1,__name:"OrganizeForm",props:{dictionary:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:o}){const r=n(null),s=e,i=d((()=>s.loading)),u=n({}),c=n(""),p=We([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"title",field:"title",label:"名称",props:{rows:1,autoSize:!0,placeholder:"请输入名称"}},{type:"AInput",slot:"orgShortName",field:"orgShortName",label:"简称",props:{placeholder:"请输入简称"}},{type:"ASelect",slot:"isOrg",field:"isOrg",label:"形态",props:{placeholder:"请选择组织形态",options:s.dictionary.isOrg}},{type:"ATreeSelect",slot:"parentOrgId",field:"parentOrgId",label:"上级",props:{popupClassName:"text-ellipsis",dropdownStyle:{maxHeight:"300px"},allowClear:!0,showSearch:!0,treeDefaultExpandAll:!0,dropdownMatchSelectWidth:!0,treeNodeFilterProp:"label",placeholder:"请选择上级",treeData:s.dictionary.orgTree},transfer:{input:e=>"0"!==e?e:"",output:e=>e||"0"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"",border:!0,grid:{}},{type:"ASwitch",slot:"activity",field:"activity",label:"状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),v=Ke({title:[{required:!0,message:"请输入名称"}],isOrg:[{required:!0,message:"请选择形态"}],orgShortName:[{required:!0,message:"请输入简称"}]}),y=Le({gutter:8,xs:24});return o({validateFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.validateFields(...e).then((()=>({action:c.value,record:u.value})))},resetFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{c.value=e,u.value=l},doClose:()=>{c.value="",u.value={}}}),(e,o)=>{const n=h("SForm");return l(),a("section",Bl,[t(n,{ref_key:"form",ref:r,modelValue:m(u),"onUpdate:modelValue":o[0]||(o[0]=e=>b(u)?u.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:m(i),groups:m(p),rules:m(v),grid:m(y)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-8ea018c4"]]),Wl=Object.freeze(Object.defineProperty({__proto__:null,default:Gl},Symbol.toStringTag,{value:"Module"})),Kl={class:"organize-drawer-container"},Ll={class:"readonly-container"},Hl={class:"readonly-item"},Ql=(e=>(c("data-v-2c2ff9ff"),e=e(),p(),e))((()=>u("span",{class:"name"},"编码:",-1))),Xl={class:"value"},$l={class:"drawer-body-footer"},Jl={class:"drawer-body-footer-fixed"},Zl=Je(e({name:"OrganizeDrawer",inheritAttrs:!1,__name:"OrganizeDrawer",props:{dictionary:{}},emits:["submitted","closed"],setup(e,{expose:s,emit:i}){const d=i,c=e,p=n(null),v=n(""),y=n(""),f=n({key:""}),g=n(!1),h=n(!1),b=n(!1),_=n(!1),k=n(!1),x=()=>{var e;k.value&&(v.value="",y.value="",f.value={key:""},h.value=!1,g.value=!1,b.value=!1,_.value=!1,k.value=!1,null==(e=p.value)||e.doClose(),d("closed"))};return s({doEdit:e=>{v.value="修改",y.value="update",h.value=!1,g.value=!1,_.value=!1,k.value=!0,f.value=Object.assign({parentOrgId:"0",activity:"Y",isOrg:"Y"},e),S((()=>{var e;null==(e=p.value)||e.doCreate("update",f.value)}))},doAdd:e=>{v.value="新增",y.value="insert",h.value=!1,g.value=!1,_.value=!0,k.value=!0,f.value=Object.assign({parentOrgId:"0",activity:"Y",isOrg:"Y"},e),S((()=>{var e;null==(e=p.value)||e.doCreate("insert",f.value)}))}}),(e,n)=>{const s=K,i=z,y=W;return l(),a("section",Kl,[t(y,{width:"400",open:m(k),title:m(v),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:n[2]||(n[2]=e=>x())},{default:o((()=>[u("div",Ll,[u("div",Hl,[Ql,u("span",Xl,w(m(f).key||"由系统生成"),1)])]),t(s,{dashed:!0,style:{margin:"16px  0 20px"}}),t(Gl,{ref_key:"form",ref:p,dictionary:c.dictionary,disabled:m(h),readonly:m(g),loading:m(b)},null,8,["dictionary","disabled","readonly","loading"]),u("div",$l,[u("div",Jl,[t(i,{onClick:n[0]||(n[0]=e=>x())},{default:o((()=>[r(" 取消 ")])),_:1}),t(i,{type:"primary",loading:m(b),onClick:n[1]||(n[1]=e=>{var l,a;null==(a=null==(l=p.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!b.value){b.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},t="insert"===e?re(ee(e,l)):te(ee(e,l));return t.finally((()=>{b.value=!1})),t.then((e=>{"0000"!==e.code?R.error({message:"系统消息",description:e.message||a.error}):R.success({message:"系统消息",description:a.success});const t="0000"!==e.code?Promise.reject(e):l;return d("submitted"),x(),t}))}}))})},{default:o((()=>[r(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-2c2ff9ff"]]),ea=Object.freeze(Object.defineProperty({__proto__:null,default:Zl},Symbol.toStringTag,{value:"Module"})),la={class:"section-container"},aa={class:"section-left-tree"},ta={class:"section-right-container"},oa={class:"section-query-container"},ra={class:"section-table-container"},na=Je(e({name:"OrganizeManage",inheritAttrs:!1,__name:"OrganizeManage",setup(e){I((e=>({e781d454:m(b).layoutViewStyle.minHeight})));const r={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},s={flex:"0 0 auto",overflow:"hidden"},i={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},d=n(null),c=n(null),p=n(null),v=n(null),y=n(null),h=n(!1),b=ne(),_=n({orgTree:[],isOrg:[{label:"组织",value:"Y"},{label:"部门",value:"N"}]}),k=e=>{y.value=e},w=(e={})=>{c.value&&(c.value.queryParams={...c.value.queryParams,...e},c.value.doTableRefresh())},S=e=>{var l;null==(l=v.value)||l.doEdit(e)},T=()=>{var e,l;null==(l=v.value)||l.doAdd({parentOrgId:null==(e=y.value)?void 0:e.key})},A=()=>{var e;se({id:"orgTree"}).then((e=>{if("0000"!==e.code)return Promise.reject(new Error);_.value.orgTree.splice(0),_.value.orgTree.push(...e.result)})),null==(e=d.value)||e.doRefresh()};return g((()=>{A()})),(e,n)=>{const y=U,g=Pe,b=Ne,I=z;return l(),a("section",la,[u("div",{class:"section-left-container",style:f({width:m(h)?"0":"334px"})},[u("div",aa,[t(xl,{ref_key:"tree",ref:d,dictionary:m(_),onAddRecord:T,onSelectedNode:k,onQueryTable:w,onQueryAll:A},null,8,["dictionary"])])],4),u("div",ta,[t(y,{style:r,headStyle:s,bodyStyle:i,bordered:!1},{default:o((()=>[u("div",oa,[t(Fl,{ref_key:"query",ref:p,onQueryTable:w,onAddRecord:T},null,512)]),u("div",ra,[t(Yl,{ref_key:"table",ref:c,dictionary:m(_),onEditRecord:S},null,8,["dictionary"])])])),_:1}),t(I,{type:"link",class:"section-tree-collapse",onClick:n[0]||(n[0]=O((e=>h.value=!m(h)),["stop"]))},{icon:o((()=>[m(h)?(l(),x(g,{key:0})):C("",!0),m(h)?C("",!0):(l(),x(b,{key:1}))])),_:1})]),t(Zl,{ref_key:"drawer",ref:v,dictionary:m(_),onSubmitted:w},null,8,["dictionary"])])}}}),[["__scopeId","data-v-9bdacc61"]]),sa=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"})),ia={class:"resource-button-form-container"},da=Je(e({name:"ResourceButtonForm",inheritAttrs:!1,__name:"ButtonForm",props:{presetOptions:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:o}){const r=n(null),s=e,i=d((()=>s.loading)),u=n({}),c=n(""),p=We([{type:"AGroup",slot:"",field:"AGroup-1",label:"",grid:{}},{type:"AInput",slot:"title",field:"title",label:"按钮名称",props:{placeholder:"请输入按钮名称",options:s.presetOptions.buttons}},{type:"AInput",slot:"resourceName",field:"resourceName",label:"按钮标识",props:{placeholder:"请输入按钮标识"}},{type:"AInput",slot:"sort",field:"sort",label:"按钮排序",props:{placeholder:"请输入按钮排序"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",border:!0,grid:{}},{type:"ASwitch",slot:"activity",field:"activity",label:"是否启用",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),v=Ke({title:[{required:!0,message:"请输入按钮名称"}],resourceName:[{required:!0,message:"请输入按钮标识"}],sort:[{required:!0,message:"请输入按钮排序"}]}),y=Le({gutter:8,xs:24});return o({validateFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.validateFields(...e).then((()=>({action:c.value,record:u.value})))},resetFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{c.value=e,u.value=l},doClose:()=>{c.value="",u.value={}}}),(e,o)=>{const n=h("SForm");return l(),a("section",ia,[t(n,{ref_key:"form",ref:r,modelValue:m(u),"onUpdate:modelValue":o[0]||(o[0]=e=>b(u)?u.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:m(i),groups:m(p),rules:m(v),grid:m(y)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-2e46f229"]]),ua=Object.freeze(Object.defineProperty({__proto__:null,default:da},Symbol.toStringTag,{value:"Module"})),ca=e=>(c("data-v-cf16ef9d"),e=e(),p(),e),pa={class:"resource-button-drawer-container"},va={class:"readonly-container"},ya={class:"readonly-item"},ma=ca((()=>u("span",{class:"name"},"按钮资源ID:",-1))),fa={class:"value"},ga={class:"readonly-item"},ha=ca((()=>u("span",{class:"name"},"所属菜单ID:",-1))),ba={class:"value"},_a={class:"readonly-item"},ka=ca((()=>u("span",{class:"name"},"所属菜单标识:",-1))),xa={class:"value"},Ca={class:"drawer-body-footer"},wa={class:"drawer-body-footer-fixed"},Sa=Je(e({name:"ResourceButtonDrawer",inheritAttrs:!1,__name:"ButtonDrawer",props:{presetOptions:{}},emits:["submitted","deleted","closed"],setup(e,{expose:s,emit:i}){const d=e,c=i,p=n(null),v=n(""),y=n(""),f=n({}),g=n(!1),h=n(!1),b=n(!1),_=n(!1),k=n(!1),x=()=>{var e;k.value&&(v.value="",y.value="",f.value={},h.value=!1,g.value=!1,b.value=!1,_.value=!1,k.value=!1,null==(e=p.value)||e.doClose(),c("closed"))};return s({doEdit:e=>{v.value="修改按钮资源",y.value="update",h.value=!1,g.value=!1,_.value=!1,k.value=!0,f.value=Object.assign({resourceType:"b",activity:"Y"},e),S((()=>{var e;null==(e=p.value)||e.doCreate("update",f.value)}))},doAdd:e=>{v.value="添加按钮资源",y.value="insert",h.value=!1,g.value=!1,_.value=!0,k.value=!0,f.value=Object.assign({resourceType:"b",activity:"Y"},e),S((()=>{var e;null==(e=p.value)||e.doCreate("insert",f.value)}))},doDel:async e=>ie(ee("delete",e)).then((e=>{if("0000"!==e.code)return R.error({message:"系统消息",description:e.message||"删除失败!"}),Promise.reject(e);R.success({message:"系统消息",description:"删除成功!"}),c("deleted")}))}),(e,n)=>{const s=K,i=z,y=W;return l(),a("section",pa,[t(y,{width:"400",open:m(k),title:m(v),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:n[2]||(n[2]=e=>x())},{default:o((()=>[u("div",va,[u("div",ya,[ma,u("span",fa,w(m(f).resourceId||"由系统生成"),1)]),u("div",ga,[ha,u("span",ba,w(m(f).parentId),1)]),u("div",_a,[ka,u("span",xa,w(m(f).component),1)])]),t(s,{dashed:!0}),t(da,{ref_key:"form",ref:p,presetOptions:d.presetOptions,disabled:m(h),readonly:m(g),loading:m(b)},null,8,["presetOptions","disabled","readonly","loading"]),u("div",Ca,[u("div",wa,[t(i,{onClick:n[0]||(n[0]=e=>x())},{default:o((()=>[r(" 取消 ")])),_:1}),t(i,{type:"primary",loading:m(b),onClick:n[1]||(n[1]=e=>{var l,a;null==(a=null==(l=p.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!b.value){b.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},t="insert"===e?de(ee(e,l)):ue(ee(e,l));return t.finally((()=>{b.value=!1})),t.then((e=>{"0000"!==e.code?R.error({message:"系统消息",description:e.message||a.error}):R.success({message:"系统消息",description:a.success});const t="0000"!==e.code?Promise.reject(e):l;return c("submitted"),x(),t}))}}))})},{default:o((()=>[r(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-cf16ef9d"]]),Ia=Object.freeze(Object.defineProperty({__proto__:null,default:Sa},Symbol.toStringTag,{value:"Module"})),Oa={class:"resource-button-table-container"},Ta={key:0},Aa=["onClick"],ja=Je(e({name:"ResourceButtonTable",inheritAttrs:!1,__name:"ButtonTable",props:{parentNode:{}},setup(e,{expose:r}){const s=e,i=n(null),d=n(null),u=n({resourceType:"b",parentId:""}),c=n({buttons:[{label:"新增",value:"add",sort:1},{label:"删除",value:"del",sort:2},{label:"修改",value:"edit",sort:3},{label:"查询",value:"query",sort:4},{label:"重置",value:"reset",sort:5},{label:"上传",value:"upload",sort:6},{label:"上报",value:"up",sort:7},{label:"审批",value:"approve",sort:8},{label:"导出",value:"export",sort:9}]}),p={flex:"0 0 auto",overflow:"hidden"},v={flex:"1 1 auto",overflow:"auto",position:"relative",boxSizing:"border-box",padding:"20px"},y=n(!1),f=n(!1),g={container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",maxWidth:"140px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}},_=De({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),k=Ye({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),S=Ee([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"按钮名称",dataIndex:"title"},{title:"按钮标识",dataIndex:"resourceName"},{title:"是否启用",dataIndex:"activity"},{title:"操作",dataIndex:"action",align:"center",width:80}]),I=Be({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),T=Ge((async e=>{const l=ee("",u.value,e.paginate,e.sorter);return ce(l).then((e=>"0000"!==e.code?(R.error({message:"系统消息",description:e.message||"按钮资源查询失败!"}),Promise.reject(e)):e))})),A=(e,l,a)=>{var t;e[l]=a,null==(t=i.value)||t.update()},j=e=>ue(ee("update",e)).then((e=>{if("0000"!==e.code)return R.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);R.success({message:"系统消息",description:"修改成功"}),P()})),P=()=>{var e;f.value=!1,y.value=!1,null==(e=i.value)||e.refresh()},N=()=>{var e;null==(e=d.value)||e.doAdd({parentId:s.parentNode.resourceId,component:s.parentNode.component})};return r({queryParams:u,doTableRefresh:P,doTableReady:()=>{y.value=!0},doTableClear:()=>{var e;f.value=!1,y.value=!1,null==(e=i.value)||e.clear()}}),(e,r)=>{const n=Oe,s=z,u=h("SEditCellInput"),F=G,R=h("STable"),M=U;return l(),a("section",Oa,[t(M,{title:"按钮资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:p,bodyStyle:v,bordered:!1},{extra:o((()=>[e.parentNode.resourceId?(l(),x(s,{key:0,type:"primary",onClick:N},{icon:o((()=>[t(n)])),_:1})):C("",!0)])),default:o((()=>[t(R,{ref_key:"table",ref:i,loading:m(y),"onUpdate:loading":r[1]||(r[1]=e=>b(y)?y.value=e:null),columns:m(S),"onUpdate:columns":r[2]||(r[2]=e=>b(S)?S.value=e:null),paginate:m(I),"onUpdate:paginate":r[3]||(r[3]=e=>b(I)?I.value=e:null),style:{height:"100%",overflow:"auto"},columnPresetResizable:!0,loadData:m(T),bodyMinRows:!0,immediate:!1,border:!1,scroll:m(k),sticky:m(_),rowKey:"resourceId"},{bodyerCell:o((({column:e,record:t,value:o,groupIndex:n})=>["serial"===e.key?(l(),a("span",Ta,w(n+1),1)):C("",!0),"title"===e.key||"resourceName"===e.key?(l(),x(u,{key:1,status:m(f),"onUpdate:status":r[0]||(r[0]=e=>b(f)?f.value=e:null),cellStyle:g,text:o,onChange:l=>A(t,e.key,l.value),onConfirm:e=>j(t)},null,8,["status","text","onChange","onConfirm"])):C("",!0),"activity"===e.key?(l(),x(F,{key:2,checked:o,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{A(e,l,a),j(e)})(t,"activity",e)},null,8,["checked","onChange"])):C("",!0),"action"===e.key?(l(),a("a",{key:3,href:"javascript: void(0)",style:{display:"inline-block","font-weight":"500",margin:"0 7px",color:"#f44848"},onClick:O((e=>(e=>{L.confirm({title:"是否确认删除该按钮资源?",content:"删除按钮资源会导致相关权限丢失，请慎重考虑!",cancelText:"取消",okText:"删除",okType:"danger",onOk:()=>{var l;null==(l=d.value)||l.doDel([e])}})})(t)),["stop"])}," 删除 ",8,Aa)):C("",!0)])),_:1},8,["loading","columns","paginate","loadData","scroll","sticky"])])),_:1}),t(Sa,{ref_key:"buttonDrawer",ref:d,presetOptions:m(c),onSubmitted:P,onDeleted:P},null,8,["presetOptions"])])}}}),[["__scopeId","data-v-eb445cd5"]]),Pa=Object.freeze(Object.defineProperty({__proto__:null,default:ja},Symbol.toStringTag,{value:"Module"})),Na={class:"resource-menu-form-container"},za=Je(e({name:"ResourceMenuForm",inheritAttrs:!1,__name:"MenuForm",props:{disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:r}){const s=n(null),i=e,u=d((()=>i.loading)),c=n({}),p=n(""),v=We([{type:"AGroup",slot:"",field:"AGroup-1",label:"",grid:{}},{type:"AInput",slot:"title",field:"title",label:"菜单名称",props:{placeholder:"请输入菜单名称"}},{type:"AInput",slot:"resourceName",field:"resourceName",label:"菜单标识",props:{placeholder:"请输入菜单标识"}},{type:"AAutoComplete",slot:"component",field:"component",label:"组件标识",props:{showSearch:!0,placeholder:"请输入组件名称",replaceFields:{label:"label",value:"label"},filterOption:(e,l)=>!e.trim()||l.label.startsWith(e.trim()),options:[{label:"PageView",value:"PageView"},{label:"RouteView",value:"RouteView"},{label:"PageFrame",value:"PageFrame"}]}},{type:"AInput",slot:"redirect",field:"redirect",label:"跳转路径",props:{placeholder:"请输入跳转路径"}},{type:"AInput",slot:"path",field:"path",label:"访问路径",props:{placeholder:"请输入访问路径"}},{type:"ASelect",slot:"icon-select",field:"icon",label:"菜单图标",props:{placeholder:"请输入菜单图标",allowClear:!0,multiple:!1,mode:"tags"},transfer:{output:(e,{helper:l})=>l.isArray(e)?e.slice(-1)[0]:e}},{type:"AInput",slot:"sort",field:"sort",label:"菜单排序",props:{placeholder:"请输入菜单排序"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",border:!0,grid:{}},{type:"ASwitch",slot:"hideChildInMenu",field:"hideChildInMenu",label:"隐藏子菜单",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"hideInMenu",field:"hideInMenu",label:"隐藏菜单",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"allowCache",field:"allowCache",label:"是否缓存",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"activity",field:"activity",label:"是否启用",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),y=Ke({title:[{required:!0,message:"请输入菜单名称"}],resourceName:[{required:!0,message:"请输入菜单标识"}],component:[{required:!0,message:"请输入组件名称"}],sort:[{required:!0,message:"请输入菜单排序"}]}),f=Le({gutter:8,xs:24});return r({validateFields:(...e)=>{var l;return null==(l=s.value)?void 0:l.validateFields(...e).then((()=>({action:p.value,record:c.value})))},resetFields:(...e)=>{var l;return null==(l=s.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{p.value=e,c.value=l},doClose:()=>{p.value="",c.value={}}}),(e,r)=>{const n=h("SIconSelect"),i=h("SForm");return l(),a("section",Na,[t(i,{ref_key:"form",ref:s,modelValue:m(c),"onUpdate:modelValue":r[0]||(r[0]=e=>b(c)?c.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:m(u),groups:m(v),rules:m(y),grid:m(f)},{"s-component-icon-select":o((({source:e,field:l,attrs:a})=>[t(n,T({value:e[l],"onUpdate:value":a=>e[l]=a},a),null,16,["value","onUpdate:value"])])),_:1},8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-1a29aba5"]]),Fa=Object.freeze(Object.defineProperty({__proto__:null,default:za},Symbol.toStringTag,{value:"Module"})),Ra=e=>(c("data-v-86b7c500"),e=e(),p(),e),Ma={class:"resource-menu-drawer-container"},qa={class:"readonly-container"},Va={class:"readonly-item"},Ua=Ra((()=>u("span",{class:"name"},"当前菜单ID:",-1))),Da={class:"value"},Ya={class:"readonly-item"},Ea=Ra((()=>u("span",{class:"name"},"父级菜单ID:",-1))),Ba={class:"value"},Ga={class:"drawer-body-footer"},Wa={class:"drawer-body-footer-fixed"},Ka=Je(e({name:"ResourceMenuDrawer",inheritAttrs:!1,__name:"MenuDrawer",emits:["submitted","deleted","closed"],setup(e,{expose:s,emit:i}){const d=i,c=n(null),p=n(""),v=n(""),y=n({}),f=n(!1),g=n(!1),h=n(!1),b=n(!1),_=n(!1),k=()=>{var e;_.value&&(p.value="",v.value="",y.value={key:""},g.value=!1,f.value=!1,h.value=!1,b.value=!1,_.value=!1,null==(e=c.value)||e.doClose(),d("closed"))};return s({doEdit:e=>{p.value="修改菜单资源",v.value="update",g.value=!1,f.value=!1,b.value=!1,_.value=!0,y.value=Object.assign({allowCache:"Y",hideInMenu:"N",hideChildInMenu:"N",resourceType:"m",activity:"Y"},e),S((()=>{var e;null==(e=c.value)||e.doCreate("update",y.value)}))},doAdd:e=>{p.value="添加菜单资源",v.value="insert",g.value=!1,f.value=!1,b.value=!0,_.value=!0,y.value=Object.assign({allowCache:"Y",hideInMenu:"N",hideChildInMenu:"N",resourceType:"m",activity:"Y"},e),S((()=>{var e;null==(e=c.value)||e.doCreate("insert",y.value)}))},doDel:async e=>ie(ee("delete",e)).then((e=>{if("0000"!==e.code)return R.error({message:"系统消息",description:e.message||"删除失败!"}),Promise.reject(e);R.success({message:"系统消息",description:"删除成功!"}),d("deleted")}))}),(e,n)=>{const s=K,i=z,v=W;return l(),a("section",Ma,[t(v,{width:"400",open:m(_),title:m(p),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:n[2]||(n[2]=e=>k())},{default:o((()=>[u("div",qa,[u("div",Va,[Ua,u("span",Da,w(m(y).resourceId||"由系统生成"),1)]),u("div",Ya,[Ea,u("span",Ba,w(m(y).parentId),1)])]),t(s,{dashed:!0}),t(za,{ref_key:"form",ref:c,nuForm:"",disabled:m(g),readonly:m(f),loading:m(h)},null,8,["disabled","readonly","loading"]),u("div",Ga,[u("div",Wa,[t(i,{onClick:n[0]||(n[0]=e=>k())},{default:o((()=>[r(" 取消 ")])),_:1}),t(i,{type:"primary",loading:m(h),onClick:n[1]||(n[1]=e=>{var l,a;null==(a=null==(l=c.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!h.value){h.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},t="insert"===e?de(ee(e,l)):ue(ee(e,l));return t.finally((()=>{h.value=!1})),t.then((e=>{"0000"!==e.code?R.error({message:"系统消息",description:e.message||a.error}):R.success({message:"系统消息",description:a.success});const t="0000"!==e.code?Promise.reject(e):l;return d("submitted"),k(),t}))}}))})},{default:o((()=>[r(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-86b7c500"]]),La=Object.freeze(Object.defineProperty({__proto__:null,default:Ka},Symbol.toStringTag,{value:"Module"})),Ha={class:"resource-menu-table-container"},Qa={key:0},Xa=Je(e({name:"ResourceMenuTable",inheritAttrs:!1,__name:"MenuTable",setup(e,{expose:r}){const s=n(null),i=n(null),d=n({resourceType:"m",parentId:""}),u={flex:"0 0 auto",overflow:"hidden"},c={flex:"1 1 auto",overflow:"auto",position:"relative",boxSizing:"border-box",padding:"20px"},p=n(!1),v=n(!1),y={container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",minWidth:"180px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}},f=De({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),g=Ye({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),_=Ee([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"菜单名称",dataIndex:"title",minWidth:100,fixed:"left"},{title:"菜单标识",dataIndex:"resourceName",minWidth:150},{title:"组件标识",dataIndex:"component",minWidth:150},{title:"跳转路径",dataIndex:"redirect",minWidth:150},{title:"访问路径",dataIndex:"path",minWidth:150},{title:"菜单图标",dataIndex:"icon",minWidth:150},{title:"菜单排序",dataIndex:"sort",minWidth:150},{title:"隐藏子菜单",dataIndex:"hideChildInMenu",width:120},{title:"隐藏菜单",dataIndex:"hideInMenu",width:120},{title:"是否缓存",dataIndex:"allowCache",width:120},{title:"是否启用",dataIndex:"activity",width:120}]),k=Be({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),S=Ge((async e=>{const l=ee("",d.value,e.paginate,e.sorter);return ce(l).then((e=>"0000"!==e.code?(R.error({message:"系统消息",description:e.message||"按钮资源查询失败!"}),Promise.reject(e)):e))})),I=(e,l,a)=>{var t;e[l]="sort"===l?+a||"":a,null==(t=s.value)||t.update()},O=e=>ue(ee("update",e)).then((e=>{if("0000"!==e.code)return R.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);R.success({message:"系统消息",description:"修改成功"}),T()})),T=()=>{var e;v.value=!1,p.value=!1,null==(e=s.value)||e.refresh()};return r({queryParams:d,doTableRefresh:T,doTableReady:()=>{p.value=!0},doTableClear:()=>{var e;v.value=!1,p.value=!1,null==(e=s.value)||e.clear()}}),(e,r)=>{const n=h("SEditCellInput"),d=h("SEditCellTextarea"),A=G,j=h("SEditCellSelectIcon"),P=h("STable"),N=U;return l(),a("section",Ha,[t(N,{title:"子菜单资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:u,bodyStyle:c,bordered:!1},{default:o((()=>[t(P,{ref_key:"table",ref:s,loading:m(p),"onUpdate:loading":r[3]||(r[3]=e=>b(p)?p.value=e:null),columns:m(_),"onUpdate:columns":r[4]||(r[4]=e=>b(_)?_.value=e:null),paginate:m(k),"onUpdate:paginate":r[5]||(r[5]=e=>b(k)?k.value=e:null),style:{width:"100%",height:"100%",overflow:"auto"},columnPresetResizable:!0,tableLayout:"auto",loadData:m(S),bodyMinRows:!0,immediate:!1,border:!1,scroll:m(g),sticky:m(f),rowKey:"resourceId"},{bodyerCell:o((({column:e,record:t,value:o,groupIndex:s})=>["serial"===e.key?(l(),a("span",Qa,w(s+1),1)):C("",!0),["title","resourceName","component","sort"].includes(e.key)?(l(),x(n,{key:1,status:m(v),"onUpdate:status":r[0]||(r[0]=e=>b(v)?v.value=e:null),cellStyle:y,text:String(o??""),empty:"无",onChange:l=>I(t,e.key,l.value),onConfirm:e=>O(t)},null,8,["status","text","onChange","onConfirm"])):C("",!0),["redirect","path"].includes(e.key)?(l(),x(d,{key:2,status:m(v),"onUpdate:status":r[1]||(r[1]=e=>b(v)?v.value=e:null),cellStyle:y,text:String(o??""),empty:"无",onChange:l=>I(t,e.key,l.value),onConfirm:e=>O(t)},null,8,["status","text","onChange","onConfirm"])):C("",!0),["hideChildInMenu","hideInMenu","allowCache","activity"].includes(e.key)?(l(),x(A,{key:3,checked:o,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"是",unCheckedChildren:"否",onChange:l=>((e,l,a)=>{I(e,l,a),O(e)})(t,e.key,l)},null,8,["checked","onChange"])):C("",!0),"icon"===e.key?(l(),x(j,{key:4,status:m(v),"onUpdate:status":r[2]||(r[2]=e=>b(v)?v.value=e:null),cellStyle:y,text:String(o??""),allowClear:"",empty:"无",onChange:l=>I(t,e.key,l.value),onConfirm:e=>O(t)},null,8,["status","text","onChange","onConfirm"])):C("",!0)])),_:1},8,["loading","columns","paginate","loadData","scroll","sticky"])])),_:1}),t(Ka,{ref_key:"menuDrawer",ref:i,onSubmitted:T,onDeleted:T},null,512)])}}}),[["__scopeId","data-v-41553882"]]),$a=Object.freeze(Object.defineProperty({__proto__:null,default:Xa},Symbol.toStringTag,{value:"Module"})),Ja={class:"resource-tree-menu-container"},Za=Je(e({name:"ResourceTreeMenu",inheritAttrs:!1,__name:"TreeMenu",emits:["linkage"],setup(e,{emit:r}){const s={flex:"0 0 auto",overflow:"hidden"},i={flex:"1 1 auto",overflow:"hidden",position:"relative"},d=n({key:"resourceId",title:"title",children:"children"}),u=r,c=n(null),p=n(null),v=n([]),y=n(!1),f=()=>{if(!y.value){y.value=!0;const e=pe({resourceType:"m"}).then((e=>{if("0000"!==e.code)return H.error("菜单资源加载失败"),Promise.reject();v.value=e.result,S((()=>b()))}));return e.finally((()=>{y.value=!1})),e}},g=()=>{var e;null==(e=c.value)||e.doTreeAllCollapsed()},b=()=>{var e;null==(e=c.value)||e.doTreeAllExpanded()},_=Ve((e=>{u("linkage",e.selectedNode)})),k=e=>{var l;null==(l=p.value)||l.doAdd({parentId:e.resourceId})},x=e=>{var l;null==(l=p.value)||l.doEdit(e)},C=e=>{L.confirm({title:"是否确认删除该菜单?",content:"删除菜单会导致相关页面丢失，请慎重考虑!",cancelText:"取消",okText:"删除",okType:"danger",onOk:()=>{var l;null==(l=p.value)||l.doDel([e])}})};return f(),(e,r)=>{const n=Oe,u=z,w=ze,S=Fe,I=Re,T=Me,A=h("STree"),j=U;return l(),a("section",Ja,[t(j,{title:"菜单资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:s,bodyStyle:i,bordered:!1},{default:o((()=>[t(A,{ref_key:"tree",ref:c,loading:m(y),treeData:m(v),replaceFields:m(d),allowCheckedLevel:2,allowSelectedLevel:2,selectable:!0,checkable:!1,blockNode:!0,showIcon:!1,showLine:!0,tooltip:!0,sticky:!0,bgColor:"#ffffff",onSelect:m(_)},{titleRootButton:o((e=>[t(u,{type:"link",size:"small",onClick:O((l=>k(e)),["stop"])},{icon:o((()=>[t(n)])),_:2},1032,["onClick"]),t(u,{type:"link",size:"small",onClick:O(g,["stop"])},{icon:o((()=>[t(w)])),_:1}),t(u,{type:"link",size:"small",onClick:O(b,["stop"])},{icon:o((()=>[t(S)])),_:1})])),titleParentButton:o((e=>[t(u,{type:"link",size:"small",onClick:O((l=>k(e)),["stop"])},{icon:o((()=>[t(n)])),_:2},1032,["onClick"]),t(u,{type:"link",size:"small",onClick:O((l=>x(e)),["stop"])},{icon:o((()=>[t(I)])),_:2},1032,["onClick"]),t(u,{type:"link",size:"small",style:{color:"#f44848"},onClick:O((l=>C(e)),["stop"])},{icon:o((()=>[t(T)])),_:2},1032,["onClick"])])),titleLeafButton:o((e=>[t(u,{type:"link",size:"small",onClick:O((l=>k(e)),["stop"])},{icon:o((()=>[t(n)])),_:2},1032,["onClick"]),t(u,{type:"link",size:"small",onClick:O((l=>x(e)),["stop"])},{icon:o((()=>[t(I)])),_:2},1032,["onClick"]),t(u,{type:"link",size:"small",style:{color:"#f44848"},onClick:O((l=>C(e)),["stop"])},{icon:o((()=>[t(T)])),_:2},1032,["onClick"])])),_:1},8,["loading","treeData","replaceFields","onSelect"])])),_:1}),t(Ka,{ref_key:"menuDrawer",ref:p,onSubmitted:f,onDeleted:f},null,512)])}}}),[["__scopeId","data-v-ac0438f2"]]),et=Object.freeze(Object.defineProperty({__proto__:null,default:Za},Symbol.toStringTag,{value:"Module"})),lt={class:"section-container"},at={class:"section-left-tree"},tt={class:"section-right-container"},ot=Je(e({name:"ResourceManage",inheritAttrs:!1,__name:"ResourceManage",setup(e){I((e=>({"645fa7f4":m(d).layoutViewStyle.minHeight})));const r=n({}),s=n(null),i=n(!1),d=ne(),c=e=>{r.value=e,S((()=>{var l;e.resourceId||null==(l=s.value)||l.doTableClear(),e.resourceId&&(s.value.queryParams.parentId=e.resourceId,s.value.doTableRefresh())}))};return(e,n)=>{const d=Pe,p=Ne,v=z;return l(),a("section",lt,[u("div",{class:"section-left-container",style:f({width:m(i)?"0":"334px"})},[u("div",at,[t(Za,{ref:"treeMenu",onLinkage:c},null,512)])],4),u("div",tt,[(l(),x(A(["PageView","RouteView"].includes(m(r).component)?Xa:ja),{ref_key:"refTable",ref:s,parentNode:m(r)},null,8,["parentNode"])),t(v,{type:"link",class:"section-tree-collapse",onClick:n[0]||(n[0]=O((e=>i.value=!m(i)),["stop"]))},{icon:o((()=>[m(i)?(l(),x(d,{key:0})):C("",!0),m(i)?C("",!0):(l(),x(p,{key:1}))])),_:1})])])}}}),[["__scopeId","data-v-24826702"]]),rt=Object.freeze(Object.defineProperty({__proto__:null,default:ot},Symbol.toStringTag,{value:"Module"})),nt={class:"role-query-container"},st={class:"flex-row-auto"},it={class:"flex-row-none"},dt={class:"flex-row-auto"},ut={style:{flex:"1 1 auto"}},ct={style:{flex:"0 0 auto"}},pt=(e=>(c("data-v-9f27495e"),e=e(),p(),e))((()=>u("span",null,"新增",-1))),vt={key:0,class:"form-inline-more"},yt={class:"flex-row-none",style:{width:"210px"}},mt={class:"flex-row-auto"},ft=Je(e({name:"RoleQuery",inheritAttrs:!1,__name:"RoleQuery",emits:["addRecord","queryTable"],setup(e,{emit:s}){const i=n(!1),c=s,p=D(),v=n({roleName:"",activity:""}),y=d((()=>{var e;return(null==(e=p.componentSize)?void 0:e.value)??"middle"})),g=()=>{c("addRecord")},h=()=>{c("queryTable",v.value)},b=()=>{i.value=!i.value};return(e,n)=>{const s=Ae,d=z,c=Y,p=q,w=je,S=Oe,I=E,O=B,T=F,A=_("action");return l(),a("section",nt,[t(T,{layout:"inline"},{default:o((()=>[u("div",st,[u("div",it,[t(p,{label:"组织/部门",style:f({width:"large"===m(y)?"385px":"middle"===m(y)?"345px":"310px"})},{default:o((()=>[t(c,{value:m(v).roleName,"onUpdate:value":n[0]||(n[0]=e=>m(v).roleName=e),placeholder:"请输入角色名",allowClear:"",onSearch:h},{enterButton:o((()=>[t(d,null,{icon:o((()=>[t(s,{style:{color:"var(--ant-primary-color)"}})])),_:1})])),_:1},8,["value"])])),_:1},8,["style"])]),u("div",dt,[u("div",ut,[t(d,{onClick:b},{icon:o((()=>[t(w,{style:{color:"var(--ant-primary-color)"}})])),_:1})]),u("div",ct,[k((l(),x(d,{type:"primary",onClick:g},{icon:o((()=>[t(S)])),default:o((()=>[pt])),_:1})),[[A,void 0,"add"]])])])]),m(i)?(l(),a("div",vt,[u("div",yt,[t(p,{label:"组织状态",style:{"margin-bottom":"0"}},{default:o((()=>[t(O,{value:m(v).activity,"onUpdate:value":n[1]||(n[1]=e=>m(v).activity=e),placeholder:"请选择角色状态",onChange:h},{default:o((()=>[t(I,{value:""},{default:o((()=>[r(" 全部 ")])),_:1}),t(I,{value:"Y"},{default:o((()=>[r(" 启用 ")])),_:1}),t(I,{value:"N"},{default:o((()=>[r(" 禁用 ")])),_:1})])),_:1},8,["value"])])),_:1})]),u("div",mt,[t(d,{type:"primary",style:{margin:"0 8px"},onClick:h},{default:o((()=>[r(" 查询 ")])),_:1}),t(d,{style:{margin:"0 8px"},onClick:n[2]||(n[2]=e=>{return l=!0,v.value.roleName="",v.value.activity="",void(!0===l&&h());var l})},{default:o((()=>[r(" 重置 ")])),_:1})])])):C("",!0)])),_:1})])}}}),[["__scopeId","data-v-9f27495e"]]),gt=Object.freeze(Object.defineProperty({__proto__:null,default:ft},Symbol.toStringTag,{value:"Module"})),ht={class:"role-resource-drawer-container"},bt={class:"flex-row-auto",style:{width:"100%",height:"calc(100% - 55px)"}},_t={class:"flex-row-none",style:{width:"310px",height:"100%","margin-right":"24px"}},kt={class:"s-tree-title-button always-show"},xt={class:"flex-row-auto",style:{width:"100%",height:"100%"}},Ct={class:"resource-button-container"},wt={class:"group-header"},St={class:"group-content"},It={class:"drawer-body-footer"},Ot={class:"drawer-body-footer-fixed"},Tt=Je(e({name:"RoleResource",inheritAttrs:!1,__name:"RoleResource",emits:["submitted","closed"],setup(e,{expose:s,emit:i}){const d=i,c=n(!1),p=n(""),v=n(""),y=n({}),f=n({tree:!1,button:!1,submitting:!1}),g=n(null),_=n([]),k=n([]),C={key:"value",title:"label"},I=n([]),T=n([]),A=n([]),N=async e=>{f.value.button||(f.value.button=!0);const l=ee("",e.map((e=>({roleId:y.value.roleId,menuId:e})))),a=ye(l).then((e=>{if("0000"!==e.code)return e.message&&H.error(e.message),Promise.reject();I.value=e.result.map((e=>({...e,selected:e.selected.filter((l=>e.actionsOptions.some((e=>e.value===l))))}))),B()}));return a.finally((()=>{f.value.tree=!1,f.value.button=!1})),a},F=He((e=>{if(!g.value)return;const l=[...e.checkedKeys];k.value=l,N(l)})),M=e=>{const l=e.button,a=e.option;a||(l.options.every((e=>l.selected.includes(e.value)))?l.selected=[]:l.selected=l.options.map((e=>e.value))),a&&(l.selected.includes(a.value)?l.selected=l.selected.filter((e=>e!==a.value)):l.selected.push(a.value)),A.value=T.value.flatMap((e=>e.selected))},q=e=>e.options.every((l=>e.selected.includes(l.value))),D=e=>!e.options.every((l=>e.selected.includes(l.value)))&&e.options.some((l=>e.selected.includes(l.value))),Y=()=>{var e;null==(e=g.value)||e.doTreeAllCollapsed()},E=()=>{var e;null==(e=g.value)||e.doTreeAllExpanded()},B=()=>{I.value=I.value.filter((e=>e.actionsOptions&&e.actionsOptions.length>0&&k.value.some((l=>l===e.id)))),I.value.sort(((e,l)=>k.value.findIndex((l=>l===e.id))-k.value.findIndex((e=>e===l.id)))),T.value=I.value.map((e=>{const l=g.value.pickMatchTreeNode(e.id),a=g.value.pickUpperTreeNodes(e.id);return e.actionsOptions||(e.actionsOptions=[]),e.selected||(e.selected=[]),{menu:l,titles:[...a.map((e=>e.label)),l.label],options:e.actionsOptions,selected:e.selected,id:e.id}})),A.value=T.value.flatMap((e=>e.selected))},G=()=>{c.value&&(c.value=!1,p.value="",v.value="",y.value={},f.value={tree:!1,button:!1,submitting:!1},_.value=[],k.value=[],I.value=[],T.value=[],A.value=[],d("closed"))};return s({doClose:G,doOpen:e=>{c.value=!0,p.value="资源配置",v.value="update",y.value=e,f.value={tree:!1,button:!1,submitting:!1}}}),(e,n)=>{const s=ze,i=z,v=Fe,I=h("STree"),B=U,K=V,L=X,J=$,Z=Q,ee=W;return l(),a("section",ht,[t(ee,{open:m(c),title:m(p),width:"100%",zIndex:1010,maskClosable:!0,bodyStyle:{height:"calc(100% - 55px)",padding:"15px"},contentWrapperStyle:{"max-width":"1180px"},onAfterOpenChange:n[3]||(n[3]=()=>m(c)&&(async()=>(f.value.tree||(f.value.tree=!0),f.value.button||(f.value.button=!0),ve({roleId:y.value.roleId}).then((e=>{if("0000"!==e.code)return e.message&&H.error(e.message),Promise.reject();_.value=e.result.treeNodes,k.value=e.result.treeSelect,S((()=>{var e;null==(e=g.value)||e.doTreeAllExpanded()})),N([...k.value])}))))()),onClose:n[4]||(n[4]=e=>G())},{default:o((()=>[u("div",bt,[u("div",_t,[t(B,{title:"菜单资源",style:{display:"flex","flex-flow":"column nowrap",width:"100%",height:"100%"},bodyStyle:{width:"100%",height:"100%",flex:"1 1 auto",padding:"15px 24px",overflow:"auto",position:"relative"},headStyle:{flex:"0 0 auto",overflow:"hidden"}},{default:o((()=>[t(I,{ref_key:"tree",ref:g,checkedKeys:m(k),"onUpdate:checkedKeys":n[0]||(n[0]=e=>b(k)?k.value=e:null),loading:m(f).tree,treeData:m(_),replaceFields:C,allowCheckedLevel:2,allowSelectedLevel:2,allowSelectToCheck:!0,allowUnSelected:!0,allowUnChecked:!0,selectable:!1,checkedMode:"link",checkable:!0,showIcon:!1,showLine:!0,tooltip:!0,onCheck:m(F)},{titleRootButton:o((()=>[u("span",kt,[t(i,{ghost:"",size:"small",type:"primary",style:{margin:"0 3px"},onClick:O(Y,["stop"])},{icon:o((()=>[t(s)])),_:1}),t(i,{ghost:"",size:"small",type:"primary",style:{margin:"0 3px"},onClick:O(E,["stop"])},{icon:o((()=>[t(v)])),_:1})])])),_:1},8,["checkedKeys","loading","treeData","onCheck"])])),_:1})]),u("div",xt,[t(B,{title:"按钮资源",style:{display:"flex","flex-flow":"column nowrap",width:"100%",height:"100%"},bodyStyle:{width:"100%",height:"100%",flex:"1 1 auto",padding:"15px 24px",overflow:"auto",position:"relative"},headStyle:{flex:"0 0 auto",overflow:"hidden"}},{default:o((()=>[t(Z,{spinning:m(f).button},{default:o((()=>[u("div",Ct,[(l(!0),a(j,null,P(m(T),(e=>(l(),a("div",{key:e.id,class:"resource-button-group"},[u("div",wt,[t(K,{style:{margin:"0 6px 0 4px"},checked:q(e),indeterminate:D(e),onChange:l=>M({button:e,option:null})},null,8,["checked","indeterminate","onChange"]),t(J,null,{default:o((()=>[(l(!0),a(j,null,P(e.titles,(e=>(l(),x(L,{key:e},{default:o((()=>[r(w(e),1)])),_:2},1024)))),128))])),_:2},1024)]),u("div",St,[(l(!0),a(j,null,P(e.options,(n=>(l(),a("div",{key:n.value,class:"group-checkbox"},[t(K,{title:n.label,checked:e.selected.includes(n.value),onChange:l=>M({button:e,option:n})},{default:o((()=>[r(w(n.label),1)])),_:2},1032,["title","checked","onChange"])])))),128))])])))),128))])])),_:1},8,["spinning"])])),_:1})])]),u("div",It,[u("div",Ot,[t(i,{onClick:n[1]||(n[1]=e=>G())},{default:o((()=>[r(" 取消 ")])),_:1}),t(i,{type:"primary",loading:m(f).submitting,onClick:n[2]||(n[2]=e=>(()=>{const e=y.value.roleId,l=[...k.value,...A.value].join(",");f.value.submitting||(f.value.submitting=!0);const a=me({roleId:e,resourceIds:l}).then((e=>{if("0000"!==e.code)return R.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);R.success({message:"系统消息",description:"修改成功"}),d("submitted"),G()}));return a.finally((()=>{f.value.submitting=!1})),a})())},{default:o((()=>[r(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["open","title","bodyStyle"])])}}}),[["__scopeId","data-v-6b95dad1"]]),At=Object.freeze(Object.defineProperty({__proto__:null,default:Tt},Symbol.toStringTag,{value:"Module"})),jt={class:"role-table-container"},Pt={key:0},Nt=["onClick"],zt=["onClick"],Ft=Je(e({name:"RoleTable",inheritAttrs:!1,__name:"RoleTable",emits:["editRecord"],setup(e,{expose:r,emit:s}){const i=n({roleName:"",activity:""}),d=n({dataFlag:[{label:"用户级",value:"0"},{label:"部门级",value:"1"},{label:"公司级",value:"2"}]}),c=s,p=n(null),v=n(null),y=n(!1),f={container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",maxWidth:"200px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}},g=De({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),_=Ye({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),k=Ee([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"角色名称",dataIndex:"roleName"},{title:"数据范围",dataIndex:"dataFlag"},{title:"角色状态",dataIndex:"activity"},{title:"操作",dataIndex:"action",align:"center",width:120}]),S=Be({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),I=Ge((e=>{const l=ee("",i.value,e.paginate,e.sorter);return ge(l).then((e=>"0000"!==e.code?(R.error({message:"系统消息",description:e.message||"用户角色查询失败!"}),Promise.reject(e)):e))})),T=(e,l,a)=>{var t;e[l]=a,null==(t=p.value)||t.update()},A=e=>fe(ee("update",e)).then((e=>{if("0000"!==e.code)return R.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);R.success({message:"系统消息",description:"修改成功"}),P()})),P=()=>{var e;y.value=!1,null==(e=p.value)||e.refresh()};return r({doTableRefresh:P,queryParams:i}),(e,r)=>{const n=h("SEditCellInput"),s=h("SEditCellSelect"),i=G,P=h("STable");return l(),a("section",jt,[t(P,{ref_key:"table",ref:p,columns:m(k),"onUpdate:columns":r[2]||(r[2]=e=>b(k)?k.value=e:null),paginate:m(S),"onUpdate:paginate":r[3]||(r[3]=e=>b(S)?S.value=e:null),columnPresetResizable:!0,loadData:m(I),bodyMinRows:!0,immediate:!0,border:!1,scroll:m(_),sticky:m(g),rowKey:"roleId"},{bodyerCell:o((({column:e,record:t,value:o,groupIndex:p})=>["serial"===e.key?(l(),a("span",Pt,w(p+1),1)):C("",!0),"roleName"===e.key?(l(),x(n,{key:1,status:m(y),"onUpdate:status":r[0]||(r[0]=e=>b(y)?y.value=e:null),cellStyle:f,text:o,onChange:l=>T(t,e.key,l.value),onConfirm:e=>A(t)},null,8,["status","text","onChange","onConfirm"])):C("",!0),"dataFlag"===e.key?(l(),x(s,{key:2,status:m(y),"onUpdate:status":r[1]||(r[1]=e=>b(y)?y.value=e:null),cellStyle:f,text:o,options:m(d).dataFlag,onChange:l=>T(t,e.key,l.value),onConfirm:e=>A(t)},null,8,["status","text","options","onChange","onConfirm"])):C("",!0),"activity"===e.key?(l(),x(i,{key:3,checked:o,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{T(e,l,a),A(e)})(t,"activity",e)},null,8,["checked","onChange"])):C("",!0),"action"===e.key?(l(),a(j,{key:4},[u("a",{href:"javascript: void(0)",style:{display:"inline-block",margin:"0 7px","font-weight":"500"},onClick:O((e=>(e=>{var l;null==(l=v.value)||l.doOpen(e)})(t)),["stop"])}," 资源配置 ",8,Nt),u("a",{href:"javascript: void(0)",style:{display:"inline-block",margin:"0 7px","font-weight":"500"},onClick:e=>(e=>{c("editRecord",e)})(t)}," 修改 ",8,zt)],64)):C("",!0)])),_:1},8,["columns","paginate","loadData","scroll","sticky"]),t(Tt,{ref_key:"roleResource",ref:v,onSubmitted:()=>{}},null,512)])}}}),[["__scopeId","data-v-047e428e"]]),Rt=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"})),Mt={class:"role-form-container"},qt=Je(e({name:"RoleForm",inheritAttrs:!1,__name:"RoleForm",props:{disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:o}){const r=n(null),s=e,i=d((()=>s.loading)),u=n({}),c=n(""),p=We([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"roleName",field:"roleName",label:"角色名称",props:{rows:1,autoSize:!0,placeholder:"请输入角色名称"}},{type:"ASelect",slot:"dataFlag",field:"dataFlag",label:"数据范围",props:{placeholder:"请选择数据范围",options:[{label:"用户级",value:"0"},{label:"部门级",value:"1"},{label:"公司级",value:"2"}]}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"状态信息",border:!0},{type:"ASwitch",slot:"activity",field:"activity",label:"角色状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),v=Ke({roleName:[{required:!0,message:"请输入角色名称"}],dataFlag:[{required:!0,message:"请选择数据范围"}]}),y=Le({gutter:8,xs:24});return o({validateFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.validateFields(...e).then((()=>({action:c.value,record:u.value})))},resetFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{c.value=e,u.value=l},doClose:()=>{c.value="",u.value={}}}),(e,o)=>{const n=h("SForm");return l(),a("section",Mt,[t(n,{ref_key:"form",ref:r,modelValue:m(u),"onUpdate:modelValue":o[0]||(o[0]=e=>b(u)?u.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:m(i),groups:m(p),rules:m(v),grid:m(y)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-ec4d0c9b"]]),Vt=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"})),Ut={class:"role-drawer-container"},Dt={class:"drawer-body-footer"},Yt={class:"drawer-body-footer-fixed"},Et=e({name:"RoleDrawer",inheritAttrs:!1,__name:"RoleDrawer",emits:["submitted","closed"],setup(e,{expose:s,emit:i}){const d=i,c=n(null),p=n(""),v=n(""),y=n({}),f=n(!1),g=n(!1),h=n(!1),b=n(!1),_=n(!1),k=()=>{var e;_.value&&(p.value="",v.value="",y.value={},g.value=!1,f.value=!1,h.value=!1,b.value=!1,_.value=!1,null==(e=c.value)||e.doClose(),d("closed"))};return s({doEdit:e=>{p.value="修改角色",v.value="update",g.value=!1,f.value=!1,b.value=!1,_.value=!0,y.value=Object.assign({activity:"Y"},e),S((()=>{var e;null==(e=c.value)||e.doCreate("update",y.value)}))},doAdd:e=>{p.value="添加角色",v.value="insert",g.value=!1,f.value=!1,b.value=!0,_.value=!0,y.value=Object.assign({activity:"Y"},e),S((()=>{var e;null==(e=c.value)||e.doCreate("insert",y.value)}))}}),(e,n)=>{const s=z,i=W;return l(),a("section",Ut,[t(i,{width:"400",open:m(_),title:m(p),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:n[2]||(n[2]=e=>k())},{default:o((()=>[t(qt,{ref_key:"form",ref:c,disabled:m(g),readonly:m(f),loading:m(h)},null,8,["disabled","readonly","loading"]),u("div",Dt,[u("div",Yt,[t(s,{onClick:n[0]||(n[0]=e=>k())},{default:o((()=>[r(" 取消 ")])),_:1}),t(s,{type:"primary",loading:m(h),onClick:n[1]||(n[1]=e=>{var l,a;null==(a=null==(l=c.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!h.value){h.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},t="insert"===e?he(ee(e,l)):fe(ee(e,l));return t.finally((()=>{h.value=!1})),t.then((e=>{"0000"!==e.code?R.error({message:"系统消息",description:e.message||a.error}):R.success({message:"系统消息",description:a.success});const t="0000"!==e.code?Promise.reject(e):l;return d("submitted"),k(),t}))}}))})},{default:o((()=>[r(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["open","title"])])}}}),Bt=Object.freeze(Object.defineProperty({__proto__:null,default:Et},Symbol.toStringTag,{value:"Module"})),Gt={class:"section-container"},Wt={class:"section-query-container"},Kt={class:"section-table-container"},Lt=Je(e({name:"RoleManage",inheritAttrs:!1,__name:"RoleManage",setup(e){I((e=>({cb1b8c4c:m(v).layoutViewStyle.minHeight})));const r={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},s={flex:"0 0 auto",overflow:"hidden"},i={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},d=n(null),c=n(null),p=n(null),v=ne(),y=(e={})=>{d.value&&(d.value.queryParams={...d.value.queryParams,...e},d.value.doTableRefresh())},f=e=>{var l;null==(l=p.value)||l.doEdit(e)},g=()=>{var e;null==(e=p.value)||e.doAdd({})};return(e,n)=>{const v=U;return l(),a("section",Gt,[t(v,{style:r,headStyle:s,bodyStyle:i,bordered:!1},{default:o((()=>[u("div",Wt,[t(ft,{ref_key:"query",ref:c,onQueryTable:y,onAddRecord:g},null,512)]),u("div",Kt,[t(Ft,{ref_key:"table",ref:d,onEditRecord:f},null,512)])])),_:1}),t(Et,{ref_key:"drawer",ref:p,onSubmitted:y},null,512)])}}}),[["__scopeId","data-v-41788c95"]]),Ht=Object.freeze(Object.defineProperty({__proto__:null,default:Lt},Symbol.toStringTag,{value:"Module"})),Qt={class:"user-query-container"},Xt={class:"flex-row-auto"},$t={class:"flex-row-none"},Jt={class:"flex-row-auto"},Zt={style:{flex:"1 1 auto"}},eo={style:{flex:"0 0 auto"}},lo=(e=>(c("data-v-0da62ca2"),e=e(),p(),e))((()=>u("span",null,"新增",-1))),ao={key:0,class:"form-inline-more"},to={class:"flex-row-none",style:{width:"210px"}},oo={class:"flex-row-auto"},ro=Je(e({name:"UserQuery",inheritAttrs:!1,__name:"UserQuery",emits:["addRecord","queryTable"],setup(e,{emit:s}){const i=n(!1),c=s,p=D(),v=n({userNo:"",activity:""}),y=d((()=>{var e;return(null==(e=p.componentSize)?void 0:e.value)??"middle"})),g=()=>{c("addRecord")},h=()=>{c("queryTable",v.value)},b=()=>{i.value=!i.value};return(e,n)=>{const s=Ae,d=z,c=Y,p=q,w=je,S=Oe,I=E,O=B,T=F,A=_("action");return l(),a("section",Qt,[t(T,{layout:"inline"},{default:o((()=>[u("div",Xt,[u("div",$t,[t(p,{label:"组织/部门",style:f({width:"large"===m(y)?"385px":"middle"===m(y)?"345px":"310px"})},{default:o((()=>[t(c,{value:m(v).userNo,"onUpdate:value":n[0]||(n[0]=e=>m(v).userNo=e),placeholder:"请输入用户名",allowClear:"",onSearch:h},{enterButton:o((()=>[t(d,null,{icon:o((()=>[t(s,{style:{color:"var(--ant-primary-color)"}})])),_:1})])),_:1},8,["value"])])),_:1},8,["style"])]),u("div",Jt,[u("div",Zt,[t(d,{onClick:b},{icon:o((()=>[t(w,{style:{color:"var(--ant-primary-color)"}})])),_:1})]),u("div",eo,[k((l(),x(d,{type:"primary",onClick:g},{icon:o((()=>[t(S)])),default:o((()=>[lo])),_:1})),[[A,void 0,"add"]])])])]),m(i)?(l(),a("div",ao,[u("div",to,[t(p,{label:"组织状态",style:{"margin-bottom":"0"}},{default:o((()=>[t(O,{value:m(v).activity,"onUpdate:value":n[1]||(n[1]=e=>m(v).activity=e),placeholder:"请选择角色状态",onChange:h},{default:o((()=>[t(I,{value:""},{default:o((()=>[r(" 全部 ")])),_:1}),t(I,{value:"Y"},{default:o((()=>[r(" 启用 ")])),_:1}),t(I,{value:"N"},{default:o((()=>[r(" 禁用 ")])),_:1})])),_:1},8,["value"])])),_:1})]),u("div",oo,[t(d,{type:"primary",style:{margin:"0 8px"},onClick:h},{default:o((()=>[r(" 查询 ")])),_:1}),t(d,{style:{margin:"0 8px"},onClick:n[2]||(n[2]=e=>{return l=!0,v.value.userNo="",v.value.activity="",void(!0===l&&h());var l})},{default:o((()=>[r(" 重置 ")])),_:1})])])):C("",!0)])),_:1})])}}}),[["__scopeId","data-v-0da62ca2"]]),no=Object.freeze(Object.defineProperty({__proto__:null,default:ro},Symbol.toStringTag,{value:"Module"})),so={class:"user-table-container"},io={key:0},uo=["onClick"],co=Je(e({name:"UserTable",inheritAttrs:!1,__name:"UserTable",props:{presetOptions:{}},emits:["editRecord"],setup(e,{expose:s,emit:i}){const d=n({userNo:"",activity:""}),u=e,c=i,p=n(null),v=De({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),y=Ye({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),f=Ee([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"用户名",dataIndex:"userNo",ellipsis:!0,width:130},{title:"用户姓名",dataIndex:"userName",ellipsis:!0,width:130},{title:"手机号",dataIndex:"mobilePhone",ellipsis:!0,width:120},{title:"职位",dataIndex:"postName"},{title:"所属组织",dataIndex:"orgId"},{title:"所属部门",dataIndex:"deptId"},{title:"可用状态",dataIndex:"activity",align:"center",width:80},{title:"操作",dataIndex:"action",align:"center",width:80}]),g=Be({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),_=Ge((e=>{const l=ee("",d.value,e.paginate,e.sorter);return _e(l).then((e=>"0000"!==e.code?(R.error({message:"系统消息",description:e.message||"用户查询查询失败!"}),Promise.reject(e)):e))})),k=(e,l,a)=>{var t;e[l]=a,null==(t=p.value)||t.update()},S=e=>be(ee("update",e)).then((e=>{if("0000"!==e.code)return R.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);R.success({message:"系统消息",description:"修改成功"}),I()})),I=()=>{var e;null==(e=p.value)||e.refresh()};return s({doTableRefresh:I,queryParams:d}),(e,n)=>{const s=G,i=h("STable");return l(),a("section",so,[t(i,{ref_key:"table",ref:p,columns:m(f),"onUpdate:columns":n[0]||(n[0]=e=>b(f)?f.value=e:null),paginate:m(g),"onUpdate:paginate":n[1]||(n[1]=e=>b(g)?g.value=e:null),columnPresetResizable:!0,loadData:m(_),bodyMinRows:!0,immediate:!0,border:!1,scroll:m(y),sticky:m(v),rowKey:"id"},{bodyerCell:o((({column:e,record:t,value:o,groupIndex:n})=>["serial"===e.key?(l(),a("span",io,w(n+1),1)):C("",!0),"orgId"===e.key?(l(),a(j,{key:1},[r(w(m(ae)(u.presetOptions.orgTree,o,["shortName","label"])),1)],64)):C("",!0),"deptId"===e.key?(l(),a(j,{key:2},[r(w(m(ae)(u.presetOptions.deptId,o)),1)],64)):C("",!0),"activity"===e.key?(l(),x(s,{key:3,checked:o,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{k(e,l,a),S(e)})(t,"activity",e)},null,8,["checked","onChange"])):C("",!0),"action"===e.key?(l(),a("a",{key:4,href:"javascript: void(0)",style:{"font-weight":"500",display:"inline-block",margin:"0 7px"},onClick:e=>(e=>{c("editRecord",e)})(t)}," 修改 ",8,uo)):C("",!0)])),_:1},8,["columns","paginate","loadData","scroll","sticky"])])}}}),[["__scopeId","data-v-b96e849b"]]),po=Object.freeze(Object.defineProperty({__proto__:null,default:co},Symbol.toStringTag,{value:"Module"})),vo={class:"user-drawer-form-container"},yo=Je(e({name:"UserForm",inheritAttrs:!1,__name:"UserForm",props:{presetOptions:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:o}){const r=n(null),s=e,i=d((()=>s.loading)),u=n({}),c=n(""),p=We([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"userNo",field:"userNo",label:"用户名",props:{rows:1,autoSize:!0,placeholder:"请输入用户名"}},{type:"AInputPassword",slot:"password",field:"password",label:"用户密码",props:{placeholder:"请输入用户密码"}},{type:"AInput",slot:"userName",field:"userName",label:"用户姓名",props:{placeholder:"请输入用户姓名"}},{type:"AInput",slot:"mobilePhone",field:"mobilePhone",label:"手机号码",props:{placeholder:"请输入手机号码"}},{type:"AInput",slot:"idCard",field:"idCard",label:"身份证号",props:{placeholder:"请输入身份证号"}},{type:"ATreeSelect",slot:"orgId",field:"orgId",label:"所属组织",props:{popupClassName:"text-ellipsis",dropdownStyle:{maxHeight:"300px"},allowClear:!0,showSearch:!0,treeDefaultExpandAll:!0,dropdownMatchSelectWidth:!0,treeNodeFilterProp:"label",placeholder:"请选择所属组织",treeData:s.presetOptions.orgTree}},{type:"ASelect",slot:"deptId",field:"deptId",label:"所属部门",props:{allowClear:!0,placeholder:"请选择所属部门",options:s.presetOptions.deptId}},{type:"ASelect",slot:"roleId",field:"roleId",label:"所属角色",props:{mode:"multiple",placeholder:"请选择所属角色",allowClear:!0,fieldNames:{label:"roleName",value:"roleId"},options:s.presetOptions.roleId}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"状态信息",border:!0},{type:"ASwitch",slot:"activity",field:"activity",label:"用户状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),v=Ke({userNo:[{required:!0,message:"请输入用户名"}],password:Qe.password({message:"请输入用户密码",validator:"用户密码过短",pattern:/.{6,}/,required:!0}),userName:[{required:!0,message:"请输入用户姓名"}],mobilePhone:[{required:!0,message:"请输入手机号码"}],idCard:[{required:!0,message:"请输入身份证号"}],orgId:[{required:!0,message:"请选择所属组织"}],roleId:[{required:!0,message:"请选择所属角色"}]}),y=Le({gutter:8,xs:24});return o({validateFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.validateFields(...e).then((()=>({action:c.value,record:u.value})))},resetFields:(...e)=>{var l;return null==(l=r.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{c.value=e,u.value=l},doClose:()=>{c.value="",u.value={}}}),(e,o)=>{const n=h("SForm");return l(),a("section",vo,[t(n,{ref_key:"form",ref:r,modelValue:m(u),"onUpdate:modelValue":o[0]||(o[0]=e=>b(u)?u.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:m(i),groups:m(p),rules:m(v),grid:m(y)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-04e16522"]]),mo=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),fo={class:"user-drawer-container"},go={class:"drawer-body-footer"},ho={class:"drawer-body-footer-fixed"},bo=e({name:"UserDrawer",inheritAttrs:!1,__name:"UserDrawer",props:{presetOptions:{}},emits:["submitted","closed"],setup(e,{expose:s,emit:i}){const d=e,c=i,p=n(null),v=n(""),y=n(""),f=n({}),g=n(!1),h=n(!1),b=n(!1),_=n(!1),k=n(!1),x=()=>{var e;k.value&&(v.value="",y.value="",f.value={},h.value=!1,g.value=!1,b.value=!1,_.value=!1,k.value=!1,null==(e=p.value)||e.doClose(),c("closed"))};return s({doEdit:e=>{v.value="修改用户",y.value="update",h.value=!1,g.value=!1,_.value=!1,k.value=!0,f.value=Object.assign({activity:"Y"},e),S((()=>{var e;null==(e=p.value)||e.doCreate("update",f.value)}))},doAdd:e=>{v.value="新增用户",y.value="insert",h.value=!1,g.value=!1,_.value=!0,k.value=!0,f.value=Object.assign({activity:"Y"},e),S((()=>{var e;null==(e=p.value)||e.doCreate("insert",f.value)}))}}),(e,n)=>{const s=z,i=W;return l(),a("section",fo,[t(i,{width:"400",open:m(k),title:m(v),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:n[2]||(n[2]=e=>x())},{default:o((()=>[t(yo,{ref_key:"form",ref:p,presetOptions:d.presetOptions,disabled:m(h),readonly:m(g),loading:m(b)},null,8,["presetOptions","disabled","readonly","loading"]),u("div",go,[u("div",ho,[t(s,{onClick:n[0]||(n[0]=e=>x())},{default:o((()=>[r(" 取消 ")])),_:1}),t(s,{type:"primary",loading:m(b),onClick:n[1]||(n[1]=e=>{var l,a;null==(a=null==(l=p.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!b.value){b.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},t="insert"===e?ke(ee(e,l)):be(ee(e,l));return t.finally((()=>{b.value=!1})),t.then((e=>{"0000"!==e.code?R.error({message:"系统消息",description:e.message||a.error}):R.success({message:"系统消息",description:a.success});const t="0000"!==e.code?Promise.reject(e):l;return c("submitted"),x(),t}))}}))})},{default:o((()=>[r(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["open","title"])])}}}),_o=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),ko={class:"section-container"},xo={class:"section-query-container"},Co={class:"section-table-container"},wo=Je(e({name:"UserManage",inheritAttrs:!1,__name:"UserManage",setup(e){I((e=>({f6269532:m(y).layoutViewStyle.minHeight})));const r=n({orgTree:[],deptId:[],roleId:[]}),s={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},i={flex:"0 0 auto",overflow:"hidden"},d={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},c=n(null),p=n(null),v=n(null),y=ne(),f=(e={})=>{c.value&&(c.value.queryParams={...c.value.queryParams,...e},c.value.doTableRefresh())},g=e=>{var l;null==(l=v.value)||l.doEdit(e)},h=()=>{var e;null==(e=v.value)||e.doAdd({})};return se({id:"orgTree"}).then((e=>{if("0000"!==e.code)return Promise.reject();r.value.orgTree.splice(0),r.value.orgTree.push(...e.result)})),xe({id:"dept",sqlParams:{orgId:"",isAll:"1"}}).then((e=>{if("0000"!==e.code)return Promise.reject();r.value.deptId.splice(0),r.value.deptId.push(...e.result)})),Ce({activity:"Y"}).then((e=>{if("0000"!==e.code)return Promise.reject();r.value.roleId.splice(0),r.value.roleId.push(...e.result)})),(e,n)=>{const y=U;return l(),a("section",ko,[t(y,{style:s,headStyle:i,bodyStyle:d,bordered:!1},{default:o((()=>[u("div",xo,[t(ro,{ref_key:"query",ref:p,onQueryTable:f,onAddRecord:h},null,512)]),u("div",Co,[t(co,{ref_key:"table",ref:c,presetOptions:m(r),onEditRecord:g},null,8,["presetOptions"])])])),_:1}),t(bo,{ref_key:"drawer",ref:v,presetOptions:m(r),onSubmitted:f},null,8,["presetOptions"])])}}}),[["__scopeId","data-v-e4d715d0"]]),So=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"}));export{ua as B,_l as L,Fa as M,Cl as O,el as P,rt as R,et as T,no as U,ol as a,il as b,Rl as c,El as d,Wl as e,ea as f,sa as g,Ia as h,Pa as i,La as j,$a as k,gt as l,At as m,Rt as n,Vt as o,Bt as p,Ht as q,po as r,mo as s,_o as t,So as u};
