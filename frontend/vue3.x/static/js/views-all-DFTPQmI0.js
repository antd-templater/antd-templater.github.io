import{a0 as e,B as l,F as a,p as t,I as o,l as r,C as n,a1 as s,d as i,a2 as d,z as u,_ as c,c as p,s as v,t as y,M as m,K as f,S as g,H as h,G as b}from"./antd-design-all-oo9Tphy2.js";import{d as _,$ as k,a9 as x,f as C,S as w,D as S,k as I,Z as O,r as T,e as A,aa as j,ab as P,ac as z,ad as N,ae as F,u as R,af as M,o as q,U,E as V,c as D,s as Y,q as E,a0 as B,ag as G,ah as W,x as K,ai as L,A as H,R as Q,aj as X,F as $,ak as J}from"./vue-all-BT_XfqFG.js";import{c as Z,s as ee,t as le,v as ae,w as te,x as oe,y as re,z as ne,u as se,B as ie,C as de,E as ue,F as ce,G as pe,H as ve,I as ye,J as me,K as fe,L as ge,N as he,O as be,Q as _e,R as ke,S as xe,T as Ce,U as we}from"./bootstrap-Y478nqEJ.js";import{a3 as Se}from"./vendors-all-h_b8HQfl.js";import{Q as Ie,T as Oe,i as Te,V as Ae,_ as je,X as Pe,p as ze,o as Ne,t as Fe,s as Re,x as Me,Y as qe}from"./antd-design-icons-vue-DGpSSGYL.js";import{t as Ue,b as Ve,c as De,d as Ye,e as Ee,f as Be,g as Ge,h as We,j as Ke,k as Le,l as He,m as Qe,n as Xe}from"./antd-template-lib-BHshSahd.js";const $e={class:"page-container"},Je=_({name:"PageError403",__name:"PageError403",setup:a=>(a,t)=>{const o=l,r=e;return k(),x("div",$e,[C(r,{title:"403",status:"403",subTitle:"抱歉，您无权访问此页!"},{extra:w((()=>[C(o,{type:"primary",onClick:t[0]||(t[0]=e=>a.$router.push({path:"/index"}))},{default:w((()=>[S(" 返回首页 ")])),_:1})])),_:1})])}}),Ze=(e,l)=>{const a=e.__vccOpts||e;for(const[t,o]of l)a[t]=o;return a},el=Ze(Je,[["__scopeId","data-v-7cfb9f6e"]]),ll=Object.freeze(Object.defineProperty({__proto__:null,default:el},Symbol.toStringTag,{value:"Module"})),al={class:"page-container"},tl=_({name:"PageError404",__name:"PageError404",setup:a=>(a,t)=>{const o=l,r=e;return k(),x("div",al,[C(r,{title:"404",status:"404",subTitle:"抱歉，您访问的页面不存在!"},{extra:w((()=>[C(o,{type:"primary",onClick:t[0]||(t[0]=e=>a.$router.push({path:"/index"}))},{default:w((()=>[S(" 返回首页 ")])),_:1})])),_:1})])}}),ol=Ze(tl,[["__scopeId","data-v-95ca0d39"]]),rl=Object.freeze(Object.defineProperty({__proto__:null,default:ol},Symbol.toStringTag,{value:"Module"})),nl={class:"page-container"},sl=_({name:"PageError500",__name:"PageError500",setup:a=>(a,t)=>{const o=l,r=e;return k(),x("div",nl,[C(r,{title:"500",status:"500",subTitle:"抱歉，服务器反馈异常!"},{extra:w((()=>[C(o,{type:"primary",onClick:t[0]||(t[0]=e=>a.$router.push({path:"/index"}))},{default:w((()=>[S(" 返回首页 ")])),_:1})])),_:1})])}}),il=Ze(sl,[["__scopeId","data-v-aa383fdf"]]),dl=Object.freeze(Object.defineProperty({__proto__:null,default:il},Symbol.toStringTag,{value:"Module"})),ul=e=>(P("data-v-eb7b6fa9"),e=e(),z(),e),cl={class:"login-container"},pl={class:"main"},vl={class:"main-container"},yl=ul((()=>j("div",{class:"main-header"},[j("div",{class:"title"},[j("img",{src:ee,class:"logo",alt:"logo"}),j("span",null,"系统平台")]),j("div",{class:"description"},[j("span",null,"基于 Ant Design Vue v3.x 框架搭建")])],-1))),ml={class:"main-content"},fl={style:{padding:"1px",margin:"5px 0"}},gl={style:{padding:"1px"}},hl={style:{padding:"0 5px",overflow:"hidden"}},bl=ul((()=>j("div",{class:"footer"},[j("div",{class:"copyright"}," Copyright © 2023 Antd-Templater ")],-1))),_l=Ze(_({name:"Login",__name:"Login",setup(e){const s=I(!1),i=Z(),d=O(),u=T({username:"",password:"",passwordMd5:"",rememberMe:!0}),c=T({username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}]}),p=T({username:A((()=>"error"!==v.validateInfos.username.validateStatus)),password:A((()=>"error"!==v.validateInfos.password.validateStatus))}),v=a.useForm(u,c),y=async()=>{try{return await v.validate(),s.value=!0,u.passwordMd5=Se(u.password),i.login({...u,password:u.passwordMd5}).then((()=>{t.success({message:"系统提示",duration:.8,description:"欢迎回来",onClose:()=>{s.value=!1,d.push({path:"/"})}})})).catch((e=>{e.message&&t.error({message:"系统提示",duration:.8,description:e.message,onClose:()=>{s.value=!1}}),setTimeout((()=>{s.value=!1}),500)}))}catch{}};return(e,t)=>{const i=o,d=r,c=n,m=l,f=a;return k(),x("div",cl,[j("div",pl,[j("div",vl,[yl,j("div",ml,[C(f,null,{default:w((()=>[j("div",fl,[C(d,N(F(R(v).validateInfos.username)),{default:w((()=>[C(i,{value:R(u).username,"onUpdate:value":t[0]||(t[0]=e=>R(u).username=e),placeholder:"账号: admin",size:"large",type:"text",onPressEnter:y},{prefix:w((()=>[C(R(Ie),{style:M(R(p).username?{color:"#c0c0c0"}:{})},null,8,["style"])])),_:1},8,["value"])])),_:1},16)]),j("div",gl,[C(d,N(F(R(v).validateInfos.password)),{default:w((()=>[C(i,{value:R(u).password,"onUpdate:value":t[1]||(t[1]=e=>R(u).password=e),placeholder:"密码: 12345678",size:"large",type:"password",onPressEnter:y},{prefix:w((()=>[C(R(Oe),{style:M(R(p).password?{color:"#c0c0c0"}:{})},null,8,["style"])])),_:1},8,["value"])])),_:1},16)]),j("div",hl,[C(c,{checked:R(u).rememberMe,"onUpdate:checked":t[2]||(t[2]=e=>R(u).rememberMe=e)},{default:w((()=>[S(" 自动登录 ")])),_:1},8,["checked"])]),C(d,{style:{margin:"30px 0 0"}},{default:w((()=>[C(m,{size:"large",type:"primary",class:"login-button",loading:R(s),disabled:R(s),onClick:y},{default:w((()=>[S(" 登录 ")])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])])]),bl])}}}),[["__scopeId","data-v-eb7b6fa9"]]),kl=Object.freeze(Object.defineProperty({__proto__:null,default:_l},Symbol.toStringTag,{value:"Module"})),xl={class:"organize-tree-container"},Cl=Ze(_({name:"OrganizeTree",inheritAttrs:!1,__name:"OrganizeTree",emits:["queryTable","selectedNode","addRecord"],setup(e,{expose:a,emit:t}){const o={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},r={display:"flex",padding:"15px 10px",flexFlow:"column nowrap",flex:"1 1 auto",position:"relative",overflow:"auto"},n={flex:"0 0 auto",overflow:"hidden"},i=t,d=I(null),u=I([]),c=I(!1),p=I([]),v=I([]),y=I([]),m=I({children:"children",title:"title",key:"key"}),f=e=>{if(!c.value){c.value=!0;const e=[],l=[...y.value],a=[...v.value],t=new Set(["0",...p.value]);p.value=[],y.value=[],v.value=[];for(const o of t)e.push(b({key:o}).then((e=>({parent:"0"!==o?{key:o}:null,children:e||[]}))).catch((()=>{})));return Promise.all(e).then((e=>{var o,r,n,s;for(const l of e)l&&(null==(r=d.value)||r.reloadTreeNodes(l.children,null==(o=l.parent)?void 0:o.key));null==(n=d.value)||n.doTreeOnlyExpanded(l),null==(s=d.value)||s.doTreeSelected(a),p.value=[...t],c.value=!1}))}},g=Ve((e=>{var l,a;i("selectedNode",e.selectedNode),i("queryTable",{orgId:"Y"===(null==(l=e.selectedNode)?void 0:l.isOrg)?e.selectedNode.key:"",deptId:"N"===(null==(a=e.selectedNode)?void 0:a.isOrg)?e.selectedNode.key:""})})),h=De((e=>{p.value=[...e.loadedKeys]})),b=Ue((e=>{const l=le("",{orgId:e.key},null,null);return ae(l).then((e=>"0000"!==e.code?Promise.reject():e.result))}));return q((()=>{f()})),a({doRefresh:f}),(e,a)=>{const t=Te,p=l,_=Ae,S=U("STree"),I=s;return k(),x("section",xl,[C(I,{title:"组织列表",style:o,bodyStyle:r,headStyle:n,bordered:!1},{extra:w((()=>[C(p,{ghost:"",type:"primary",style:{margin:"0 5px"},onClick:a[0]||(a[0]=e=>{i("addRecord")})},{icon:w((()=>[C(t)])),_:1}),C(p,{ghost:"",type:"primary",style:{margin:"0 5px"},onClick:a[1]||(a[1]=e=>f())},{icon:w((()=>[C(_)])),_:1})])),default:w((()=>[C(S,{ref_key:"tree",ref:d,treeData:R(u),"onUpdate:treeData":a[2]||(a[2]=e=>V(u)?u.value=e:null),expandedKeys:R(y),"onUpdate:expandedKeys":a[3]||(a[3]=e=>V(y)?y.value=e:null),selectedKeys:R(v),"onUpdate:selectedKeys":a[4]||(a[4]=e=>V(v)?v.value=e:null),replaceFields:R(m),allowAutoExpandLoad:!0,allowAutoExpanded:!0,allowSelectedLevel:1,allowCheckedLevel:1,selectable:!0,checkable:!1,showIcon:!1,showLine:!1,tooltip:!0,blockNode:!0,loading:R(c),loadData:R(b),onChange:R(h),onSelect:R(g)},null,8,["treeData","expandedKeys","selectedKeys","replaceFields","loading","loadData","onChange","onSelect"])])),_:1})])}}}),[["__scopeId","data-v-02ee1541"]]),wl=Object.freeze(Object.defineProperty({__proto__:null,default:Cl},Symbol.toStringTag,{value:"Module"})),Sl={class:"organize-query-container"},Il={class:"flex-row-auto"},Ol={class:"flex-row-none"},Tl={class:"flex-row-auto"},Al={style:{flex:"1 1 auto"}},jl={style:{flex:"0 0 auto"}},Pl=(e=>(P("data-v-a32af090"),e=e(),z(),e))((()=>j("span",null,"新增",-1))),zl={key:0,class:"form-inline-more"},Nl={class:"flex-row-none",style:{width:"210px"}},Fl={class:"flex-row-auto"},Rl=Ze(_({name:"OrganizeQuery",inheritAttrs:!1,__name:"OrganizeQuery",emits:["addRecord","queryTable"],setup(e,{emit:t}){const o=t,n=I({title:"",activity:""}),s=D("configProvider",i),p=I(!1),v=()=>{o("addRecord")},y=()=>{o("queryTable",n.value)},m=()=>{p.value=!p.value};return(e,t)=>{const o=je,i=l,f=d,g=r,h=Pe,b=Te,_=u,I=c,O=a,T=Y("action");return k(),x("section",Sl,[C(O,{layout:"inline"},{default:w((()=>[j("div",Il,[j("div",Ol,[C(g,{label:"组织/部门",style:M({width:"large"===R(s).componentSize?"380px":"middle"===R(s).componentSize?"330px":"270px"})},{default:w((()=>[C(f,{value:R(n).title,"onUpdate:value":t[0]||(t[0]=e=>R(n).title=e),placeholder:"请输入组织/部门名称",allowClear:"",onSearch:y},{enterButton:w((()=>[C(i,null,{icon:w((()=>[C(o,{style:{color:"var(--ant-primary-color)"}})])),_:1})])),_:1},8,["value"])])),_:1},8,["style"])]),j("div",Tl,[j("div",Al,[C(i,{onClick:m},{icon:w((()=>[C(h,{style:{color:"var(--ant-primary-color)"}})])),_:1})]),j("div",jl,[E((k(),B(i,{type:"primary",onClick:v},{icon:w((()=>[C(b)])),default:w((()=>[Pl])),_:1})),[[T,void 0,"add"]])])])]),R(p)?(k(),x("div",zl,[j("div",Nl,[C(g,{label:"组织状态",style:{"margin-bottom":"0"}},{default:w((()=>[C(I,{value:R(n).activity,"onUpdate:value":t[1]||(t[1]=e=>R(n).activity=e),placeholder:"请选择组织状态",onChange:y},{default:w((()=>[C(_,{value:""},{default:w((()=>[S(" 全部 ")])),_:1}),C(_,{value:"Y"},{default:w((()=>[S(" 启用 ")])),_:1}),C(_,{value:"N"},{default:w((()=>[S(" 禁用 ")])),_:1})])),_:1},8,["value"])])),_:1})]),j("div",Fl,[C(i,{type:"primary",style:{margin:"0 8px"},onClick:y},{default:w((()=>[S(" 查询 ")])),_:1}),C(i,{style:{margin:"0 8px"},onClick:t[2]||(t[2]=e=>{return l=!0,n.value.title="",n.value.activity="",void(!0===l&&y());var l})},{default:w((()=>[S(" 重置 ")])),_:1})])])):G("",!0)])),_:1})])}}}),[["__scopeId","data-v-a32af090"]]),Ml=Object.freeze(Object.defineProperty({__proto__:null,default:Rl},Symbol.toStringTag,{value:"Module"})),ql={class:"organize-table-container"},Ul={key:0},Vl={key:1},Dl={key:2},Yl=["onClick"],El=Ze(_({name:"OrganizeTable",inheritAttrs:!1,__name:"OrganizeTable",props:{dictionary:{}},emits:["editRecord"],setup(e,{expose:l,emit:a}){const o=e,r=a,n=I(null),s=I({title:"",orgId:"",deptId:"",activity:""}),i=Ye({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),d=Ee({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),u=Be([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"名称",dataIndex:"title",tooltip:!0,fixed:"left"},{title:"简称",dataIndex:"orgShortName"},{title:"编码",dataIndex:"key"},{title:"上级单位",dataIndex:"parentOrgName",tooltip:!0},{title:"形态",dataIndex:"isOrg",width:100},{title:"可用状态",dataIndex:"activity",align:"center",width:90},{title:"操作",dataIndex:"action",align:"center",fixed:"right",width:80}]),c=Ge({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),v=We((e=>{const l=le("",s.value,e.paginate,e.sorter);return re(l).then((e=>"0000"!==e.code?(t.error({message:"系统消息",description:e.message||"组织机构查询失败!"}),Promise.reject(e)):e))})),y=e=>{var l;null==(l=n.value)||l.refresh(e)};return l({doTableRefresh:y,queryParams:s}),(e,l)=>{const a=p,s=U("STable");return k(),x("section",ql,[C(s,{ref_key:"table",ref:n,columns:R(u),"onUpdate:columns":l[0]||(l[0]=e=>V(u)?u.value=e:null),paginate:R(c),"onUpdate:paginate":l[1]||(l[1]=e=>V(c)?c.value=e:null),columnPresetResizable:!0,loadData:R(v),bodyMinRows:!0,immediate:!1,border:!1,scroll:R(d),sticky:R(i),rowKey:"key"},{bodyerCell:w((({column:e,record:l,value:s,groupIndex:i})=>["serial"===e.key?(k(),x("span",Ul,W(i+1),1)):G("",!0),"parentOrgName"===e.key?(k(),x("span",Vl,W(R(te)(o.dictionary.orgTree,s)),1)):G("",!0),"isOrg"===e.key?(k(),x("span",Dl,W(R(te)(o.dictionary.isOrg,s)),1)):G("",!0),"activity"===e.key?(k(),B(a,{key:3,checked:s,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{var o;return e[l]=a,null==(o=n.value)||o.update(),oe(le("update",e)).then((e=>{if("0000"!==e.code)return t.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);t.success({message:"系统消息",description:"修改成功"}),y()}))})(l,"activity",e)},null,8,["checked","onChange"])):G("",!0),"action"===e.key?(k(),x("a",{key:4,href:"javascript: void(0)",style:{"font-weight":"500",display:"inline-block",margin:"0 7px"},onClick:e=>(e=>{r("editRecord",e)})(l)}," 修改 ",8,Yl)):G("",!0)])),_:1},8,["columns","paginate","loadData","scroll","sticky"])])}}}),[["__scopeId","data-v-a1cff469"]]),Bl=Object.freeze(Object.defineProperty({__proto__:null,default:El},Symbol.toStringTag,{value:"Module"})),Gl={class:"organize-form-container"},Wl=Ze(_({name:"OrganizeForm",inheritAttrs:!1,__name:"OrganizeForm",props:{dictionary:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:l}){const a=I(null),t=e,o=A((()=>t.loading)),r=I({}),n=I(""),s=Ke([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"title",field:"title",label:"名称",props:{rows:1,autoSize:!0,placeholder:"请输入名称"}},{type:"AInput",slot:"orgShortName",field:"orgShortName",label:"简称",props:{placeholder:"请输入简称"}},{type:"ASelect",slot:"isOrg",field:"isOrg",label:"形态",props:{placeholder:"请选择组织形态",options:t.dictionary.isOrg}},{type:"ATreeSelect",slot:"parentOrgId",field:"parentOrgId",label:"上级",props:{dropdownClassName:"text-ellipsis",dropdownStyle:{maxHeight:"300px"},allowClear:!0,showSearch:!0,treeDefaultExpandAll:!0,dropdownMatchSelectWidth:!0,treeNodeFilterProp:"label",placeholder:"请选择上级",treeData:t.dictionary.orgTree},transfer:{input:e=>"0"!==e?e:"",output:e=>e||"0"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"",border:!0,grid:{}},{type:"ASwitch",slot:"activity",field:"activity",label:"状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),i=Le({title:[{required:!0,message:"请输入名称"}],isOrg:[{required:!0,message:"请选择形态"}],orgShortName:[{required:!0,message:"请输入简称"}]}),d=He({gutter:8,xs:24});return l({validateFields:(...e)=>{var l;return null==(l=a.value)?void 0:l.validateFields(...e).then((()=>({action:n.value,record:r.value})))},resetFields:(...e)=>{var l;return null==(l=a.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{n.value=e,r.value=l},doClose:()=>{n.value="",r.value={}}}),(e,l)=>{const t=U("SForm");return k(),x("section",Gl,[C(t,{ref_key:"form",ref:a,modelValue:R(r),"onUpdate:modelValue":l[0]||(l[0]=e=>V(r)?r.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:R(o),groups:R(s),rules:R(i),grid:R(d)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-ff94a5a6"]]),Kl=Object.freeze(Object.defineProperty({__proto__:null,default:Wl},Symbol.toStringTag,{value:"Module"})),Ll={class:"organize-drawer-container"},Hl={class:"readonly-container"},Ql={class:"readonly-item"},Xl=(e=>(P("data-v-0cc54182"),e=e(),z(),e))((()=>j("span",{class:"name"},"编码:",-1))),$l={class:"value"},Jl={class:"drawer-footer"},Zl={class:"footer-fixed"},ea=Ze(_({name:"OrganizeDrawer",inheritAttrs:!1,__name:"OrganizeDrawer",props:{dictionary:{}},emits:["submitted","closed"],setup(e,{expose:a,emit:o}){const r=o,n=e,s=I(null),i=I(""),d=I(""),u=I({key:""}),c=I(!1),p=I(!1),m=I(!1),f=I(!1),g=I(!1),h=()=>{var e;c.value&&(i.value="",d.value="",u.value={key:""},m.value=!1,p.value=!1,f.value=!1,c.value=!1,g.value=!1,null==(e=s.value)||e.doClose(),r("closed"))};return a({doEdit:e=>{i.value="修改",d.value="update",p.value=!1,c.value=!0,g.value=!1,u.value=Object.assign({parentOrgId:"0",activity:"Y",isOrg:"Y"},e),K((()=>{var e;null==(e=s.value)||e.doCreate("update",u.value)}))},doAdd:e=>{i.value="新增",d.value="insert",p.value=!1,c.value=!0,g.value=!0,u.value=Object.assign({parentOrgId:"0",activity:"Y",isOrg:"Y"},e),K((()=>{var e;null==(e=s.value)||e.doCreate("insert",u.value)}))}}),(e,a)=>{const o=y,d=l,g=v;return k(),x("section",Ll,[C(g,{width:"400",zIndex:1010,title:R(i),visible:R(c),forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:a[2]||(a[2]=e=>h())},{default:w((()=>[j("div",Hl,[j("div",Ql,[Xl,j("span",$l,W(R(u).key||"由系统生成"),1)])]),C(o,{dashed:!0,style:{margin:"16px  0 20px"}}),C(Wl,{ref_key:"form",ref:s,dictionary:n.dictionary,disabled:R(m),readonly:R(p),loading:R(f)},null,8,["dictionary","disabled","readonly","loading"]),j("div",Jl,[j("div",Zl,[C(d,{onClick:a[0]||(a[0]=e=>h())},{default:w((()=>[S(" 取消 ")])),_:1}),C(d,{type:"primary",loading:R(f),onClick:a[1]||(a[1]=e=>{var l,a;null==(a=null==(l=s.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!f.value){f.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},o="insert"===e?ne(le(e,l)):oe(le(e,l));return o.finally((()=>{f.value=!1})),o.then((e=>{"0000"!==e.code?t.error({message:"系统消息",description:e.message||a.error}):t.success({message:"系统消息",description:a.success});const o="0000"!==e.code?Promise.reject(e):l;return r("submitted"),h(),o}))}}))})},{default:w((()=>[S(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["title","visible"])])}}}),[["__scopeId","data-v-0cc54182"]]),la=Object.freeze(Object.defineProperty({__proto__:null,default:ea},Symbol.toStringTag,{value:"Module"})),aa={class:"section-container"},ta={class:"section-left-tree"},oa={class:"section-right-container"},ra={class:"section-query-container"},na={class:"section-table-container"},sa=Ze(_({name:"OrganizeManage",inheritAttrs:!1,__name:"OrganizeManage",setup(e){L((e=>({"2db37a64":R(p).layoutViewStyle.minHeight})));const a={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},t={flex:"0 0 auto",overflow:"hidden"},o={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},r=I(null),n=I(null),i=I(null),d=I(null),u=I(null),c=I(!1),p=se(),v=I({orgTree:[],isOrg:[{label:"组织",value:"Y"},{label:"部门",value:"N"}]}),y=e=>{u.value=e},m=(e={})=>{n.value&&(n.value.queryParams={...n.value.queryParams,...e},n.value.doTableRefresh())},f=e=>{var l;null==(l=d.value)||l.doEdit(e)},g=()=>{var e,l;null==(l=d.value)||l.doAdd({parentOrgId:null==(e=u.value)?void 0:e.key})},h=()=>{var e;ie({id:"orgTree"}).then((e=>{if("0000"!==e.code)return Promise.reject(new Error);v.value.orgTree.splice(0),v.value.orgTree.push(...e.result)})),null==(e=r.value)||e.doRefresh()};return q((()=>{h()})),(e,u)=>{const p=s,b=ze,_=Ne,S=l;return k(),x("section",aa,[j("div",{class:"section-left-container",style:M({width:R(c)?"0":"334px"})},[j("div",ta,[C(Cl,{ref_key:"tree",ref:r,dictionary:R(v),onAddRecord:g,onSelectedNode:y,onQueryTable:m,onQueryAll:h},null,8,["dictionary"])])],4),j("div",oa,[C(p,{style:a,headStyle:t,bodyStyle:o,bordered:!1},{default:w((()=>[j("div",ra,[C(Rl,{ref_key:"query",ref:i,onQueryTable:m,onAddRecord:g},null,512)]),j("div",na,[C(El,{ref_key:"table",ref:n,dictionary:R(v),onEditRecord:f},null,8,["dictionary"])])])),_:1}),C(S,{type:"link",class:"section-tree-collapse",onClick:u[0]||(u[0]=H((e=>c.value=!R(c)),["stop"]))},{icon:w((()=>[R(c)?(k(),B(b,{key:0})):G("",!0),R(c)?G("",!0):(k(),B(_,{key:1}))])),_:1})]),C(ea,{ref_key:"drawer",ref:d,dictionary:R(v),onSubmitted:m},null,8,["dictionary"])])}}}),[["__scopeId","data-v-8d7fe64a"]]),ia=Object.freeze(Object.defineProperty({__proto__:null,default:sa},Symbol.toStringTag,{value:"Module"})),da={class:"resource-button-form-container"},ua=Ze(_({name:"ResourceButtonForm",inheritAttrs:!1,__name:"ButtonForm",props:{presetOptions:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:l}){const a=I(null),t=e,o=A((()=>t.loading)),r=I({}),n=I(""),s=Ke([{type:"AGroup",slot:"",field:"AGroup-1",label:"",grid:{}},{type:"AInput",slot:"title",field:"title",label:"按钮名称",props:{placeholder:"请输入按钮名称",options:t.presetOptions.buttons}},{type:"AInput",slot:"resourceName",field:"resourceName",label:"按钮标识",props:{placeholder:"请输入按钮标识"}},{type:"AInput",slot:"sort",field:"sort",label:"按钮排序",props:{placeholder:"请输入按钮排序"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",border:!0,grid:{}},{type:"ASwitch",slot:"activity",field:"activity",label:"是否启用",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),i=Le({title:[{required:!0,message:"请输入按钮名称"}],resourceName:[{required:!0,message:"请输入按钮标识"}],sort:[{required:!0,message:"请输入按钮排序"}]}),d=He({gutter:8,xs:24});return l({validateFields:(...e)=>{var l;return null==(l=a.value)?void 0:l.validateFields(...e).then((()=>({action:n.value,record:r.value})))},resetFields:(...e)=>{var l;return null==(l=a.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{n.value=e,r.value=l},doClose:()=>{n.value="",r.value={}}}),(e,l)=>{const t=U("SForm");return k(),x("section",da,[C(t,{ref_key:"form",ref:a,modelValue:R(r),"onUpdate:modelValue":l[0]||(l[0]=e=>V(r)?r.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:R(o),groups:R(s),rules:R(i),grid:R(d)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-8fa40e80"]]),ca=Object.freeze(Object.defineProperty({__proto__:null,default:ua},Symbol.toStringTag,{value:"Module"})),pa=e=>(P("data-v-42eb409d"),e=e(),z(),e),va={class:"resource-button-drawer-container"},ya={class:"readonly-container"},ma={class:"readonly-item"},fa=pa((()=>j("span",{class:"name"},"按钮资源ID:",-1))),ga={class:"value"},ha={class:"readonly-item"},ba=pa((()=>j("span",{class:"name"},"所属菜单ID:",-1))),_a={class:"value"},ka={class:"readonly-item"},xa=pa((()=>j("span",{class:"name"},"所属菜单标识:",-1))),Ca={class:"value"},wa={class:"drawer-footer"},Sa={class:"footer-fixed"},Ia=Ze(_({name:"ResourceButtonDrawer",inheritAttrs:!1,__name:"ButtonDrawer",props:{presetOptions:{}},emits:["submitted","deleted","closed"],setup(e,{expose:a,emit:o}){const r=e,n=o,s=I(null),i=I(""),d=I(""),u=I({}),c=I(!1),p=I(!1),m=I(!1),f=I(!1),g=I(!1),h=()=>{var e;c.value&&(i.value="",d.value="",u.value={},m.value=!1,p.value=!1,f.value=!1,c.value=!1,g.value=!1,null==(e=s.value)||e.doClose(),n("closed"))};return a({doEdit:e=>{i.value="修改按钮资源",d.value="update",p.value=!1,c.value=!0,g.value=!1,u.value=Object.assign({resourceType:"b",activity:"Y"},e),K((()=>{var e;null==(e=s.value)||e.doCreate("update",u.value)}))},doAdd:e=>{i.value="添加按钮资源",d.value="insert",p.value=!1,c.value=!0,g.value=!0,u.value=Object.assign({resourceType:"b",activity:"Y"},e),K((()=>{var e;null==(e=s.value)||e.doCreate("insert",u.value)}))},doDel:async e=>de(le("delete",e)).then((e=>{if("0000"!==e.code)return t.error({message:"系统消息",description:e.message||"删除失败!"}),Promise.reject(e);t.success({message:"系统消息",description:"删除成功!"}),n("deleted")}))}),(e,a)=>{const o=y,d=l,g=v;return k(),x("section",va,[C(g,{width:"400",zIndex:1010,title:R(i),visible:R(c),forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:a[2]||(a[2]=e=>h())},{default:w((()=>[j("div",ya,[j("div",ma,[fa,j("span",ga,W(R(u).resourceId||"由系统生成"),1)]),j("div",ha,[ba,j("span",_a,W(R(u).parentId),1)]),j("div",ka,[xa,j("span",Ca,W(R(u).component),1)])]),C(o,{dashed:!0}),C(ua,{ref_key:"form",ref:s,presetOptions:r.presetOptions,disabled:R(m),readonly:R(p),loading:R(f)},null,8,["presetOptions","disabled","readonly","loading"]),j("div",wa,[j("div",Sa,[C(d,{onClick:a[0]||(a[0]=e=>h())},{default:w((()=>[S(" 取消 ")])),_:1}),C(d,{type:"primary",loading:R(f),onClick:a[1]||(a[1]=e=>{var l,a;null==(a=null==(l=s.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!f.value){f.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},o="insert"===e?ue(le(e,l)):ce(le(e,l));return o.finally((()=>{f.value=!1})),o.then((e=>{"0000"!==e.code?t.error({message:"系统消息",description:e.message||a.error}):t.success({message:"系统消息",description:a.success});const o="0000"!==e.code?Promise.reject(e):l;return n("submitted"),h(),o}))}}))})},{default:w((()=>[S(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["title","visible"])])}}}),[["__scopeId","data-v-42eb409d"]]),Oa=Object.freeze(Object.defineProperty({__proto__:null,default:Ia},Symbol.toStringTag,{value:"Module"})),Ta={class:"resource-button-table-container"},Aa={key:0},ja=["onClick"],Pa=Ze(_({name:"ResourceButtonTable",inheritAttrs:!1,__name:"ButtonTable",props:{parentNode:{}},setup(e,{expose:a}){const o=e,r=I(null),n=I(null),i=I({resourceType:"b",parentId:""}),d=I({buttons:[{label:"新增",value:"add",sort:1},{label:"删除",value:"del",sort:2},{label:"修改",value:"edit",sort:3},{label:"查询",value:"query",sort:4},{label:"重置",value:"reset",sort:5},{label:"上传",value:"upload",sort:6},{label:"上报",value:"up",sort:7},{label:"审批",value:"approve",sort:8},{label:"导出",value:"export",sort:9}]}),u={flex:"0 0 auto",overflow:"hidden"},c={flex:"1 1 auto",overflow:"auto",position:"relative",boxSizing:"border-box",padding:"20px"},v=I(!1),y=I(!1),f={container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",maxWidth:"140px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}},g=Ye({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),h=Ee({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),b=Be([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"按钮名称",dataIndex:"title"},{title:"按钮标识",dataIndex:"resourceName"},{title:"是否启用",dataIndex:"activity"},{title:"操作",dataIndex:"action",align:"center",width:80}]),_=Ge({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),S=We((async e=>{const l=le("",i.value,e.paginate,e.sorter);return pe(l).then((e=>"0000"!==e.code?(t.error({message:"系统消息",description:e.message||"按钮资源查询失败!"}),Promise.reject(e)):e))})),O=(e,l,a)=>{var t;e[l]=a,null==(t=r.value)||t.update()},T=e=>ce(le("update",e)).then((e=>{if("0000"!==e.code)return t.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);t.success({message:"系统消息",description:"修改成功"}),A()})),A=()=>{var e;y.value=!1,v.value=!1,null==(e=r.value)||e.refresh()},j=()=>{var e;null==(e=n.value)||e.doAdd({parentId:o.parentNode.resourceId,component:o.parentNode.component})};return a({queryParams:i,doTableRefresh:A,doTableReady:()=>{v.value=!0},doTableClear:()=>{var e;y.value=!1,v.value=!1,null==(e=r.value)||e.clear()}}),(e,a)=>{const t=Te,o=l,i=U("SEditCellInput"),I=p,P=U("STable"),z=s;return k(),x("section",Ta,[C(z,{title:"按钮资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:u,bodyStyle:c,bordered:!1},{extra:w((()=>[e.parentNode.resourceId?(k(),B(o,{key:0,type:"primary",onClick:j},{icon:w((()=>[C(t)])),_:1})):G("",!0)])),default:w((()=>[C(P,{ref_key:"table",ref:r,loading:R(v),"onUpdate:loading":a[1]||(a[1]=e=>V(v)?v.value=e:null),columns:R(b),"onUpdate:columns":a[2]||(a[2]=e=>V(b)?b.value=e:null),paginate:R(_),"onUpdate:paginate":a[3]||(a[3]=e=>V(_)?_.value=e:null),style:{height:"100%",overflow:"auto"},columnPresetResizable:!0,loadData:R(S),bodyMinRows:!0,immediate:!1,border:!1,scroll:R(h),sticky:R(g),rowKey:"resourceId"},{bodyerCell:w((({column:e,record:l,value:t,groupIndex:o})=>["serial"===e.key?(k(),x("span",Aa,W(o+1),1)):G("",!0),"title"===e.key||"resourceName"===e.key?(k(),B(i,{key:1,status:R(y),"onUpdate:status":a[0]||(a[0]=e=>V(y)?y.value=e:null),cellStyle:f,text:t,onChange:a=>O(l,e.key,a.value),onConfirm:e=>T(l)},null,8,["status","text","onChange","onConfirm"])):G("",!0),"activity"===e.key?(k(),B(I,{key:2,checked:t,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{O(e,l,a),T(e)})(l,"activity",e)},null,8,["checked","onChange"])):G("",!0),"action"===e.key?(k(),x("a",{key:3,href:"javascript: void(0)",style:{display:"inline-block","font-weight":"500",margin:"0 7px",color:"#f44848"},onClick:H((e=>(e=>{m.confirm({title:"是否确认删除该按钮资源?",content:"删除按钮资源会导致相关权限丢失，请慎重考虑!",cancelText:"取消",okText:"删除",okType:"danger",onOk:()=>{var l;null==(l=n.value)||l.doDel([e])}})})(l)),["stop"])}," 删除 ",8,ja)):G("",!0)])),_:1},8,["loading","columns","paginate","loadData","scroll","sticky"])])),_:1}),C(Ia,{ref_key:"buttonDrawer",ref:n,presetOptions:R(d),onSubmitted:A,onDeleted:A},null,8,["presetOptions"])])}}}),[["__scopeId","data-v-eb445cd5"]]),za=Object.freeze(Object.defineProperty({__proto__:null,default:Pa},Symbol.toStringTag,{value:"Module"})),Na={class:"resource-menu-form-container"},Fa=Ze(_({name:"ResourceMenuForm",inheritAttrs:!1,__name:"MenuForm",props:{disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:l}){const a=I(null),t=e,o=A((()=>t.loading)),r=I({}),n=I(""),s=Ke([{type:"AGroup",slot:"",field:"AGroup-1",label:"",grid:{}},{type:"AInput",slot:"title",field:"title",label:"菜单名称",props:{placeholder:"请输入菜单名称"}},{type:"AInput",slot:"resourceName",field:"resourceName",label:"菜单标识",props:{placeholder:"请输入菜单标识"}},{type:"AAutoComplete",slot:"component",field:"component",label:"组件标识",props:{showSearch:!0,placeholder:"请输入组件名称",replaceFields:{label:"label",value:"label"},filterOption:(e,l)=>!e.trim()||l.label.startsWith(e.trim()),options:[{label:"PageView",value:"PageView"},{label:"RouteView",value:"RouteView"},{label:"PageFrame",value:"PageFrame"}]}},{type:"AInput",slot:"redirect",field:"redirect",label:"跳转路径",props:{placeholder:"请输入跳转路径"}},{type:"AInput",slot:"path",field:"path",label:"访问路径",props:{placeholder:"请输入访问路径"}},{type:"ASelect",slot:"icon-select",field:"icon",label:"菜单图标",props:{placeholder:"请输入菜单图标",allowClear:!0,multiple:!1,mode:"tags"},transfer:{output:(e,{helper:l})=>l.isArray(e)?e.slice(-1)[0]:e}},{type:"AInput",slot:"sort",field:"sort",label:"菜单排序",props:{placeholder:"请输入菜单排序"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",border:!0,grid:{}},{type:"ASwitch",slot:"hideChildInMenu",field:"hideChildInMenu",label:"隐藏子菜单",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"hideInMenu",field:"hideInMenu",label:"隐藏菜单",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"allowCache",field:"allowCache",label:"是否缓存",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"activity",field:"activity",label:"是否启用",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),i=Le({title:[{required:!0,message:"请输入菜单名称"}],resourceName:[{required:!0,message:"请输入菜单标识"}],component:[{required:!0,message:"请输入组件名称"}],sort:[{required:!0,message:"请输入菜单排序"}]}),d=He({gutter:8,xs:24});return l({validateFields:(...e)=>{var l;return null==(l=a.value)?void 0:l.validateFields(...e).then((()=>({action:n.value,record:r.value})))},resetFields:(...e)=>{var l;return null==(l=a.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{n.value=e,r.value=l},doClose:()=>{n.value="",r.value={}}}),(e,l)=>{const t=U("SIconSelect"),n=U("SForm");return k(),x("section",Na,[C(n,{ref_key:"form",ref:a,modelValue:R(r),"onUpdate:modelValue":l[0]||(l[0]=e=>V(r)?r.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:R(o),groups:R(s),rules:R(i),grid:R(d)},{"s-component-icon-select":w((({source:e,field:l,attrs:a})=>[C(t,Q({value:e[l],"onUpdate:value":a=>e[l]=a},a),null,16,["value","onUpdate:value"])])),_:1},8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-75ca4026"]]),Ra=Object.freeze(Object.defineProperty({__proto__:null,default:Fa},Symbol.toStringTag,{value:"Module"})),Ma=e=>(P("data-v-184cc7a8"),e=e(),z(),e),qa={class:"resource-menu-drawer-container"},Ua={class:"readonly-container"},Va={class:"readonly-item"},Da=Ma((()=>j("span",{class:"name"},"当前菜单ID:",-1))),Ya={class:"value"},Ea={class:"readonly-item"},Ba=Ma((()=>j("span",{class:"name"},"父级菜单ID:",-1))),Ga={class:"value"},Wa={class:"drawer-footer"},Ka={class:"footer-fixed"},La=Ze(_({name:"ResourceMenuDrawer",inheritAttrs:!1,__name:"MenuDrawer",emits:["submitted","deleted","closed"],setup(e,{expose:a,emit:o}){const r=o,n=I(null),s=I(""),i=I(""),d=I({}),u=I(!1),c=I(!1),p=I(!1),m=I(!1),f=I(!1),g=()=>{var e;u.value&&(s.value="",i.value="",d.value={key:""},p.value=!1,c.value=!1,m.value=!1,u.value=!1,f.value=!1,null==(e=n.value)||e.doClose(),r("closed"))};return a({doEdit:e=>{s.value="修改菜单资源",i.value="update",c.value=!1,u.value=!0,f.value=!1,d.value=Object.assign({allowCache:"Y",hideInMenu:"N",hideChildInMenu:"N",resourceType:"m",activity:"Y"},e),K((()=>{var e;null==(e=n.value)||e.doCreate("update",d.value)}))},doAdd:e=>{s.value="添加菜单资源",i.value="insert",c.value=!1,u.value=!0,f.value=!0,d.value=Object.assign({allowCache:"Y",hideInMenu:"N",hideChildInMenu:"N",resourceType:"m",activity:"Y"},e),K((()=>{var e;null==(e=n.value)||e.doCreate("insert",d.value)}))},doDel:async e=>de(le("delete",e)).then((e=>{if("0000"!==e.code)return t.error({message:"系统消息",description:e.message||"删除失败!"}),Promise.reject(e);t.success({message:"系统消息",description:"删除成功!"}),r("deleted")}))}),(e,a)=>{const o=y,i=l,f=v;return k(),x("section",qa,[C(f,{width:"400",zIndex:1010,title:R(s),visible:R(u),forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:a[2]||(a[2]=e=>g())},{default:w((()=>[j("div",Ua,[j("div",Va,[Da,j("span",Ya,W(R(d).resourceId||"由系统生成"),1)]),j("div",Ea,[Ba,j("span",Ga,W(R(d).parentId),1)])]),C(o,{dashed:!0}),C(Fa,{ref_key:"form",ref:n,nuForm:"",disabled:R(p),readonly:R(c),loading:R(m)},null,8,["disabled","readonly","loading"]),j("div",Wa,[j("div",Ka,[C(i,{onClick:a[0]||(a[0]=e=>g())},{default:w((()=>[S(" 取消 ")])),_:1}),C(i,{type:"primary",loading:R(m),onClick:a[1]||(a[1]=e=>{var l,a;null==(a=null==(l=n.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!m.value){m.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},o="insert"===e?ue(le(e,l)):ce(le(e,l));return o.finally((()=>{m.value=!1})),o.then((e=>{"0000"!==e.code?t.error({message:"系统消息",description:e.message||a.error}):t.success({message:"系统消息",description:a.success});const o="0000"!==e.code?Promise.reject(e):l;return r("submitted"),g(),o}))}}))})},{default:w((()=>[S(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["title","visible"])])}}}),[["__scopeId","data-v-184cc7a8"]]),Ha=Object.freeze(Object.defineProperty({__proto__:null,default:La},Symbol.toStringTag,{value:"Module"})),Qa={class:"resource-menu-table-container"},Xa={key:0},$a=Ze(_({name:"ResourceMenuTable",inheritAttrs:!1,__name:"MenuTable",setup(e,{expose:l}){const a=I(null),o=I(null),r=I({resourceType:"m",parentId:""}),n={flex:"0 0 auto",overflow:"hidden"},i={flex:"1 1 auto",overflow:"auto",position:"relative",boxSizing:"border-box",padding:"20px"},d=I(!1),u=I(!1),c={container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",minWidth:"180px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}},v=Ye({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),y=Ee({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),m=Be([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"菜单名称",dataIndex:"title",minWidth:100,fixed:"left"},{title:"菜单标识",dataIndex:"resourceName",minWidth:150},{title:"组件标识",dataIndex:"component",minWidth:150},{title:"跳转路径",dataIndex:"redirect",minWidth:150},{title:"访问路径",dataIndex:"path",minWidth:150},{title:"菜单图标",dataIndex:"icon",minWidth:150},{title:"菜单排序",dataIndex:"sort",minWidth:150},{title:"隐藏子菜单",dataIndex:"hideChildInMenu",width:120},{title:"隐藏菜单",dataIndex:"hideInMenu",width:120},{title:"是否缓存",dataIndex:"allowCache",width:120},{title:"是否启用",dataIndex:"activity",width:120}]),f=Ge({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),g=We((async e=>{const l=le("",r.value,e.paginate,e.sorter);return pe(l).then((e=>"0000"!==e.code?(t.error({message:"系统消息",description:e.message||"按钮资源查询失败!"}),Promise.reject(e)):e))})),h=(e,l,t)=>{var o;e[l]="sort"===l?+t||"":t,null==(o=a.value)||o.update()},b=e=>ce(le("update",e)).then((e=>{if("0000"!==e.code)return t.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);t.success({message:"系统消息",description:"修改成功"}),_()})),_=()=>{var e;u.value=!1,d.value=!1,null==(e=a.value)||e.refresh()};return l({queryParams:r,doTableRefresh:_,doTableReady:()=>{d.value=!0},doTableClear:()=>{var e;u.value=!1,d.value=!1,null==(e=a.value)||e.clear()}}),(e,l)=>{const t=U("SEditCellInput"),r=U("SEditCellTextarea"),S=p,I=U("SEditCellSelectIcon"),O=U("STable"),T=s;return k(),x("section",Qa,[C(T,{title:"子菜单资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:n,bodyStyle:i,bordered:!1},{default:w((()=>[C(O,{ref_key:"table",ref:a,loading:R(d),"onUpdate:loading":l[3]||(l[3]=e=>V(d)?d.value=e:null),columns:R(m),"onUpdate:columns":l[4]||(l[4]=e=>V(m)?m.value=e:null),paginate:R(f),"onUpdate:paginate":l[5]||(l[5]=e=>V(f)?f.value=e:null),style:{width:"100%",height:"100%",overflow:"auto"},columnPresetResizable:!0,loadData:R(g),bodyMinRows:!0,immediate:!1,border:!1,scroll:R(y),sticky:R(v),rowKey:"resourceId"},{bodyerCell:w((({column:e,record:a,value:o,groupIndex:n})=>["serial"===e.key?(k(),x("span",Xa,W(n+1),1)):G("",!0),["title","resourceName","component","sort"].includes(e.key)?(k(),B(t,{key:1,status:R(u),"onUpdate:status":l[0]||(l[0]=e=>V(u)?u.value=e:null),cellStyle:c,text:String(o??""),empty:"无",onChange:l=>h(a,e.key,l.value),onConfirm:e=>b(a)},null,8,["status","text","onChange","onConfirm"])):G("",!0),["redirect","path"].includes(e.key)?(k(),B(r,{key:2,status:R(u),"onUpdate:status":l[1]||(l[1]=e=>V(u)?u.value=e:null),cellStyle:c,text:String(o??""),empty:"无",onChange:l=>h(a,e.key,l.value),onConfirm:e=>b(a)},null,8,["status","text","onChange","onConfirm"])):G("",!0),["hideChildInMenu","hideInMenu","allowCache","activity"].includes(e.key)?(k(),B(S,{key:3,checked:o,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"是",unCheckedChildren:"否",onChange:l=>((e,l,a)=>{h(e,l,a),b(e)})(a,e.key,l)},null,8,["checked","onChange"])):G("",!0),"icon"===e.key?(k(),B(I,{key:4,status:R(u),"onUpdate:status":l[2]||(l[2]=e=>V(u)?u.value=e:null),cellStyle:c,text:String(o??""),allowClear:"",empty:"无",onChange:l=>h(a,e.key,l.value),onConfirm:e=>b(a)},null,8,["status","text","onChange","onConfirm"])):G("",!0)])),_:1},8,["loading","columns","paginate","loadData","scroll","sticky"])])),_:1}),C(La,{ref_key:"menuDrawer",ref:o,onSubmitted:_,onDeleted:_},null,512)])}}}),[["__scopeId","data-v-caf1520d"]]),Ja=Object.freeze(Object.defineProperty({__proto__:null,default:$a},Symbol.toStringTag,{value:"Module"})),Za={class:"resource-tree-menu-container"},et=Ze(_({name:"ResourceTreeMenu",inheritAttrs:!1,__name:"TreeMenu",emits:["linkage"],setup(e,{emit:a}){const t={flex:"0 0 auto",overflow:"hidden"},o={flex:"1 1 auto",overflow:"hidden",position:"relative"},r=I({key:"resourceId",title:"title",children:"children"}),n=a,i=I(null),d=I(null),u=I([]),c=I(!1),p=()=>{if(!c.value){c.value=!0;const e=ve({resourceType:"m"}).then((e=>{if("0000"!==e.code)return f.error("菜单资源加载失败"),Promise.reject();u.value=e.result,K((()=>y()))}));return e.finally((()=>{c.value=!1})),e}},v=()=>{var e;null==(e=i.value)||e.doTreeAllCollapsed()},y=()=>{var e;null==(e=i.value)||e.doTreeAllExpanded()},g=Ve((e=>{n("linkage",e.selectedNode)})),h=e=>{var l;null==(l=d.value)||l.doAdd({parentId:e.resourceId})},b=e=>{var l;null==(l=d.value)||l.doEdit(e)},_=e=>{m.confirm({title:"是否确认删除该菜单?",content:"删除菜单会导致相关页面丢失，请慎重考虑!",cancelText:"取消",okText:"删除",okType:"danger",onOk:()=>{var l;null==(l=d.value)||l.doDel([e])}})};return p(),(e,a)=>{const n=Te,m=l,f=Fe,S=Re,I=Me,O=qe,T=U("STree"),A=s;return k(),x("section",Za,[C(A,{title:"菜单资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:t,bodyStyle:o,bordered:!1},{default:w((()=>[C(T,{ref_key:"tree",ref:i,loading:R(c),treeData:R(u),replaceFields:R(r),allowCheckedLevel:2,allowSelectedLevel:2,selectable:!0,checkable:!1,blockNode:!0,showIcon:!1,showLine:!0,tooltip:!0,sticky:!0,bgColor:"#ffffff",onSelect:R(g)},{titleRootButton:w((e=>[C(m,{type:"link",size:"small",onClick:H((l=>h(e)),["stop"])},{icon:w((()=>[C(n)])),_:2},1032,["onClick"]),C(m,{type:"link",size:"small",onClick:H(v,["stop"])},{icon:w((()=>[C(f)])),_:1}),C(m,{type:"link",size:"small",onClick:H(y,["stop"])},{icon:w((()=>[C(S)])),_:1})])),titleParentButton:w((e=>[C(m,{type:"link",size:"small",onClick:H((l=>h(e)),["stop"])},{icon:w((()=>[C(n)])),_:2},1032,["onClick"]),C(m,{type:"link",size:"small",onClick:H((l=>b(e)),["stop"])},{icon:w((()=>[C(I)])),_:2},1032,["onClick"]),C(m,{type:"link",size:"small",style:{color:"#f44848"},onClick:H((l=>_(e)),["stop"])},{icon:w((()=>[C(O)])),_:2},1032,["onClick"])])),titleLeafButton:w((e=>[C(m,{type:"link",size:"small",onClick:H((l=>h(e)),["stop"])},{icon:w((()=>[C(n)])),_:2},1032,["onClick"]),C(m,{type:"link",size:"small",onClick:H((l=>b(e)),["stop"])},{icon:w((()=>[C(I)])),_:2},1032,["onClick"]),C(m,{type:"link",size:"small",style:{color:"#f44848"},onClick:H((l=>_(e)),["stop"])},{icon:w((()=>[C(O)])),_:2},1032,["onClick"])])),_:1},8,["loading","treeData","replaceFields","onSelect"])])),_:1}),C(La,{ref_key:"menuDrawer",ref:d,onSubmitted:p,onDeleted:p},null,512)])}}}),[["__scopeId","data-v-ac0438f2"]]),lt=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"})),at={class:"section-container"},tt={class:"section-left-tree"},ot={class:"section-right-container"},rt=Ze(_({name:"ResourceManage",inheritAttrs:!1,__name:"ResourceManage",setup(e){L((e=>({"3bef73e5":R(r).layoutViewStyle.minHeight})));const a=I({}),t=I(null),o=I(!1),r=se(),n=e=>{a.value=e,K((()=>{var l;e.resourceId||null==(l=t.value)||l.doTableClear(),e.resourceId&&(t.value.queryParams.parentId=e.resourceId,t.value.doTableRefresh())}))};return(e,r)=>{const s=ze,i=Ne,d=l;return k(),x("section",at,[j("div",{class:"section-left-container",style:M({width:R(o)?"0":"334px"})},[j("div",tt,[C(et,{ref:"treeMenu",onLinkage:n},null,512)])],4),j("div",ot,[(k(),B(X(["PageView","RouteView"].includes(R(a).component)?$a:Pa),{ref_key:"refTable",ref:t,parentNode:R(a)},null,8,["parentNode"])),C(d,{type:"link",class:"section-tree-collapse",onClick:r[0]||(r[0]=H((e=>o.value=!R(o)),["stop"]))},{icon:w((()=>[R(o)?(k(),B(s,{key:0})):G("",!0),R(o)?G("",!0):(k(),B(i,{key:1}))])),_:1})])])}}}),[["__scopeId","data-v-3344e632"]]),nt=Object.freeze(Object.defineProperty({__proto__:null,default:rt},Symbol.toStringTag,{value:"Module"})),st={class:"role-query-container"},it={class:"flex-row-auto"},dt={class:"flex-row-none"},ut={class:"flex-row-auto"},ct={style:{flex:"1 1 auto"}},pt={style:{flex:"0 0 auto"}},vt=(e=>(P("data-v-fc4356a7"),e=e(),z(),e))((()=>j("span",null,"新增",-1))),yt={key:0,class:"form-inline-more"},mt={class:"flex-row-none",style:{width:"210px"}},ft={class:"flex-row-auto"},gt=Ze(_({name:"RoleQuery",inheritAttrs:!1,__name:"RoleQuery",emits:["addRecord","queryTable"],setup(e,{emit:t}){const o=t,n=I({roleName:"",activity:""}),s=D("configProvider",i),p=I(!1),v=()=>{o("addRecord")},y=()=>{o("queryTable",n.value)},m=()=>{p.value=!p.value};return(e,t)=>{const o=je,i=l,f=d,g=r,h=Pe,b=Te,_=u,I=c,O=a,T=Y("action");return k(),x("section",st,[C(O,{layout:"inline"},{default:w((()=>[j("div",it,[j("div",dt,[C(g,{label:"组织/部门",style:M({width:"large"===R(s).componentSize?"380px":"middle"===R(s).componentSize?"330px":"270px"})},{default:w((()=>[C(f,{value:R(n).roleName,"onUpdate:value":t[0]||(t[0]=e=>R(n).roleName=e),placeholder:"请输入角色名",allowClear:"",onSearch:y},{enterButton:w((()=>[C(i,null,{icon:w((()=>[C(o,{style:{color:"var(--ant-primary-color)"}})])),_:1})])),_:1},8,["value"])])),_:1},8,["style"])]),j("div",ut,[j("div",ct,[C(i,{onClick:m},{icon:w((()=>[C(h,{style:{color:"var(--ant-primary-color)"}})])),_:1})]),j("div",pt,[E((k(),B(i,{type:"primary",onClick:v},{icon:w((()=>[C(b)])),default:w((()=>[vt])),_:1})),[[T,void 0,"add"]])])])]),R(p)?(k(),x("div",yt,[j("div",mt,[C(g,{label:"组织状态",style:{"margin-bottom":"0"}},{default:w((()=>[C(I,{value:R(n).activity,"onUpdate:value":t[1]||(t[1]=e=>R(n).activity=e),placeholder:"请选择角色状态",onChange:y},{default:w((()=>[C(_,{value:""},{default:w((()=>[S(" 全部 ")])),_:1}),C(_,{value:"Y"},{default:w((()=>[S(" 启用 ")])),_:1}),C(_,{value:"N"},{default:w((()=>[S(" 禁用 ")])),_:1})])),_:1},8,["value"])])),_:1})]),j("div",ft,[C(i,{type:"primary",style:{margin:"0 8px"},onClick:y},{default:w((()=>[S(" 查询 ")])),_:1}),C(i,{style:{margin:"0 8px"},onClick:t[2]||(t[2]=e=>{return l=!0,n.value.roleName="",n.value.activity="",void(!0===l&&y());var l})},{default:w((()=>[S(" 重置 ")])),_:1})])])):G("",!0)])),_:1})])}}}),[["__scopeId","data-v-fc4356a7"]]),ht=Object.freeze(Object.defineProperty({__proto__:null,default:gt},Symbol.toStringTag,{value:"Module"})),bt={class:"role-resource-drawer-container"},_t={class:"flex-row-auto",style:{width:"100%",height:"calc(100% - 55px)"}},kt={class:"flex-row-none",style:{width:"310px",height:"100%","margin-right":"24px"}},xt={class:"s-tree-title-button always-show"},Ct={class:"flex-row-auto",style:{width:"100%",height:"100%"}},wt={class:"resource-button-container"},St={class:"group-header"},It={class:"group-content"},Ot={class:"drawer-footer"},Tt={class:"footer-fixed"},At=Ze(_({name:"RoleResource",inheritAttrs:!1,__name:"RoleResource",emits:["submitted","closed"],setup(e,{expose:a,emit:o}){const r=o,i=I(""),d=I(""),u=I({}),c=I(!1),p=I({tree:!1,button:!1,submitting:!1}),y=I(null),m=I([]),_=I([]),O={key:"value",title:"label"},T=I([]),A=I([]),P=I([]),z=async e=>{p.value.button||(p.value.button=!0);const l=le("",e.map((e=>({roleId:u.value.roleId,menuId:e})))),a=me(l).then((e=>{if("0000"!==e.code)return e.message&&f.error(e.message),Promise.reject();T.value=e.result.map((e=>({...e,selected:e.selected.filter((l=>e.actionsOptions.some((e=>e.value===l))))}))),E()}));return a.finally((()=>{p.value.tree=!1,p.value.button=!1})),a},N=Qe((e=>{if(!y.value)return;const l=[...e.checkedKeys];_.value=l,z(l)})),F=e=>{const l=e.button,a=e.option;a||(l.options.every((e=>l.selected.includes(e.value)))?l.selected=[]:l.selected=l.options.map((e=>e.value))),a&&(l.selected.includes(a.value)?l.selected=l.selected.filter((e=>e!==a.value)):l.selected.push(a.value)),P.value=A.value.flatMap((e=>e.selected))},M=e=>e.options.every((l=>e.selected.includes(l.value))),q=e=>!e.options.every((l=>e.selected.includes(l.value)))&&e.options.some((l=>e.selected.includes(l.value))),D=()=>{var e;null==(e=y.value)||e.doTreeAllCollapsed()},Y=()=>{var e;null==(e=y.value)||e.doTreeAllExpanded()},E=()=>{T.value=T.value.filter((e=>e.actionsOptions&&e.actionsOptions.length>0&&_.value.some((l=>l===e.id)))),T.value.sort(((e,l)=>_.value.findIndex((l=>l===e.id))-_.value.findIndex((e=>e===l.id)))),A.value=T.value.map((e=>{const l=y.value.pickMatchTreeNode(e.id),a=y.value.pickUpperTreeNodes(e.id);return e.actionsOptions||(e.actionsOptions=[]),e.selected||(e.selected=[]),{menu:l,titles:[...a.map((e=>e.label)),l.label],options:e.actionsOptions,selected:e.selected,id:e.id}})),P.value=A.value.flatMap((e=>e.selected))},G=()=>{c.value&&(i.value="",d.value="",c.value=!1,u.value={},p.value={tree:!1,button:!1,submitting:!1},m.value=[],_.value=[],T.value=[],A.value=[],P.value=[],r("closed"))};return a({doClose:G,doOpen:e=>{i.value="资源配置",d.value="update",u.value=e,c.value=!0,p.value={tree:!1,button:!1,submitting:!1}}}),(e,a)=>{const o=Fe,d=l,I=Re,T=U("STree"),E=s,L=n,Q=h,X=b,Z=g,ee=v;return k(),x("section",bt,[C(ee,{title:R(i),zIndex:1010,visible:R(c),maskClosable:!0,bodyStyle:{height:"calc(100% - 55px)",padding:"15px"},contentWrapperStyle:{width:"100% !important","max-width":"1180px"},onAfterVisibleChange:a[3]||(a[3]=()=>R(c)&&(async()=>(p.value.tree||(p.value.tree=!0),p.value.button||(p.value.button=!0),ye({roleId:u.value.roleId}).then((e=>{if("0000"!==e.code)return e.message&&f.error(e.message),Promise.reject();m.value=e.result.treeNodes,_.value=e.result.treeSelect,K((()=>{var e;null==(e=y.value)||e.doTreeAllExpanded()})),z([..._.value])}))))()),onClose:a[4]||(a[4]=e=>G())},{default:w((()=>[j("div",_t,[j("div",kt,[C(E,{title:"菜单资源",style:{display:"flex","flex-flow":"column nowrap",width:"100%",height:"100%"},bodyStyle:{width:"100%",height:"100%",flex:"1 1 auto",padding:"15px 24px",overflow:"auto",position:"relative"},headStyle:{flex:"0 0 auto",overflow:"hidden"}},{default:w((()=>[C(T,{ref_key:"tree",ref:y,checkedKeys:R(_),"onUpdate:checkedKeys":a[0]||(a[0]=e=>V(_)?_.value=e:null),loading:R(p).tree,treeData:R(m),replaceFields:O,allowCheckedLevel:2,allowSelectedLevel:2,allowSelectToCheck:!0,allowUnSelected:!0,allowUnChecked:!0,selectable:!1,checkedMode:"link",checkable:!0,showIcon:!1,showLine:!0,tooltip:!0,onCheck:R(N)},{titleRootButton:w((()=>[j("span",xt,[C(d,{ghost:"",size:"small",type:"primary",style:{margin:"0 3px"},onClick:H(D,["stop"])},{icon:w((()=>[C(o)])),_:1}),C(d,{ghost:"",size:"small",type:"primary",style:{margin:"0 3px"},onClick:H(Y,["stop"])},{icon:w((()=>[C(I)])),_:1})])])),_:1},8,["checkedKeys","loading","treeData","onCheck"])])),_:1})]),j("div",Ct,[C(E,{title:"按钮资源",style:{display:"flex","flex-flow":"column nowrap",width:"100%",height:"100%"},bodyStyle:{width:"100%",height:"100%",flex:"1 1 auto",padding:"15px 24px",overflow:"auto",position:"relative"},headStyle:{flex:"0 0 auto",overflow:"hidden"}},{default:w((()=>[C(Z,{spinning:R(p).button},{default:w((()=>[j("div",wt,[(k(!0),x($,null,J(R(A),(e=>(k(),x("div",{key:e.id,class:"resource-button-group"},[j("div",St,[C(L,{style:{margin:"0 6px 0 4px"},checked:M(e),indeterminate:q(e),onChange:l=>F({button:e,option:null})},null,8,["checked","indeterminate","onChange"]),C(X,null,{default:w((()=>[(k(!0),x($,null,J(e.titles,(e=>(k(),B(Q,{key:e},{default:w((()=>[S(W(e),1)])),_:2},1024)))),128))])),_:2},1024)]),j("div",It,[(k(!0),x($,null,J(e.options,(l=>(k(),x("div",{key:l.value,class:"group-checkbox"},[C(L,{title:l.label,checked:e.selected.includes(l.value),onChange:a=>F({button:e,option:l})},{default:w((()=>[S(W(l.label),1)])),_:2},1032,["title","checked","onChange"])])))),128))])])))),128))])])),_:1},8,["spinning"])])),_:1})])]),j("div",Ot,[j("div",Tt,[C(d,{onClick:a[1]||(a[1]=e=>G())},{default:w((()=>[S(" 取消 ")])),_:1}),C(d,{type:"primary",loading:R(p).submitting,onClick:a[2]||(a[2]=e=>(()=>{const e=u.value.roleId,l=[..._.value,...P.value].join(",");p.value.submitting||(p.value.submitting=!0);const a=fe({roleId:e,resourceIds:l}).then((e=>{if("0000"!==e.code)return t.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);t.success({message:"系统消息",description:"修改成功"}),r("submitted"),G()}));return a.finally((()=>{p.value.submitting=!1})),a})())},{default:w((()=>[S(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["title","visible","bodyStyle"])])}}}),[["__scopeId","data-v-594dc86a"]]),jt=Object.freeze(Object.defineProperty({__proto__:null,default:At},Symbol.toStringTag,{value:"Module"})),Pt={class:"role-table-container"},zt={key:0},Nt=["onClick"],Ft=["onClick"],Rt=Ze(_({name:"RoleTable",inheritAttrs:!1,__name:"RoleTable",emits:["editRecord"],setup(e,{expose:l,emit:a}){const o=I({roleName:"",activity:""}),r=I({dataFlag:[{label:"用户级",value:"0"},{label:"部门级",value:"1"},{label:"公司级",value:"2"}]}),n=a,s=I(null),i=I(null),d=I(!1),u={container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",maxWidth:"200px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}},c=Ye({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),v=Ee({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),y=Be([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"角色名称",dataIndex:"roleName"},{title:"数据范围",dataIndex:"dataFlag"},{title:"角色状态",dataIndex:"activity"},{title:"操作",dataIndex:"action",align:"center",width:120}]),m=Ge({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),f=We((e=>{const l=le("",o.value,e.paginate,e.sorter);return he(l).then((e=>"0000"!==e.code?(t.error({message:"系统消息",description:e.message||"用户角色查询失败!"}),Promise.reject(e)):e))})),g=(e,l,a)=>{var t;e[l]=a,null==(t=s.value)||t.update()},h=e=>ge(le("update",e)).then((e=>{if("0000"!==e.code)return t.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);t.success({message:"系统消息",description:"修改成功"}),b()})),b=()=>{var e;d.value=!1,null==(e=s.value)||e.refresh()};return l({doTableRefresh:b,queryParams:o}),(e,l)=>{const a=U("SEditCellInput"),t=U("SEditCellSelect"),o=p,b=U("STable");return k(),x("section",Pt,[C(b,{ref_key:"table",ref:s,columns:R(y),"onUpdate:columns":l[2]||(l[2]=e=>V(y)?y.value=e:null),paginate:R(m),"onUpdate:paginate":l[3]||(l[3]=e=>V(m)?m.value=e:null),columnPresetResizable:!0,loadData:R(f),bodyMinRows:!0,immediate:!0,border:!1,scroll:R(v),sticky:R(c),rowKey:"roleId"},{bodyerCell:w((({column:e,record:s,value:c,groupIndex:p})=>["serial"===e.key?(k(),x("span",zt,W(p+1),1)):G("",!0),"roleName"===e.key?(k(),B(a,{key:1,status:R(d),"onUpdate:status":l[0]||(l[0]=e=>V(d)?d.value=e:null),cellStyle:u,text:c,onChange:l=>g(s,e.key,l.value),onConfirm:e=>h(s)},null,8,["status","text","onChange","onConfirm"])):G("",!0),"dataFlag"===e.key?(k(),B(t,{key:2,status:R(d),"onUpdate:status":l[1]||(l[1]=e=>V(d)?d.value=e:null),cellStyle:u,text:c,options:R(r).dataFlag,onChange:l=>g(s,e.key,l.value),onConfirm:e=>h(s)},null,8,["status","text","options","onChange","onConfirm"])):G("",!0),"activity"===e.key?(k(),B(o,{key:3,checked:c,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{g(e,l,a),h(e)})(s,"activity",e)},null,8,["checked","onChange"])):G("",!0),"action"===e.key?(k(),x($,{key:4},[j("a",{href:"javascript: void(0)",style:{display:"inline-block",margin:"0 7px","font-weight":"500"},onClick:H((e=>(e=>{var l;null==(l=i.value)||l.doOpen(e)})(s)),["stop"])}," 资源配置 ",8,Nt),j("a",{href:"javascript: void(0)",style:{display:"inline-block",margin:"0 7px","font-weight":"500"},onClick:e=>(e=>{n("editRecord",e)})(s)}," 修改 ",8,Ft)],64)):G("",!0)])),_:1},8,["columns","paginate","loadData","scroll","sticky"]),C(At,{ref_key:"roleResource",ref:i,onSubmitted:()=>{}},null,512)])}}}),[["__scopeId","data-v-047e428e"]]),Mt=Object.freeze(Object.defineProperty({__proto__:null,default:Rt},Symbol.toStringTag,{value:"Module"})),qt={class:"role-form-container"},Ut=Ze(_({name:"RoleForm",inheritAttrs:!1,__name:"RoleForm",props:{disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:l}){const a=I(null),t=e,o=A((()=>t.loading)),r=I({}),n=I(""),s=Ke([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"roleName",field:"roleName",label:"角色名称",props:{rows:1,autoSize:!0,placeholder:"请输入角色名称"}},{type:"ASelect",slot:"dataFlag",field:"dataFlag",label:"数据范围",props:{placeholder:"请选择数据范围",options:[{label:"用户级",value:"0"},{label:"部门级",value:"1"},{label:"公司级",value:"2"}]}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"状态信息",border:!0},{type:"ASwitch",slot:"activity",field:"activity",label:"角色状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),i=Le({roleName:[{required:!0,message:"请输入角色名称"}],dataFlag:[{required:!0,message:"请选择数据范围"}]}),d=He({gutter:8,xs:24});return l({validateFields:(...e)=>{var l;return null==(l=a.value)?void 0:l.validateFields(...e).then((()=>({action:n.value,record:r.value})))},resetFields:(...e)=>{var l;return null==(l=a.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{n.value=e,r.value=l},doClose:()=>{n.value="",r.value={}}}),(e,l)=>{const t=U("SForm");return k(),x("section",qt,[C(t,{ref_key:"form",ref:a,modelValue:R(r),"onUpdate:modelValue":l[0]||(l[0]=e=>V(r)?r.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:R(o),groups:R(s),rules:R(i),grid:R(d)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-b0a81a72"]]),Vt=Object.freeze(Object.defineProperty({__proto__:null,default:Ut},Symbol.toStringTag,{value:"Module"})),Dt={class:"role-drawer-container"},Yt={class:"drawer-footer"},Et={class:"footer-fixed"},Bt=_({name:"RoleDrawer",inheritAttrs:!1,__name:"RoleDrawer",emits:["submitted","closed"],setup(e,{expose:a,emit:o}){const r=o,n=I(null),s=I(""),i=I(""),d=I({}),u=I(!1),c=I(!1),p=I(!1),y=I(!1),m=I(!1),f=()=>{var e;u.value&&(s.value="",i.value="",d.value={},p.value=!1,c.value=!1,y.value=!1,u.value=!1,m.value=!1,null==(e=n.value)||e.doClose(),r("closed"))};return a({doEdit:e=>{s.value="修改角色",i.value="update",c.value=!1,u.value=!0,m.value=!1,d.value=Object.assign({activity:"Y"},e),K((()=>{var e;null==(e=n.value)||e.doCreate("update",d.value)}))},doAdd:e=>{s.value="添加角色",i.value="insert",c.value=!1,u.value=!0,m.value=!0,d.value=Object.assign({activity:"Y"},e),K((()=>{var e;null==(e=n.value)||e.doCreate("insert",d.value)}))}}),(e,a)=>{const o=l,i=v;return k(),x("section",Dt,[C(i,{width:"400",zIndex:1010,title:R(s),visible:R(u),forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:a[2]||(a[2]=e=>f())},{default:w((()=>[C(Ut,{ref_key:"form",ref:n,disabled:R(p),readonly:R(c),loading:R(y)},null,8,["disabled","readonly","loading"]),j("div",Yt,[j("div",Et,[C(o,{onClick:a[0]||(a[0]=e=>f())},{default:w((()=>[S(" 取消 ")])),_:1}),C(o,{type:"primary",loading:R(y),onClick:a[1]||(a[1]=e=>{var l,a;null==(a=null==(l=n.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!y.value){y.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},o="insert"===e?be(le(e,l)):ge(le(e,l));return o.finally((()=>{y.value=!1})),o.then((e=>{"0000"!==e.code?t.error({message:"系统消息",description:e.message||a.error}):t.success({message:"系统消息",description:a.success});const o="0000"!==e.code?Promise.reject(e):l;return r("submitted"),f(),o}))}}))})},{default:w((()=>[S(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["title","visible"])])}}}),Gt=Object.freeze(Object.defineProperty({__proto__:null,default:Bt},Symbol.toStringTag,{value:"Module"})),Wt={class:"section-container"},Kt={class:"section-query-container"},Lt={class:"section-table-container"},Ht=Ze(_({name:"RoleManage",inheritAttrs:!1,__name:"RoleManage",setup(e){L((e=>({cb1b8c4c:R(i).layoutViewStyle.minHeight})));const l={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},a={flex:"0 0 auto",overflow:"hidden"},t={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},o=I(null),r=I(null),n=I(null),i=se(),d=(e={})=>{o.value&&(o.value.queryParams={...o.value.queryParams,...e},o.value.doTableRefresh())},u=e=>{var l;null==(l=n.value)||l.doEdit(e)},c=()=>{var e;null==(e=n.value)||e.doAdd({})};return(e,i)=>{const p=s;return k(),x("section",Wt,[C(p,{style:l,headStyle:a,bodyStyle:t,bordered:!1},{default:w((()=>[j("div",Kt,[C(gt,{ref_key:"query",ref:r,onQueryTable:d,onAddRecord:c},null,512)]),j("div",Lt,[C(Rt,{ref_key:"table",ref:o,onEditRecord:u},null,512)])])),_:1}),C(Bt,{ref_key:"drawer",ref:n,onSubmitted:d},null,512)])}}}),[["__scopeId","data-v-41788c95"]]),Qt=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"})),Xt={class:"user-query-container"},$t={class:"flex-row-auto"},Jt={class:"flex-row-none"},Zt={class:"flex-row-auto"},eo={style:{flex:"1 1 auto"}},lo={style:{flex:"0 0 auto"}},ao=(e=>(P("data-v-fe482045"),e=e(),z(),e))((()=>j("span",null,"新增",-1))),to={key:0,class:"form-inline-more"},oo={class:"flex-row-none",style:{width:"210px"}},ro={class:"flex-row-auto"},no=Ze(_({name:"UserQuery",inheritAttrs:!1,__name:"UserQuery",emits:["addRecord","queryTable"],setup(e,{emit:t}){const o=t,n=I({userNo:"",activity:""}),s=D("configProvider",i),p=I(!1),v=()=>{o("addRecord")},y=()=>{o("queryTable",n.value)},m=()=>{p.value=!p.value};return(e,t)=>{const o=je,i=l,f=d,g=r,h=Pe,b=Te,_=u,I=c,O=a,T=Y("action");return k(),x("section",Xt,[C(O,{layout:"inline"},{default:w((()=>[j("div",$t,[j("div",Jt,[C(g,{label:"组织/部门",style:M({width:"large"===R(s).componentSize?"380px":"middle"===R(s).componentSize?"330px":"270px"})},{default:w((()=>[C(f,{value:R(n).userNo,"onUpdate:value":t[0]||(t[0]=e=>R(n).userNo=e),placeholder:"请输入用户名",allowClear:"",onSearch:y},{enterButton:w((()=>[C(i,null,{icon:w((()=>[C(o,{style:{color:"var(--ant-primary-color)"}})])),_:1})])),_:1},8,["value"])])),_:1},8,["style"])]),j("div",Zt,[j("div",eo,[C(i,{onClick:m},{icon:w((()=>[C(h,{style:{color:"var(--ant-primary-color)"}})])),_:1})]),j("div",lo,[E((k(),B(i,{type:"primary",onClick:v},{icon:w((()=>[C(b)])),default:w((()=>[ao])),_:1})),[[T,void 0,"add"]])])])]),R(p)?(k(),x("div",to,[j("div",oo,[C(g,{label:"组织状态",style:{"margin-bottom":"0"}},{default:w((()=>[C(I,{value:R(n).activity,"onUpdate:value":t[1]||(t[1]=e=>R(n).activity=e),placeholder:"请选择角色状态",onChange:y},{default:w((()=>[C(_,{value:""},{default:w((()=>[S(" 全部 ")])),_:1}),C(_,{value:"Y"},{default:w((()=>[S(" 启用 ")])),_:1}),C(_,{value:"N"},{default:w((()=>[S(" 禁用 ")])),_:1})])),_:1},8,["value"])])),_:1})]),j("div",ro,[C(i,{type:"primary",style:{margin:"0 8px"},onClick:y},{default:w((()=>[S(" 查询 ")])),_:1}),C(i,{style:{margin:"0 8px"},onClick:t[2]||(t[2]=e=>{return l=!0,n.value.userNo="",n.value.activity="",void(!0===l&&y());var l})},{default:w((()=>[S(" 重置 ")])),_:1})])])):G("",!0)])),_:1})])}}}),[["__scopeId","data-v-fe482045"]]),so=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"})),io={class:"user-table-container"},uo={key:0},co=["onClick"],po=Ze(_({name:"UserTable",inheritAttrs:!1,__name:"UserTable",props:{presetOptions:{}},emits:["editRecord"],setup(e,{expose:l,emit:a}){const o=I({userNo:"",activity:""}),r=e,n=a,s=I(null),i=Ye({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),d=Ee({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),u=Be([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"用户名",dataIndex:"userNo",ellipsis:!0,width:130},{title:"用户姓名",dataIndex:"userName",ellipsis:!0,width:130},{title:"手机号",dataIndex:"mobilePhone",ellipsis:!0,width:120},{title:"职位",dataIndex:"postName"},{title:"所属组织",dataIndex:"orgId"},{title:"所属部门",dataIndex:"deptId"},{title:"可用状态",dataIndex:"activity",align:"center",width:80},{title:"操作",dataIndex:"action",align:"center",width:80}]),c=Ge({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),v=We((e=>{const l=le("",o.value,e.paginate,e.sorter);return ke(l).then((e=>"0000"!==e.code?(t.error({message:"系统消息",description:e.message||"用户查询查询失败!"}),Promise.reject(e)):e))})),y=(e,l,a)=>{var t;e[l]=a,null==(t=s.value)||t.update()},m=e=>_e(le("update",e)).then((e=>{if("0000"!==e.code)return t.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);t.success({message:"系统消息",description:"修改成功"}),f()})),f=()=>{var e;null==(e=s.value)||e.refresh()};return l({doTableRefresh:f,queryParams:o}),(e,l)=>{const a=p,t=U("STable");return k(),x("section",io,[C(t,{ref_key:"table",ref:s,columns:R(u),"onUpdate:columns":l[0]||(l[0]=e=>V(u)?u.value=e:null),paginate:R(c),"onUpdate:paginate":l[1]||(l[1]=e=>V(c)?c.value=e:null),columnPresetResizable:!0,loadData:R(v),bodyMinRows:!0,immediate:!0,border:!1,scroll:R(d),sticky:R(i),rowKey:"id"},{bodyerCell:w((({column:e,record:l,value:t,groupIndex:o})=>["serial"===e.key?(k(),x("span",uo,W(o+1),1)):G("",!0),"orgId"===e.key?(k(),x($,{key:1},[S(W(R(te)(r.presetOptions.orgTree,t,["shortName","label"])),1)],64)):G("",!0),"deptId"===e.key?(k(),x($,{key:2},[S(W(R(te)(r.presetOptions.deptId,t)),1)],64)):G("",!0),"activity"===e.key?(k(),B(a,{key:3,checked:t,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,l,a)=>{y(e,l,a),m(e)})(l,"activity",e)},null,8,["checked","onChange"])):G("",!0),"action"===e.key?(k(),x("a",{key:4,href:"javascript: void(0)",style:{"font-weight":"500",display:"inline-block",margin:"0 7px"},onClick:e=>(e=>{n("editRecord",e)})(l)}," 修改 ",8,co)):G("",!0)])),_:1},8,["columns","paginate","loadData","scroll","sticky"])])}}}),[["__scopeId","data-v-b96e849b"]]),vo=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"})),yo={class:"user-drawer-form-container"},mo=Ze(_({name:"UserForm",inheritAttrs:!1,__name:"UserForm",props:{presetOptions:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:l}){const a=I(null),t=e,o=A((()=>t.loading)),r=I({}),n=I(""),s=Ke([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"userNo",field:"userNo",label:"用户名",props:{rows:1,autoSize:!0,placeholder:"请输入用户名"}},{type:"AInputPassword",slot:"password",field:"password",label:"用户密码",props:{placeholder:"请输入用户密码"}},{type:"AInput",slot:"userName",field:"userName",label:"用户姓名",props:{placeholder:"请输入用户姓名"}},{type:"AInput",slot:"mobilePhone",field:"mobilePhone",label:"手机号码",props:{placeholder:"请输入手机号码"}},{type:"AInput",slot:"idCard",field:"idCard",label:"身份证号",props:{placeholder:"请输入身份证号"}},{type:"ATreeSelect",slot:"orgId",field:"orgId",label:"所属组织",props:{dropdownClassName:"text-ellipsis",dropdownStyle:{maxHeight:"300px"},allowClear:!0,showSearch:!0,treeDefaultExpandAll:!0,dropdownMatchSelectWidth:!0,treeNodeFilterProp:"label",placeholder:"请选择所属组织",treeData:t.presetOptions.orgTree}},{type:"ASelect",slot:"deptId",field:"deptId",label:"所属部门",props:{allowClear:!0,placeholder:"请选择所属部门",options:t.presetOptions.deptId}},{type:"ASelect",slot:"roleId",field:"roleId",label:"所属角色",props:{mode:"multiple",placeholder:"请选择所属角色",allowClear:!0,fieldNames:{label:"roleName",value:"roleId"},options:t.presetOptions.roleId}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"状态信息",border:!0},{type:"ASwitch",slot:"activity",field:"activity",label:"用户状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),i=Le({userNo:[{required:!0,message:"请输入用户名"}],password:Xe.password({message:"请输入用户密码",validator:"用户密码过短",pattern:/.{6,}/,required:!0}),userName:[{required:!0,message:"请输入用户姓名"}],mobilePhone:[{required:!0,message:"请输入手机号码"}],idCard:[{required:!0,message:"请输入身份证号"}],orgId:[{required:!0,message:"请选择所属组织"}],roleId:[{required:!0,message:"请选择所属角色"}]}),d=He({gutter:8,xs:24});return l({validateFields:(...e)=>{var l;return null==(l=a.value)?void 0:l.validateFields(...e).then((()=>({action:n.value,record:r.value})))},resetFields:(...e)=>{var l;return null==(l=a.value)?void 0:l.resetFields(...e)},doCreate:(e,l)=>{n.value=e,r.value=l},doClose:()=>{n.value="",r.value={}}}),(e,l)=>{const t=U("SForm");return k(),x("section",yo,[C(t,{ref_key:"form",ref:a,modelValue:R(r),"onUpdate:modelValue":l[0]||(l[0]=e=>V(r)?r.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:R(o),groups:R(s),rules:R(i),grid:R(d)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-7aaf87ee"]]),fo=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"})),go={class:"user-drawer-container"},ho={class:"drawer-footer"},bo={class:"footer-fixed"},_o=_({name:"UserDrawer",inheritAttrs:!1,__name:"UserDrawer",props:{presetOptions:{}},emits:["submitted","closed"],setup(e,{expose:a,emit:o}){const r=e,n=o,s=I(null),i=I(""),d=I(""),u=I({}),c=I(!1),p=I(!1),y=I(!1),m=I(!1),f=I(!1),g=()=>{var e;c.value&&(i.value="",d.value="",u.value={},y.value=!1,p.value=!1,m.value=!1,c.value=!1,f.value=!1,null==(e=s.value)||e.doClose(),n("closed"))};return a({doEdit:e=>{i.value="修改用户",d.value="update",p.value=!1,c.value=!0,f.value=!1,u.value=Object.assign({activity:"Y"},e),K((()=>{var e;null==(e=s.value)||e.doCreate("update",u.value)}))},doAdd:e=>{i.value="新增用户",d.value="insert",p.value=!1,c.value=!0,f.value=!0,u.value=Object.assign({activity:"Y"},e),K((()=>{var e;null==(e=s.value)||e.doCreate("insert",u.value)}))}}),(e,a)=>{const o=l,d=v;return k(),x("section",go,[C(d,{width:"400",zIndex:1010,title:R(i),visible:R(c),forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:a[2]||(a[2]=e=>g())},{default:w((()=>[C(mo,{ref_key:"form",ref:s,presetOptions:r.presetOptions,disabled:R(y),readonly:R(p),loading:R(m)},null,8,["presetOptions","disabled","readonly","loading"]),j("div",ho,[j("div",bo,[C(o,{onClick:a[0]||(a[0]=e=>g())},{default:w((()=>[S(" 取消 ")])),_:1}),C(o,{type:"primary",loading:R(m),onClick:a[1]||(a[1]=e=>{var l,a;null==(a=null==(l=s.value)?void 0:l.validateFields())||a.then((({action:e,record:l})=>{if(!m.value){m.value=!0;const a={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},o="insert"===e?xe(le(e,l)):_e(le(e,l));return o.finally((()=>{m.value=!1})),o.then((e=>{"0000"!==e.code?t.error({message:"系统消息",description:e.message||a.error}):t.success({message:"系统消息",description:a.success});const o="0000"!==e.code?Promise.reject(e):l;return n("submitted"),g(),o}))}}))})},{default:w((()=>[S(" 保存 ")])),_:1},8,["loading"])])])])),_:1},8,["title","visible"])])}}}),ko=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),xo={class:"section-container"},Co={class:"section-query-container"},wo={class:"section-table-container"},So=Ze(_({name:"UserManage",inheritAttrs:!1,__name:"UserManage",setup(e){L((e=>({f6269532:R(d).layoutViewStyle.minHeight})));const l=I({orgTree:[],deptId:[],roleId:[]}),a={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},t={flex:"0 0 auto",overflow:"hidden"},o={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},r=I(null),n=I(null),i=I(null),d=se(),u=(e={})=>{r.value&&(r.value.queryParams={...r.value.queryParams,...e},r.value.doTableRefresh())},c=e=>{var l;null==(l=i.value)||l.doEdit(e)},p=()=>{var e;null==(e=i.value)||e.doAdd({})};return ie({id:"orgTree"}).then((e=>{if("0000"!==e.code)return Promise.reject();l.value.orgTree.splice(0),l.value.orgTree.push(...e.result)})),Ce({id:"dept",sqlParams:{orgId:"",isAll:"1"}}).then((e=>{if("0000"!==e.code)return Promise.reject();l.value.deptId.splice(0),l.value.deptId.push(...e.result)})),we({activity:"Y"}).then((e=>{if("0000"!==e.code)return Promise.reject();l.value.roleId.splice(0),l.value.roleId.push(...e.result)})),(e,d)=>{const v=s;return k(),x("section",xo,[C(v,{style:a,headStyle:t,bodyStyle:o,bordered:!1},{default:w((()=>[j("div",Co,[C(no,{ref_key:"query",ref:n,onQueryTable:u,onAddRecord:p},null,512)]),j("div",wo,[C(po,{ref_key:"table",ref:r,presetOptions:R(l),onEditRecord:c},null,8,["presetOptions"])])])),_:1}),C(_o,{ref_key:"drawer",ref:i,presetOptions:R(l),onSubmitted:u},null,8,["presetOptions"])])}}}),[["__scopeId","data-v-e4d715d0"]]),Io=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"}));export{ca as B,kl as L,Ra as M,wl as O,ll as P,nt as R,lt as T,so as U,rl as a,dl as b,Ml as c,Bl as d,Kl as e,la as f,ia as g,Oa as h,za as i,Ha as j,Ja as k,ht as l,jt as m,Mt as n,Vt as o,Gt as p,Qt as q,vo as r,fo as s,ko as t,Io as u};
