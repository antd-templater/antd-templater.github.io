import{w as e,z as s,x as t,y as o,N as a}from"./antd-design-all-8a33d471.js";import{u as i,_ as r,h as n,A as m,i as c,j as u,b as l,k as d,D as p,P as _}from"./bootstrap-6f61ce68.js";import{d as h,e as g,n as y,w as b,Q as L,a1 as v,O as f,u as w,f as E,P as R,a2 as P,a3 as j,I as x,a4 as O}from"./vue-all-a395f9b2.js";import{a as T}from"./antd-template-lib-a21fb08c.js";import{U as A,_ as k,a as I,b as V,c as D,d as M,e as z}from"./layout-all-c544a700.js";import"./mocks-all-8f81a5ea.js";const U=h({__name:"App",setup(o){const a=i(),r=g((()=>a.componentSize)),n=g((()=>a.language===e.locale?e:s));return y((()=>{t.config({theme:a.themeColor}),a.isMobile?document.body.classList.add("is-mobile"):document.body.classList.remove("is-mobile"),a.isMixMenu?document.body.classList.add("is-mixmenu"):document.body.classList.remove("is-mixmenu"),a.isTopMenu?document.body.classList.add("is-topmenu"):document.body.classList.remove("is-topmenu"),a.isSideMenu?document.body.classList.add("is-sidemenu"):document.body.classList.remove("is-sidemenu"),a.themeWeak?document.body.classList.add("is-theme-weak"):document.body.classList.remove("is-theme-weak"),a.keepAlive?document.body.classList.add("is-keep-alive"):document.body.classList.remove("is-keep-alive"),a.multiTab?document.body.classList.add("is-multi-tab"):document.body.classList.remove("is-multi-tab")})),b((()=>a.domTitle),(e=>{document.title=e.trim()}),{immediate:!0}),(e,s)=>{const o=R("RouterView"),a=t;return L(),v(a,{locale:w(n),componentSize:w(r)},{default:f((()=>[E(o)])),_:1},8,["locale","componentSize"])}}}),C=n.constantRoutes;C.push({path:"/index",name:"index",redirect:"/system/OrganizeManage"},{path:"/login",redirect:"/login/Login",component:A,children:[{path:"Login",name:"Login",component:()=>r((()=>import("./bootstrap-6f61ce68.js").then((e=>e.L))),["static/js/bootstrap-6f61ce68.js","static/js/vue-all-a395f9b2.js","static/js/storage-all-b6f9113f.js","static/js/vendors-all-e6577163.js","static/js/antd-design-all-8a33d471.js","static/js/antd-design-icons-11a6053d.js","static/js/date-all-5291a4a2.js","static/css/antd-design-all-d9e7452f.css","static/js/antd-template-lib-a21fb08c.js","static/js/layout-all-c544a700.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-ab7e4bf3.js","static/css/bootstrap-4be7a914.css"]),meta:{title:"系统登录"}}]});const S=j({routes:C,history:P(m),scrollBehavior:(e,s,t)=>{const o=i(),a=o.multiTab,r=o.keepAlive,n=!1!==e.meta.allowCache;return a&&r&&n&&t?t:{top:0,left:0}}}),q={...c(Object.assign({"/src/layout/BasicLayout.tsx":k,"/src/layout/BlankLayout.tsx":I,"/src/layout/PageFrame.tsx":V,"/src/layout/PageView.tsx":D,"/src/layout/RouteView.tsx":M,"/src/layout/UserLayout.tsx":z})),...u(Object.assign({"/src/views/error/PageError403.vue":()=>r((()=>import("./bootstrap-6f61ce68.js").then((e=>e.w))),["static/js/bootstrap-6f61ce68.js","static/js/vue-all-a395f9b2.js","static/js/storage-all-b6f9113f.js","static/js/vendors-all-e6577163.js","static/js/antd-design-all-8a33d471.js","static/js/antd-design-icons-11a6053d.js","static/js/date-all-5291a4a2.js","static/css/antd-design-all-d9e7452f.css","static/js/antd-template-lib-a21fb08c.js","static/js/layout-all-c544a700.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-ab7e4bf3.js","static/css/bootstrap-4be7a914.css"]),"/src/views/error/PageError404.vue":()=>r((()=>import("./bootstrap-6f61ce68.js").then((e=>e.x))),["static/js/bootstrap-6f61ce68.js","static/js/vue-all-a395f9b2.js","static/js/storage-all-b6f9113f.js","static/js/vendors-all-e6577163.js","static/js/antd-design-all-8a33d471.js","static/js/antd-design-icons-11a6053d.js","static/js/date-all-5291a4a2.js","static/css/antd-design-all-d9e7452f.css","static/js/antd-template-lib-a21fb08c.js","static/js/layout-all-c544a700.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-ab7e4bf3.js","static/css/bootstrap-4be7a914.css"]),"/src/views/error/PageError500.vue":()=>r((()=>import("./bootstrap-6f61ce68.js").then((e=>e.y))),["static/js/bootstrap-6f61ce68.js","static/js/vue-all-a395f9b2.js","static/js/storage-all-b6f9113f.js","static/js/vendors-all-e6577163.js","static/js/antd-design-all-8a33d471.js","static/js/antd-design-icons-11a6053d.js","static/js/date-all-5291a4a2.js","static/css/antd-design-all-d9e7452f.css","static/js/antd-template-lib-a21fb08c.js","static/js/layout-all-c544a700.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-ab7e4bf3.js","static/css/bootstrap-4be7a914.css"]),"/src/views/login/Login.vue":()=>r((()=>import("./bootstrap-6f61ce68.js").then((e=>e.L))),["static/js/bootstrap-6f61ce68.js","static/js/vue-all-a395f9b2.js","static/js/storage-all-b6f9113f.js","static/js/vendors-all-e6577163.js","static/js/antd-design-all-8a33d471.js","static/js/antd-design-icons-11a6053d.js","static/js/date-all-5291a4a2.js","static/css/antd-design-all-d9e7452f.css","static/js/antd-template-lib-a21fb08c.js","static/js/layout-all-c544a700.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-ab7e4bf3.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/OrganizeManage.vue":()=>r((()=>import("./bootstrap-6f61ce68.js").then((e=>e.O))),["static/js/bootstrap-6f61ce68.js","static/js/vue-all-a395f9b2.js","static/js/storage-all-b6f9113f.js","static/js/vendors-all-e6577163.js","static/js/antd-design-all-8a33d471.js","static/js/antd-design-icons-11a6053d.js","static/js/date-all-5291a4a2.js","static/css/antd-design-all-d9e7452f.css","static/js/antd-template-lib-a21fb08c.js","static/js/layout-all-c544a700.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-ab7e4bf3.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/ResourceManage.vue":()=>r((()=>import("./bootstrap-6f61ce68.js").then((e=>e.R))),["static/js/bootstrap-6f61ce68.js","static/js/vue-all-a395f9b2.js","static/js/storage-all-b6f9113f.js","static/js/vendors-all-e6577163.js","static/js/antd-design-all-8a33d471.js","static/js/antd-design-icons-11a6053d.js","static/js/date-all-5291a4a2.js","static/css/antd-design-all-d9e7452f.css","static/js/antd-template-lib-a21fb08c.js","static/js/layout-all-c544a700.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-ab7e4bf3.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/RoleManage.vue":()=>r((()=>import("./bootstrap-6f61ce68.js").then((e=>e.z))),["static/js/bootstrap-6f61ce68.js","static/js/vue-all-a395f9b2.js","static/js/storage-all-b6f9113f.js","static/js/vendors-all-e6577163.js","static/js/antd-design-all-8a33d471.js","static/js/antd-design-icons-11a6053d.js","static/js/date-all-5291a4a2.js","static/css/antd-design-all-d9e7452f.css","static/js/antd-template-lib-a21fb08c.js","static/js/layout-all-c544a700.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-ab7e4bf3.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/UserManage.vue":()=>r((()=>import("./bootstrap-6f61ce68.js").then((e=>e.U))),["static/js/bootstrap-6f61ce68.js","static/js/vue-all-a395f9b2.js","static/js/storage-all-b6f9113f.js","static/js/vendors-all-e6577163.js","static/js/antd-design-all-8a33d471.js","static/js/antd-design-icons-11a6053d.js","static/js/date-all-5291a4a2.js","static/css/antd-design-all-d9e7452f.css","static/js/antd-template-lib-a21fb08c.js","static/js/layout-all-c544a700.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-ab7e4bf3.js","static/css/bootstrap-4be7a914.css"])}))};o.configure({showSpinner:!1});const B="/login/Login",F=["/login/Login"];S.beforeEach((async(e,s,t)=>{o.start();const i=l(),r=d(),n=i.token,m=i.userRole;if(n){if(e.path===B)return void t({path:"/index"});if(!m.permissions||0===m.permissions.length){try{await i.getUserInfo({}),await r.generateRouter({},q);const o=x(r.dynamicRoutes),a=s.query.redirect||e.path,n="string"==typeof a?decodeURIComponent(a):"";for(const e of o)S.addRoute(e);e.path===n?t({...e,replace:!0}):t({path:n})}catch(c){await new Promise((e=>{a.error({duration:.8,message:"系统通知",description:"获取用户信息失败，请重新登录!",onClose:()=>i.logout().then(e)})})),t({path:B,query:{redirect:e.fullPath}})}return}return t()}return e&&e.name?F.includes(e.path)?t():(await new Promise((e=>{a.error({duration:.8,message:"系统通知",description:"token 已过期, 请重新登录!",onClose:()=>i.logout().then(e)})})),void t({path:B,query:{redirect:e.fullPath}})):t({path:B})})),S.afterEach((e=>{let s="";for(const t of e.matched){const e="/"!==t.path,o="string"==typeof t.meta.title&&t.meta.title.trim();e&&o&&(s=s?s+" - "+o:o)}i().toggleDomTitle(s),o.done()})),O(U).use(T).use(p).use(_).use(S).mount("#app");export{S as R};
