import{V as e,z as s,W as t,X as o,N as a}from"./antd-design-all-03a03223.js";import{u as i,_ as r,h as n,A as m,i as c,j as l,b as u,k as d,D as p,P as _}from"./bootstrap-d2acb3e8.js";import{d as g,e as h,n as y,w as b,W as L,a6 as v,S as f,u as w,f as E,U as R,a7 as j,a8 as P,I as x,a9 as O}from"./vue-all-6cdc8d8f.js";import{d as T}from"./date-all-4a748946.js";import{a as A}from"./antd-template-lib-764d8e0d.js";import{U as V,_ as k,a as I,b as D,c as M,d as z,e as U}from"./layout-all-bb2bb1fd.js";import"./mocks-all-1a59b907.js";const S=g({__name:"App",setup(o){const a=i(),r=h((()=>a.componentSize)),n=h((()=>a.language===e.locale?e:s));return y((()=>{t.config({theme:a.themeColor}),a.isMobile?document.body.classList.add("is-mobile"):document.body.classList.remove("is-mobile"),a.isMixMenu?document.body.classList.add("is-mixmenu"):document.body.classList.remove("is-mixmenu"),a.isTopMenu?document.body.classList.add("is-topmenu"):document.body.classList.remove("is-topmenu"),a.isSideMenu?document.body.classList.add("is-sidemenu"):document.body.classList.remove("is-sidemenu"),a.multiTab?document.body.classList.add("is-multi-tab"):document.body.classList.remove("is-multi-tab"),a.keepAlive?document.body.classList.add("is-keep-alive"):document.body.classList.remove("is-keep-alive"),a.themeWeak?document.body.classList.add("is-theme-weak"):document.body.classList.remove("is-theme-weak"),T.locale(a.language)})),b((()=>a.domTitle),(e=>{document.title=e.trim()}),{immediate:!0}),(e,s)=>{const o=R("RouterView"),a=t;return L(),v(a,{locale:w(n),componentSize:w(r)},{default:f((()=>[E(o)])),_:1},8,["locale","componentSize"])}}}),C=n.constantRoutes;C.push({path:"/index",name:"index",redirect:"/system/OrganizeManage"},{path:"/login",redirect:"/login/Login",component:V,children:[{path:"Login",name:"Login",component:()=>r((()=>import("./bootstrap-d2acb3e8.js").then((e=>e.L))),["static/js/bootstrap-d2acb3e8.js","static/js/date-all-4a748946.js","static/js/antd-design-all-03a03223.js","static/js/vendors-all-a4bdb833.js","static/js/vue-all-6cdc8d8f.js","static/js/antd-design-icons-4227db51.js","static/css/antd-design-all-d274e4ff.css","static/js/storage-all-d3f3e648.js","static/js/layout-all-bb2bb1fd.js","static/js/antd-template-lib-764d8e0d.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-00fcfe53.js","static/css/bootstrap-4be7a914.css"]),meta:{title:"系统登录"}}]});const q=P({routes:C,history:j(m),scrollBehavior:(e,s,t)=>{const o=i(),a=o.multiTab,r=o.keepAlive,n=!1!==e.meta.allowCache;return a&&r&&n&&t?t:{top:0,left:0}}}),B={...c(Object.assign({"/src/layout/BasicLayout.tsx":k,"/src/layout/BlankLayout.tsx":I,"/src/layout/PageFrame.tsx":D,"/src/layout/PageView.tsx":M,"/src/layout/RouteView.tsx":z,"/src/layout/UserLayout.tsx":U})),...l(Object.assign({"/src/views/error/PageError403.vue":()=>r((()=>import("./bootstrap-d2acb3e8.js").then((e=>e.w))),["static/js/bootstrap-d2acb3e8.js","static/js/date-all-4a748946.js","static/js/antd-design-all-03a03223.js","static/js/vendors-all-a4bdb833.js","static/js/vue-all-6cdc8d8f.js","static/js/antd-design-icons-4227db51.js","static/css/antd-design-all-d274e4ff.css","static/js/storage-all-d3f3e648.js","static/js/layout-all-bb2bb1fd.js","static/js/antd-template-lib-764d8e0d.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-00fcfe53.js","static/css/bootstrap-4be7a914.css"]),"/src/views/error/PageError404.vue":()=>r((()=>import("./bootstrap-d2acb3e8.js").then((e=>e.x))),["static/js/bootstrap-d2acb3e8.js","static/js/date-all-4a748946.js","static/js/antd-design-all-03a03223.js","static/js/vendors-all-a4bdb833.js","static/js/vue-all-6cdc8d8f.js","static/js/antd-design-icons-4227db51.js","static/css/antd-design-all-d274e4ff.css","static/js/storage-all-d3f3e648.js","static/js/layout-all-bb2bb1fd.js","static/js/antd-template-lib-764d8e0d.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-00fcfe53.js","static/css/bootstrap-4be7a914.css"]),"/src/views/error/PageError500.vue":()=>r((()=>import("./bootstrap-d2acb3e8.js").then((e=>e.y))),["static/js/bootstrap-d2acb3e8.js","static/js/date-all-4a748946.js","static/js/antd-design-all-03a03223.js","static/js/vendors-all-a4bdb833.js","static/js/vue-all-6cdc8d8f.js","static/js/antd-design-icons-4227db51.js","static/css/antd-design-all-d274e4ff.css","static/js/storage-all-d3f3e648.js","static/js/layout-all-bb2bb1fd.js","static/js/antd-template-lib-764d8e0d.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-00fcfe53.js","static/css/bootstrap-4be7a914.css"]),"/src/views/login/Login.vue":()=>r((()=>import("./bootstrap-d2acb3e8.js").then((e=>e.L))),["static/js/bootstrap-d2acb3e8.js","static/js/date-all-4a748946.js","static/js/antd-design-all-03a03223.js","static/js/vendors-all-a4bdb833.js","static/js/vue-all-6cdc8d8f.js","static/js/antd-design-icons-4227db51.js","static/css/antd-design-all-d274e4ff.css","static/js/storage-all-d3f3e648.js","static/js/layout-all-bb2bb1fd.js","static/js/antd-template-lib-764d8e0d.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-00fcfe53.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/OrganizeManage.vue":()=>r((()=>import("./bootstrap-d2acb3e8.js").then((e=>e.O))),["static/js/bootstrap-d2acb3e8.js","static/js/date-all-4a748946.js","static/js/antd-design-all-03a03223.js","static/js/vendors-all-a4bdb833.js","static/js/vue-all-6cdc8d8f.js","static/js/antd-design-icons-4227db51.js","static/css/antd-design-all-d274e4ff.css","static/js/storage-all-d3f3e648.js","static/js/layout-all-bb2bb1fd.js","static/js/antd-template-lib-764d8e0d.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-00fcfe53.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/ResourceManage.vue":()=>r((()=>import("./bootstrap-d2acb3e8.js").then((e=>e.R))),["static/js/bootstrap-d2acb3e8.js","static/js/date-all-4a748946.js","static/js/antd-design-all-03a03223.js","static/js/vendors-all-a4bdb833.js","static/js/vue-all-6cdc8d8f.js","static/js/antd-design-icons-4227db51.js","static/css/antd-design-all-d274e4ff.css","static/js/storage-all-d3f3e648.js","static/js/layout-all-bb2bb1fd.js","static/js/antd-template-lib-764d8e0d.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-00fcfe53.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/RoleManage.vue":()=>r((()=>import("./bootstrap-d2acb3e8.js").then((e=>e.z))),["static/js/bootstrap-d2acb3e8.js","static/js/date-all-4a748946.js","static/js/antd-design-all-03a03223.js","static/js/vendors-all-a4bdb833.js","static/js/vue-all-6cdc8d8f.js","static/js/antd-design-icons-4227db51.js","static/css/antd-design-all-d274e4ff.css","static/js/storage-all-d3f3e648.js","static/js/layout-all-bb2bb1fd.js","static/js/antd-template-lib-764d8e0d.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-00fcfe53.js","static/css/bootstrap-4be7a914.css"]),"/src/views/system/UserManage.vue":()=>r((()=>import("./bootstrap-d2acb3e8.js").then((e=>e.U))),["static/js/bootstrap-d2acb3e8.js","static/js/date-all-4a748946.js","static/js/antd-design-all-03a03223.js","static/js/vendors-all-a4bdb833.js","static/js/vue-all-6cdc8d8f.js","static/js/antd-design-icons-4227db51.js","static/css/antd-design-all-d274e4ff.css","static/js/storage-all-d3f3e648.js","static/js/layout-all-bb2bb1fd.js","static/js/antd-template-lib-764d8e0d.js","static/css/layout-all-fbc23093.css","static/js/fetch-all-00fcfe53.js","static/css/bootstrap-4be7a914.css"])}))};o.configure({showSpinner:!1});const W="/login/Login",F=["/login/Login"];q.beforeEach((async(e,s,t)=>{o.start();const i=u(),r=d(),n=i.token,m=i.userRole;if(n){if(e.path===W)return void t({path:"/index"});if(!m.permissions||0===m.permissions.length){try{await i.getUserInfo({}),await r.generateRouter({},B);const o=x(r.dynamicRoutes),a=s.query.redirect||e.path,n="string"==typeof a?decodeURIComponent(a):"";for(const e of o)q.addRoute(e);e.path===n?t({...e,replace:!0}):t({path:n})}catch(c){await new Promise((e=>{a.error({duration:.8,message:"系统通知",description:"获取用户信息失败，请重新登录!",onClose:()=>i.logout().then(e)})})),t({path:W,query:{redirect:e.fullPath}})}return}return t()}return e&&e.name?F.includes(e.path)?t():(await new Promise((e=>{a.error({duration:.8,message:"系统通知",description:"token 已过期, 请重新登录!",onClose:()=>i.logout().then(e)})})),void t({path:W,query:{redirect:e.fullPath}})):t({path:W})})),q.afterEach((e=>{let s="";for(const t of e.matched){const e="/"!==t.path,o="string"==typeof t.meta.title&&t.meta.title.trim();e&&o&&(s=s?s+" - "+o:o)}i().toggleDomTitle(s),o.done()})),O(S).use(A).use(p).use(_).use(q).mount("#app");export{q as R};
